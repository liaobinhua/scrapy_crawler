{"url_object_id": "48a4df2b8f71dc594ef6f4b619d03826", "title": "Python 数据处理库 pandas 入门教程", "url": "http://python.jobbole.com/89084/", "create_date": "2018/04/17", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/12/6da94dec8f6f96417f14c8291e6345801.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "1", "tags": "工具与框架", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://qiangbo.space/2018-02-15/pandas_tutorial/\">强波的技术博客</a>   </div><p>pandas是一个Python语言的软件包，在我们使用Python语言进行机器学习编程的时候，这是一个非常常用的基础编程库。本文是对它的一个入门教程。</p>\n<p>pandas提供了快速，灵活和富有表现力的数据结构，目的是使“关系”或“标记”数据的工作既简单又直观。它旨在成为在Python中进行实际数据分析的高级构建块。</p>\n<h1 id=\"id-入门介绍\">入门介绍</h1>\n<p>pandas适合于许多不同类型的数据，包括：</p>\n<ul>\n<li>具有异构类型列的表格数据，例如SQL表格或Excel数据</li>\n<li>有序和无序（不一定是固定频率）时间序列数据。</li>\n<li>具有行列标签的任意矩阵数据（均匀类型或不同类型）</li>\n<li>任何其他形式的观测/统计数据集。</li>\n</ul>\n<p>由于这是一个Python语言的软件包，因此需要你的机器上首先需要具备Python语言的环境。关于这一点，请自行在网络上搜索获取方法。</p>\n<p>关于如何获取pandas请参阅官网上的说明：<a href=\"http://pandas.pydata.org/pandas-docs/stable/install.html\">pandas Installation</a>。</p>\n<p>通常情况下，我们可以通过<code>pip</code>来执行安装：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d39a435354723\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo pip3 install pandas\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d39a435354723-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d39a435354723-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d39a435354723-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">pip3 </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">pandas</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d39a435354723-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n</div>\n<p>或者通过<a href=\"http://pandas.pydata.org/pandas-docs/stable/install.html#installing-pandas-with-anaconda\">conda</a> 来安装pandas：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3a8059435467\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconda install pandas\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3a8059435467-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3a8059435467-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3a8059435467-1\"><span class=\"crayon-e\">conda </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">pandas</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3a8059435467-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n\n</div>\n</div>\n<p>目前（2018年2月）pandas的最新版本是<a href=\"http://pandas.pydata.org/pandas-docs/stable/whatsnew.html#v0-22-0-december-29-2017\">v0.22.0</a>（发布时间：2017年12月29日）。</p>\n<p>我已经将本文的源码和测试数据放到Github上： <a href=\"https://github.com/paulQuei/pandas_tutorial\">pandas_tutorial</a> ，读者可以前往获取。</p>\n<p>另外，pandas常常和<a href=\"http://numpy.org\">NumPy</a>一起使用，本文中的源码中也会用到<a href=\"http://numpy.org\">NumPy</a>。</p>\n<p>建议读者先对<a href=\"http://numpy.org\">NumPy</a>有一定的熟悉再来学习pandas，我之前也写过一个NumPy的基础教程，参见这里：<a href=\"/2018-01-06/AI_NumPy_Tutorial/\">Python 机器学习库 NumPy 教程</a></p>\n<h1 id=\"id-核心数据结构\">核心数据结构</h1>\n<p>pandas最核心的就是<code>Series</code>和<code>DataFrame</code>两个数据结构。</p>\n<p>这两种类型的数据结构对比如下：</p>\n<table>\n<thead>\n<tr>\n<th>名称</th>\n<th>维度</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Series</td>\n<td>1维</td>\n<td>带有标签的同构类型数组</td>\n</tr>\n<tr>\n<td>DataFrame</td>\n<td>2维</td>\n<td>表格结构，带有标签，大小可变，且可以包含异构的数据列</td>\n</tr>\n</tbody>\n</table>\n<p>DataFrame可以看做是Series的容器，即：一个DataFrame中可以包含若干个Series。</p>\n<blockquote><p>注：在0.20.0版本之前，还有一个三维的数据结构，名称为Panel。这也是pandas库取名的原因：<strong>pan</strong>(el)-<strong>da</strong>(ta)-<strong>s</strong>。但这种数据结构由于很少被使用到，因此已经被废弃了。</p></blockquote>\n<h2 id=\"id-series\">Series</h2>\n<p>由于Series是一维结构的数据，我们可以直接通过数组来创建这种数据，像这样：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3ad262302651\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\nseries1 = pd.Series([1, 2, 3, 4])\r\nprint(\"series1:\\n{}\\n\".format(series1))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ad262302651-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ad262302651-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ad262302651-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ad262302651-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ad262302651-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ad262302651-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ad262302651-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ad262302651-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ad262302651-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ad262302651-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ad262302651-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ad262302651-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ad262302651-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ad262302651-6\"><span class=\"crayon-v\">series1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ad262302651-7\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"series1:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ad262302651-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3b1691216785\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nseries1:\r\n0    1\r\n1    2\r\n2    3\r\n3    4\r\ndtype: int64\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b1691216785-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3b1691216785-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b1691216785-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3b1691216785-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b1691216785-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3b1691216785-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b1691216785-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b1691216785-1\"><span class=\"crayon-v\">series1</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3b1691216785-2\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b1691216785-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3b1691216785-4\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b1691216785-5\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3b1691216785-6\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">int64</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b1691216785-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n</div>\n<p>这段输出说明如下：</p>\n<ul>\n<li>输出的最后一行是Series中数据的类型，这里的数据都是<code>int64</code>类型的。</li>\n<li>数据在第二列输出，第一列是数据的索引，在pandas中称之为<code>Index</code>。</li>\n</ul>\n<p>我们可以分别打印出Series中的数据和索引：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3b4982154865\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\nprint(\"series1.values: {}\\n\".format(series1.values))\r\n\r\nprint(\"series1.index: {}\\n\".format(series1.index))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b4982154865-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3b4982154865-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b4982154865-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3b4982154865-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b4982154865-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3b4982154865-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b4982154865-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3b4982154865-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b4982154865-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"series1.values: {}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">values</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3b4982154865-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b4982154865-5\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"series1.index: {}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3b4982154865-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n</div>\n<p>这两行代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3b8195117706\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nseries1.values: [1 2 3 4]\r\n\r\nseries1.index: RangeIndex(start=0, stop=4, step=1)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b8195117706-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3b8195117706-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3b8195117706-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3b8195117706-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b8195117706-1\"><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">values</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3b8195117706-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3b8195117706-3\"><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RangeIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">start</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stop</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">step</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3b8195117706-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n</div>\n<p>如果不指定（像上面这样），索引是[1, N-1]的形式。不过我们也可以在创建Series的时候指定索引。索引未必一定需要是整数，可以是任何类型的数据，例如字符串。例如我们以七个字母来映射七个音符。索引的目的是可以通过它来获取对应的数据，例如下面这样：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3bb897062692\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\nseries2 = pd.Series([1, 2, 3, 4, 5, 6, 7],\r\n    index=[\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"])\r\nprint(\"series2:\\n{}\\n\".format(series2))\r\nprint(\"E is {}\\n\".format(series2[\"E\"]))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bb897062692-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bb897062692-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bb897062692-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bb897062692-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bb897062692-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bb897062692-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bb897062692-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bb897062692-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bb897062692-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bb897062692-3\"><span class=\"crayon-v\">series2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bb897062692-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"C\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"D\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"E\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"F\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"G\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"B\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bb897062692-5\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"series2:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bb897062692-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"E is {}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series2</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"E\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bb897062692-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3bf930529513\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nseries2:\r\nC    1\r\nD    2\r\nE    3\r\nF    4\r\nG    5\r\nA    6\r\nB    7\r\ndtype: int64\r\n\r\nE is 3\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3bf930529513-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bf930529513-1\"><span class=\"crayon-v\">series2</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bf930529513-2\"><span class=\"crayon-i\">C</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bf930529513-3\"><span class=\"crayon-i\">D</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bf930529513-4\"><span class=\"crayon-i\">E</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bf930529513-5\"><span class=\"crayon-i\">F</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bf930529513-6\"><span class=\"crayon-i\">G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bf930529513-7\"><span class=\"crayon-i\">A</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bf930529513-8\"><span class=\"crayon-i\">B</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bf930529513-9\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">int64</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bf930529513-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3bf930529513-11\"><span class=\"crayon-i\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3bf930529513-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</div>\n</div>\n<h2 id=\"id-dataframe\">DataFrame</h2>\n<p>下面我们来看一下DataFrame的创建。我们可以通过NumPy的接口来创建一个4×4的矩阵，以此来创建一个DataFrame，像这样：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3c2084198983\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\ndf1 = pd.DataFrame(np.arange(16).reshape(4,4))\r\nprint(\"df1:\\n{}\\n\".format(df1))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c2084198983-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3c2084198983-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c2084198983-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3c2084198983-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c2084198983-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c2084198983-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3c2084198983-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c2084198983-3\"><span class=\"crayon-v\">df1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3c2084198983-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df1:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c2084198983-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3c5018546229\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf1:\r\n    0   1   2   3\r\n0   0   1   2   3\r\n1   4   5   6   7\r\n2   8   9  10  11\r\n3  12  13  14  15\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c5018546229-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3c5018546229-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c5018546229-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3c5018546229-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c5018546229-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3c5018546229-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c5018546229-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c5018546229-1\"><span class=\"crayon-v\">df1</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3c5018546229-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c5018546229-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3c5018546229-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c5018546229-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3c5018546229-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">14</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c5018546229-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n</div>\n<p>从这个输出我们可以看到，默认的索引和列名都是[0, N-1]的形式。</p>\n<p>我们可以在创建DataFrame的时候指定列名和索引，像这样：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3c8522293533\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\ndf2 = pd.DataFrame(np.arange(16).reshape(4,4),\r\n    columns=[\"column1\", \"column2\", \"column3\", \"column4\"],\r\n    index=[\"a\", \"b\", \"c\", \"d\"])\r\nprint(\"df2:\\n{}\\n\".format(df2))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c8522293533-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3c8522293533-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c8522293533-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3c8522293533-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c8522293533-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3c8522293533-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3c8522293533-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c8522293533-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3c8522293533-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c8522293533-3\"><span class=\"crayon-v\">df2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3c8522293533-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">columns</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"column1\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"column2\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"column3\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"column4\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c8522293533-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"a\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"b\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"c\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"d\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3c8522293533-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df2:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3c8522293533-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3cc800484054\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf2:\r\n   column1  column2  column3  column4\r\na        0        1        2        3\r\nb        4        5        6        7\r\nc        8        9       10       11\r\nd       12       13       14       15\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3cc800484054-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3cc800484054-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3cc800484054-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3cc800484054-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3cc800484054-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3cc800484054-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3cc800484054-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3cc800484054-1\"><span class=\"crayon-v\">df2</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3cc800484054-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">column1  </span><span class=\"crayon-e\">column2  </span><span class=\"crayon-e\">column3  </span><span class=\"crayon-i\">column4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3cc800484054-3\"><span class=\"crayon-i\">a</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3cc800484054-4\"><span class=\"crayon-i\">b</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3cc800484054-5\"><span class=\"crayon-i\">c</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3cc800484054-6\"><span class=\"crayon-i\">d</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">13</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">14</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">15</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3cc800484054-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n\n</div>\n</div>\n<p>我们也可以直接指定列数据来创建DataFrame：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3cf527309857\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\ndf3 = pd.DataFrame({\"note\" : [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"],\r\n    \"weekday\": [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"]})\r\nprint(\"df3:\\n{}\\n\".format(df3))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3cf527309857-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3cf527309857-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3cf527309857-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3cf527309857-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3cf527309857-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3cf527309857-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3cf527309857-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3cf527309857-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3cf527309857-3\"><span class=\"crayon-v\">df3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"note\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"C\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"D\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"E\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"F\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"G\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"B\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3cf527309857-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"weekday\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"Mon\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Tue\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Wed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Thu\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Fri\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Sat\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Sun\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3cf527309857-5\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df3:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3cf527309857-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3d2529746924\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf3:\r\n  note weekday\r\n0    C     Mon\r\n1    D     Tue\r\n2    E     Wed\r\n3    F     Thu\r\n4    G     Fri\r\n5    A     Sat\r\n6    B     Sun\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d2529746924-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d2529746924-1\"><span class=\"crayon-v\">df3</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d2529746924-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">note </span><span class=\"crayon-i\">weekday</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d2529746924-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Mon</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d2529746924-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Tue</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d2529746924-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Wed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d2529746924-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Thu</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d2529746924-7\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">G</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Fri</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d2529746924-8\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sat</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d2529746924-9\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sun</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d2529746924-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n</div>\n<p>请注意：</p>\n<ul>\n<li>DataFrame的不同列可以是不同的数据类型</li>\n<li>如果以Series数组来创建DataFrame，每个Series将成为一行，而不是一列</li>\n</ul>\n<p>例如：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3d6101164402\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\nnoteSeries = pd.Series([\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"],\r\n    index=[1, 2, 3, 4, 5, 6, 7])\r\nweekdaySeries = pd.Series([\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n    index=[1, 2, 3, 4, 5, 6, 7])\r\ndf4 = pd.DataFrame([noteSeries, weekdaySeries])\r\nprint(\"df4:\\n{}\\n\".format(df4))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d6101164402-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d6101164402-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d6101164402-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d6101164402-3\"><span class=\"crayon-v\">noteSeries</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"C\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"D\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"E\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"F\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"G\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"B\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d6101164402-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d6101164402-5\"><span class=\"crayon-v\">weekdaySeries</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"Mon\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Tue\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Wed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Thu\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Fri\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Sat\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Sun\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d6101164402-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d6101164402-7\"><span class=\"crayon-v\">df4</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">noteSeries</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">weekdaySeries</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d6101164402-8\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df4:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d6101164402-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n\n</div>\n</div>\n<p>df4的输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3d9337794559\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf4:\r\n     1    2    3    4    5    6    7\r\n0    C    D    E    F    G    A    B\r\n1  Mon  Tue  Wed  Thu  Fri  Sat  Sun\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d9337794559-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d9337794559-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d9337794559-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3d9337794559-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3d9337794559-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d9337794559-1\"><span class=\"crayon-v\">df4</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d9337794559-2\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d9337794559-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">G</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3d9337794559-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Mon  </span><span class=\"crayon-e\">Tue  </span><span class=\"crayon-e\">Wed  </span><span class=\"crayon-e\">Thu  </span><span class=\"crayon-e\">Fri  </span><span class=\"crayon-e\">Sat  </span><span class=\"crayon-i\">Sun</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3d9337794559-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n</div>\n<p>我们可以通过下面的形式给DataFrame添加或者删除列数据：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3dc492652561\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\ndf3[\"No.\"] = pd.Series([1, 2, 3, 4, 5, 6, 7])\r\nprint(\"df3:\\n{}\\n\".format(df3))\r\n\r\ndel df3[\"weekday\"]\r\nprint(\"df3:\\n{}\\n\".format(df3))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3dc492652561-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3dc492652561-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3dc492652561-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3dc492652561-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3dc492652561-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3dc492652561-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3dc492652561-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3dc492652561-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3dc492652561-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3dc492652561-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3dc492652561-3\"><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"No.\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3dc492652561-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df3:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3dc492652561-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3dc492652561-6\"><span class=\"crayon-e\">del </span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"weekday\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3dc492652561-7\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df3:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3dc492652561-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3e0273543629\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf3:\r\n  note weekday  No.\r\n0    C     Mon    1\r\n1    D     Tue    2\r\n2    E     Wed    3\r\n3    F     Thu    4\r\n4    G     Fri    5\r\n5    A     Sat    6\r\n6    B     Sun    7\r\n\r\ndf3:\r\n  note  No.\r\n0    C    1\r\n1    D    2\r\n2    E    3\r\n3    F    4\r\n4    G    5\r\n5    A    6\r\n6    B    7\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e0273543629-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-1\"><span class=\"crayon-v\">df3</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">note </span><span class=\"crayon-e\">weekday  </span><span class=\"crayon-v\">No</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Mon</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Tue</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Wed</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Thu</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-7\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">G</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Fri</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-8\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sat</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-9\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sun</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-11\"><span class=\"crayon-v\">df3</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">note  </span><span class=\"crayon-v\">No</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-13\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-14\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-15\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-16\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-17\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-18\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e0273543629-19\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e0273543629-20\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n\n</div>\n</div>\n<h2 id=\"id-index对象与数据访问\">Index对象与数据访问</h2>\n<p>pandas的Index对象包含了描述轴的元数据信息。当创建Series或者DataFrame的时候，标签的数组或者序列会被转换成Index。可以通过下面的方式获取到DataFrame的列和行的Index对象：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3e3861091693\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\nprint(\"df3.columns\\n{}\\n\".format(df3.columns))\r\nprint(\"df3.index\\n{}\\n\".format(df3.index))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e3861091693-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e3861091693-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e3861091693-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e3861091693-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e3861091693-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e3861091693-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e3861091693-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e3861091693-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df3.columns\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">columns</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e3861091693-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df3.index\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e3861091693-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n</div>\n<p>这两行代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3e6599246018\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf3.columns\r\nIndex(['note', 'No.'], dtype='object')\r\n\r\ndf3.index\r\nRangeIndex(start=0, stop=7, step=1)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e6599246018-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e6599246018-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e6599246018-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e6599246018-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3e6599246018-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3e6599246018-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e6599246018-1\"><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">columns</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e6599246018-2\"><span class=\"crayon-e\">Index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'note'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'No.'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'object'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e6599246018-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e6599246018-4\"><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">index</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3e6599246018-5\"><span class=\"crayon-e\">RangeIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">start</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stop</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">step</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3e6599246018-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</div>\n</div>\n<p>请注意：</p>\n<ul>\n<li>Index并非集合，因此其中可以包含重复的数据</li>\n<li>Index对象的值是不可以改变，因此可以通过它安全的访问数据</li>\n</ul>\n<p>DataFrame提供了下面两个操作符来访问其中的数据：</p>\n<ul>\n<li><code>loc</code>：通过行和列的索引来访问数据</li>\n<li><code>iloc</code>：通过行和列的下标来访问数据</li>\n</ul>\n<p>例如这样：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3ea388027463\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# data_structure.py\r\n\r\nprint(\"Note C, D is:\\n{}\\n\".format(df3.loc[[0, 1], \"note\"]))\r\nprint(\"Note C, D is:\\n{}\\n\".format(df3.iloc[[0, 1], 0]))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ea388027463-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ea388027463-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ea388027463-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ea388027463-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ea388027463-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ea388027463-1\"><span class=\"crayon-p\"># data_structure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ea388027463-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ea388027463-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Note C, D is:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">loc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"note\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ea388027463-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Note C, D is:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iloc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ea388027463-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n</div>\n<p>第一行代码访问了行索引为0和1，列索引为“note”的元素。第二行代码访问了行下标为0和1（对于df3来说，行索引和行下标刚好是一样的，所以这里都是0和1，但它们却是不同的含义），列下标为0的元素。</p>\n<p>这两行代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3ed903411936\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nNote C, D is:\r\n0    C\r\n1    D\r\nName: note, dtype: object\r\n\r\nNote C, D is:\r\n0    C\r\n1    D\r\nName: note, dtype: object\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3ed903411936-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ed903411936-1\"><span class=\"crayon-i\">Note</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ed903411936-2\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ed903411936-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ed903411936-4\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">note</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">object</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ed903411936-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ed903411936-6\"><span class=\"crayon-i\">Note</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ed903411936-7\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ed903411936-8\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3ed903411936-9\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">note</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">object</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3ed903411936-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n\n</div>\n</div>\n<h1 id=\"id-文件操作\">文件操作</h1>\n<p>pandas库提供了一系列的<code>read_</code>函数来读取各种格式的文件，它们如下所示：</p>\n<ul>\n<li>read_csv</li>\n<li>read_table</li>\n<li>read_fwf</li>\n<li>read_clipboard</li>\n<li>read_excel</li>\n<li>read_hdf</li>\n<li>read_html</li>\n<li>read_json</li>\n<li>read_msgpack</li>\n<li>read_pickle</li>\n<li>read_sas</li>\n<li>read_sql</li>\n<li>read_stata</li>\n<li>read_feather</li>\n</ul>\n<h2 id=\"id-读取excel文件\">读取Excel文件</h2>\n<blockquote><p>注：要读取Excel文件，还需要安装另外一个库：<code>xlrd</code></p></blockquote>\n<p>通过pip可以这样完成安装：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3f1652913252\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo pip3 install xlrd\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f1652913252-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f1652913252-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f1652913252-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">pip3 </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">xlrd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f1652913252-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n\n</div>\n</div>\n<p>安装完之后可以通过pip查看这个库的信息：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3f4548928588\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$  pip3 show xlrd\r\nName: xlrd\r\nVersion: 1.1.0\r\nSummary: Library for developers to extract data from Microsoft Excel (tm) spreadsheet files\r\nHome-page: http://www.python-excel.org/\r\nAuthor: John Machin\r\nAuthor-email: sjmachin@lexicon.net\r\nLicense: BSD\r\nLocation: /Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages\r\nRequires: \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f4548928588-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f4548928588-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">pip3 </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">xlrd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f4548928588-2\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xlrd</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f4548928588-3\"><span class=\"crayon-v\">Version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.1.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f4548928588-4\"><span class=\"crayon-v\">Summary</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Library </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">developers </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">extract </span><span class=\"crayon-e\">data </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">Microsoft </span><span class=\"crayon-e\">Excel</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tm</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">spreadsheet </span><span class=\"crayon-e\">files</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f4548928588-5\"><span class=\"crayon-v\">Home</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">page</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//www.python-excel.org/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f4548928588-6\"><span class=\"crayon-v\">Author</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">John </span><span class=\"crayon-e\">Machin</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f4548928588-7\"><span class=\"crayon-v\">Author</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">email</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sjmachin</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">lexicon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">net</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f4548928588-8\"><span class=\"crayon-v\">License</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BSD</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f4548928588-9\"><span class=\"crayon-v\">Location</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Library</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Frameworks</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Python</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">framework</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Versions</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3.6</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">python3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">site</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">packages</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f4548928588-10\"><span class=\"crayon-v\">Requires</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f4548928588-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n\n</div>\n</div>\n<p>接下来我们看一个读取Excel的简单的例子：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d3f7798940300\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# file_operation.py\r\n\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ndf1 = pd.read_excel(\"data/test.xlsx\")\r\nprint(\"df1:\\n{}\\n\".format(df1))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f7798940300-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f7798940300-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f7798940300-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f7798940300-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f7798940300-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f7798940300-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d3f7798940300-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d3f7798940300-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f7798940300-1\"><span class=\"crayon-p\"># file_operation.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f7798940300-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f7798940300-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f7798940300-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f7798940300-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f7798940300-6\"><span class=\"crayon-v\">df1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read_excel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data/test.xlsx\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d3f7798940300-7\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df1:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d3f7798940300-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n</div>\n<p>这个Excel的内容如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d41f646321324\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf1:\r\n   C  Mon\r\n0  D  Tue\r\n1  E  Wed\r\n2  F  Thu\r\n3  G  Fri\r\n4  A  Sat\r\n5  B  Sun\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d41f646321324-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d41f646321324-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d41f646321324-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d41f646321324-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d41f646321324-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d41f646321324-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d41f646321324-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d41f646321324-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d41f646321324-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d41f646321324-1\"><span class=\"crayon-v\">df1</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d41f646321324-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Mon</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d41f646321324-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Tue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d41f646321324-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Wed</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d41f646321324-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Thu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d41f646321324-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">G</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Fri</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d41f646321324-7\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Sat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d41f646321324-8\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Sun</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d41f646321324-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n</div>\n<blockquote><p>注：本文的代码和数据文件可以通过文章开头提到的Github仓库获取。</p></blockquote>\n<h2 id=\"id-读取csv文件\">读取CSV文件</h2>\n<p>下面，我们再来看读取CSV文件的例子。</p>\n<p>第一个CSV文件内容如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d425778776854\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat test1.csv \r\nC,Mon\r\nD,Tue\r\nE,Wed\r\nF,Thu\r\nG,Fri\r\nA,Sat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d425778776854-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d425778776854-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d425778776854-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d425778776854-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d425778776854-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d425778776854-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d425778776854-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d425778776854-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d425778776854-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">test1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">csv</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d425778776854-2\"><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">Mon</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d425778776854-3\"><span class=\"crayon-v\">D</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">Tue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d425778776854-4\"><span class=\"crayon-v\">E</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">Wed</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d425778776854-5\"><span class=\"crayon-v\">F</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">Thu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d425778776854-6\"><span class=\"crayon-v\">G</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">Fri</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d425778776854-7\"><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-i\">Sat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d425778776854-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n</div>\n<p>读取的方式也很简单：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d428658355499\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# file_operation.py\r\n\r\ndf2 = pd.read_csv(\"data/test1.csv\")\r\nprint(\"df2:\\n{}\\n\".format(df2))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d428658355499-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d428658355499-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d428658355499-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d428658355499-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d428658355499-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d428658355499-1\"><span class=\"crayon-p\"># file_operation.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d428658355499-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d428658355499-3\"><span class=\"crayon-v\">df2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read_csv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data/test1.csv\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d428658355499-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df2:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d428658355499-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n</div>\n<p>我们再来看第2个例子，这个文件的内容如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d42b734243052\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ cat test2.csv \r\nC|Mon\r\nD|Tue\r\nE|Wed\r\nF|Thu\r\nG|Fri\r\nA|Sat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d42b734243052-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d42b734243052-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d42b734243052-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d42b734243052-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d42b734243052-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d42b734243052-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d42b734243052-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d42b734243052-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d42b734243052-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cat </span><span class=\"crayon-v\">test2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">csv</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d42b734243052-2\"><span class=\"crayon-v\">C</span><span class=\"crayon-o\">|</span><span class=\"crayon-i\">Mon</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d42b734243052-3\"><span class=\"crayon-v\">D</span><span class=\"crayon-o\">|</span><span class=\"crayon-i\">Tue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d42b734243052-4\"><span class=\"crayon-v\">E</span><span class=\"crayon-o\">|</span><span class=\"crayon-i\">Wed</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d42b734243052-5\"><span class=\"crayon-v\">F</span><span class=\"crayon-o\">|</span><span class=\"crayon-i\">Thu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d42b734243052-6\"><span class=\"crayon-v\">G</span><span class=\"crayon-o\">|</span><span class=\"crayon-i\">Fri</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d42b734243052-7\"><span class=\"crayon-v\">A</span><span class=\"crayon-o\">|</span><span class=\"crayon-i\">Sat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d42b734243052-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n\n</div>\n</div>\n<p>严格的来说，这并不是一个CSV文件了，因为它的数据并不是通过逗号分隔的。在这种情况下，我们可以通过指定分隔符的方式来读取这个文件，像这样：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d42e265834001\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# file_operation.py\r\n\r\ndf3 = pd.read_csv(\"data/test2.csv\", sep=\"|\")\r\nprint(\"df3:\\n{}\\n\".format(df3))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d42e265834001-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d42e265834001-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d42e265834001-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d42e265834001-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d42e265834001-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d42e265834001-1\"><span class=\"crayon-p\"># file_operation.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d42e265834001-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d42e265834001-3\"><span class=\"crayon-v\">df3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read_csv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data/test2.csv\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sep</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"|\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d42e265834001-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df3:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d42e265834001-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n\n</div>\n</div>\n<p>实际上，<code>read_csv</code>支持非常多的参数用来调整读取的参数，如下表所示：</p>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>path</td>\n<td>文件路径</td>\n</tr>\n<tr>\n<td>sep或者delimiter</td>\n<td>字段分隔符</td>\n</tr>\n<tr>\n<td>header</td>\n<td>列名的行数，默认是0（第一行）</td>\n</tr>\n<tr>\n<td>index_col</td>\n<td>列号或名称用作结果中的行索引</td>\n</tr>\n<tr>\n<td>names</td>\n<td>结果的列名称列表</td>\n</tr>\n<tr>\n<td>skiprows</td>\n<td>从起始位置跳过的行数</td>\n</tr>\n<tr>\n<td>na_values</td>\n<td>代替<code>NA</code>的值序列</td>\n</tr>\n<tr>\n<td>comment</td>\n<td>以行结尾分隔注释的字符</td>\n</tr>\n<tr>\n<td>parse_dates</td>\n<td>尝试将数据解析为<code>datetime</code>。默认为<code>False</code></td>\n</tr>\n<tr>\n<td>keep_date_col</td>\n<td>如果将列连接到解析日期，保留连接的列。默认为<code>False</code>。</td>\n</tr>\n<tr>\n<td>converters</td>\n<td>列的转换器</td>\n</tr>\n<tr>\n<td>dayfirst</td>\n<td>当解析可以造成歧义的日期时，以内部形式存储。默认为<code>False</code></td>\n</tr>\n<tr>\n<td>data_parser</td>\n<td>用来解析日期的函数</td>\n</tr>\n<tr>\n<td>nrows</td>\n<td>从文件开始读取的行数</td>\n</tr>\n<tr>\n<td>iterator</td>\n<td>返回一个TextParser对象，用于读取部分内容</td>\n</tr>\n<tr>\n<td>chunksize</td>\n<td>指定读取块的大小</td>\n</tr>\n<tr>\n<td>skip_footer</td>\n<td>文件末尾需要忽略的行数</td>\n</tr>\n<tr>\n<td>verbose</td>\n<td>输出各种解析输出的信息</td>\n</tr>\n<tr>\n<td>encoding</td>\n<td>文件编码</td>\n</tr>\n<tr>\n<td>squeeze</td>\n<td>如果解析的数据只包含一列，则返回一个<code>Series</code></td>\n</tr>\n<tr>\n<td>thousands</td>\n<td>千数量的分隔符</td>\n</tr>\n</tbody>\n</table>\n<p>详细的read_csv函数说明请参见这里：<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_csv.html?highlight=read_csv#pandas.read_csv\">pandas.read_csv</a></p>\n<h1 id=\"id-处理无效值\">处理无效值</h1>\n<p>现实世界并非完美，我们读取到的数据常常会带有一些无效值。如果没有处理好这些无效值，将对程序造成很大的干扰。</p>\n<p>对待无效值，主要有两种处理方法：直接忽略这些无效值；或者将无效值替换成有效值。</p>\n<p>下面我先创建一个包含无效值的数据结构。然后通过<code>pandas.isna</code>函数来确认哪些值是无效的：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d433841762814\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# process_na.py\r\n\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ndf = pd.DataFrame([[1.0, np.nan, 3.0, 4.0],\r\n                  [5.0, np.nan, np.nan, 8.0],\r\n                  [9.0, np.nan, np.nan, 12.0],\r\n                  [13.0, np.nan, 15.0, 16.0]])\r\n\r\nprint(\"df:\\n{}\\n\".format(df));\r\nprint(\"df:\\n{}\\n\".format(pd.isna(df)));****\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d433841762814-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d433841762814-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d433841762814-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d433841762814-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d433841762814-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d433841762814-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d433841762814-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d433841762814-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d433841762814-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d433841762814-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d433841762814-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d433841762814-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d433841762814-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d433841762814-1\"><span class=\"crayon-p\"># process_na.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d433841762814-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d433841762814-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d433841762814-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d433841762814-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d433841762814-6\"><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nan</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d433841762814-7\"><span class=\"crayon-h\">                  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nan</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nan</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8.0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d433841762814-8\"><span class=\"crayon-h\">                  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">9.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nan</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nan</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d433841762814-9\"><span class=\"crayon-h\">                  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">13.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nan</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15.0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d433841762814-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d433841762814-11\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d433841762814-12\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d433841762814-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d437518599915\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf:\r\n      0   1     2     3\r\n0   1.0 NaN   3.0   4.0\r\n1   5.0 NaN   NaN   8.0\r\n2   9.0 NaN   NaN  12.0\r\n3  13.0 NaN  15.0  16.0\r\n\r\ndf:\r\n       0     1      2      3\r\n0  False  True  False  False\r\n1  False  True   True  False\r\n2  False  True   True  False\r\n3  False  True  False  False\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d437518599915-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d437518599915-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d437518599915-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d437518599915-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d437518599915-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d437518599915-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d437518599915-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d437518599915-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d437518599915-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d437518599915-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d437518599915-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d437518599915-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d437518599915-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d437518599915-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d437518599915-1\"><span class=\"crayon-v\">df</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d437518599915-2\"><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d437518599915-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d437518599915-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaN   </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">8.0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d437518599915-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaN   </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">12.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d437518599915-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16.0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d437518599915-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d437518599915-8\"><span class=\"crayon-v\">df</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d437518599915-9\"><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d437518599915-10\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d437518599915-11\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\">   </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d437518599915-12\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\">   </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d437518599915-13\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d437518599915-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n\n</div>\n</div>\n<h2 id=\"id-忽略无效值\">忽略无效值</h2>\n<p>我们可以通过<code>pandas.DataFrame.dropna</code>函数抛弃无效值：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d43b945618984\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# process_na.py\r\n\r\nprint(\"df.dropna():\\n{}\\n\".format(df.dropna()));\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d43b945618984-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d43b945618984-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d43b945618984-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d43b945618984-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d43b945618984-1\"><span class=\"crayon-p\"># process_na.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d43b945618984-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d43b945618984-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df.dropna():\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dropna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d43b945618984-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n</div>\n<blockquote><p>注：<code>dropna</code>默认不会改变原先的数据结构，而是返回了一个新的数据结构。如果想要直接更改数据本身，可以在调用这个函数的时候传递参数 <code>inplace = True</code>。</p></blockquote>\n<p>对于原先的结构，当无效值全部被抛弃之后，将不再是一个有效的DataFrame，因此这行代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d43e717328129\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf.dropna():\r\nEmpty DataFrame\r\nColumns: [0, 1, 2, 3]\r\nIndex: []\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d43e717328129-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d43e717328129-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d43e717328129-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d43e717328129-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d43e717328129-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d43e717328129-1\"><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dropna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d43e717328129-2\"><span class=\"crayon-e\">Empty </span><span class=\"crayon-e\">DataFrame</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d43e717328129-3\"><span class=\"crayon-v\">Columns</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d43e717328129-4\"><span class=\"crayon-v\">Index</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d43e717328129-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n\n</div>\n</div>\n<p>我们也可以选择抛弃整列都是无效值的那一列：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d441468343942\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# process_na.py\r\n\r\nprint(\"df.dropna(axis=1, how='all'):\\n{}\\n\".format(df.dropna(axis=1, how='all')));\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d441468343942-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d441468343942-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d441468343942-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d441468343942-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d441468343942-1\"><span class=\"crayon-p\"># process_na.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d441468343942-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d441468343942-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df.dropna(axis=1, how='all'):\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dropna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">axis</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'all'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d441468343942-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n\n</div>\n</div>\n<blockquote><p>注：<code>axis=1</code>表示列的轴。how可以取值’any’或者’all’，默认是前者。</p></blockquote>\n<p>这行代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d444766918760\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf.dropna(axis=1, how='all'):\r\n      0     2     3\r\n0   1.0   3.0   4.0\r\n1   5.0   NaN   8.0\r\n2   9.0   NaN  12.0\r\n3  13.0  15.0  16.0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d444766918760-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d444766918760-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d444766918760-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d444766918760-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d444766918760-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d444766918760-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d444766918760-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d444766918760-1\"><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dropna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">axis</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'all'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d444766918760-2\"><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d444766918760-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d444766918760-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">8.0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d444766918760-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">12.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d444766918760-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16.0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d444766918760-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n\n</div>\n</div>\n<h2 id=\"id-替换无效值\">替换无效值</h2>\n<p>我们也可以通过<code>fillna</code>函数将无效值替换成为有效值。像这样：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d448347120504\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# process_na.py\r\n\r\nprint(\"df.fillna(1):\\n{}\\n\".format(df.fillna(1)));\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d448347120504-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d448347120504-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d448347120504-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d448347120504-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d448347120504-1\"><span class=\"crayon-p\"># process_na.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d448347120504-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d448347120504-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df.fillna(1):\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fillna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d448347120504-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d44b678142571\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf.fillna(1):\r\n      0    1     2     3\r\n0   1.0  1.0   3.0   4.0\r\n1   5.0  1.0   1.0   8.0\r\n2   9.0  1.0   1.0  12.0\r\n3  13.0  1.0  15.0  16.0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44b678142571-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d44b678142571-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44b678142571-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d44b678142571-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44b678142571-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d44b678142571-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44b678142571-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44b678142571-1\"><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fillna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d44b678142571-2\"><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44b678142571-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d44b678142571-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">8.0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44b678142571-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">12.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d44b678142571-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16.0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44b678142571-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n\n</div>\n</div>\n<p>将无效值全部替换成同样的数据可能意义不大，因此我们可以指定不同的数据来进行填充。为了便于操作，在填充之前，我们可以先通过<code>rename</code>方法修改行和列的名称：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d44e763835388\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# process_na.py\r\n\r\ndf.rename(index={0: 'index1', 1: 'index2', 2: 'index3', 3: 'index4'},\r\n          columns={0: 'col1', 1: 'col2', 2: 'col3', 3: 'col4'},\r\n          inplace=True);\r\ndf.fillna(value={'col2': 2}, inplace=True)\r\ndf.fillna(value={'col3': 7}, inplace=True)\r\nprint(\"df:\\n{}\\n\".format(df));\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44e763835388-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d44e763835388-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44e763835388-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d44e763835388-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44e763835388-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d44e763835388-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44e763835388-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d44e763835388-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d44e763835388-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44e763835388-1\"><span class=\"crayon-p\"># process_na.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d44e763835388-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44e763835388-3\"><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rename</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'index4'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d44e763835388-4\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">columns</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'col1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'col2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'col3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'col4'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44e763835388-5\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">inplace</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d44e763835388-6\"><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fillna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'col2'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inplace</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44e763835388-7\"><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">fillna</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'col3'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inplace</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d44e763835388-8\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d44e763835388-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d451054043261\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf:\r\n        col1  col2  col3  col4\r\nindex1   1.0   2.0   3.0   4.0\r\nindex2   5.0   2.0   7.0   8.0\r\nindex3   9.0   2.0   7.0  12.0\r\nindex4  13.0   2.0  15.0  16.0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d451054043261-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d451054043261-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d451054043261-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d451054043261-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d451054043261-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d451054043261-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d451054043261-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d451054043261-1\"><span class=\"crayon-v\">df</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d451054043261-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">col1  </span><span class=\"crayon-e\">col2  </span><span class=\"crayon-e\">col3  </span><span class=\"crayon-e\">col4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d451054043261-3\"><span class=\"crayon-i\">index1</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d451054043261-4\"><span class=\"crayon-i\">index2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">8.0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d451054043261-5\"><span class=\"crayon-i\">index3</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">9.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">12.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d451054043261-6\"><span class=\"crayon-i\">index4</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">15.0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16.0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d451054043261-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n</div>\n<h1 id=\"id-处理字符串\">处理字符串</h1>\n<p>数据中常常牵涉到字符串的处理，接下来我们就看看pandas对于字符串操作。</p>\n<p><code>Series</code>的<code>str</code>字段包含了一系列的函数用来处理字符串。并且，这些函数会自动处理无效值。</p>\n<p>下面是一些实例，在第一组数据中，我们故意设置了一些包含空格字符串：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d454261585164\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# process_string.py\r\n\r\nimport pandas as pd\r\n\r\ns1 = pd.Series([' 1', '2 ', ' 3 ', '4', '5']);\r\nprint(\"s1.str.rstrip():\\n{}\\n\".format(s1.str.lstrip()))\r\nprint(\"s1.str.strip():\\n{}\\n\".format(s1.str.strip()))\r\nprint(\"s1.str.isdigit():\\n{}\\n\".format(s1.str.isdigit()))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d454261585164-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d454261585164-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d454261585164-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d454261585164-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d454261585164-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d454261585164-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d454261585164-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d454261585164-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d454261585164-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d454261585164-1\"><span class=\"crayon-p\"># process_string.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d454261585164-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d454261585164-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d454261585164-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d454261585164-5\"><span class=\"crayon-v\">s1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">' 1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2 '</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">' 3 '</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'5'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d454261585164-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"s1.str.rstrip():\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lstrip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d454261585164-7\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"s1.str.strip():\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d454261585164-8\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"s1.str.isdigit():\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isdigit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d454261585164-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n\n</div>\n</div>\n<p>在这个实例中我们看到了对于字符串<code>strip</code>的处理以及判断字符串本身是否是数字，这段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d458386492887\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ns1.str.rstrip():\r\n0     1\r\n1    2 \r\n2    3 \r\n3     4\r\n4     5\r\ndtype: object\r\n\r\ns1.str.strip():\r\n0    1\r\n1    2\r\n2    3\r\n3    4\r\n4    5\r\ndtype: object\r\n\r\ns1.str.isdigit():\r\n0    False\r\n1    False\r\n2    False\r\n3     True\r\n4     True\r\ndtype: bool\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d458386492887-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d458386492887-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-1\"><span class=\"crayon-v\">s1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rstrip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-2\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-4\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-5\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-6\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-7\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">object</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-9\"><span class=\"crayon-v\">s1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-10\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-11\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-12\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-13\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-14\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-15\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">object</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-16\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-17\"><span class=\"crayon-v\">s1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isdigit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-18\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-19\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-20\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-21\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">     </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-22\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">     </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d458386492887-23\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">bool</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d458386492887-24\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n\n</div>\n</div>\n<p>下面是另外一些示例，展示了对于字符串大写，小写以及字符串长度的处理：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d45b412763919\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# process_string.py\r\n\r\ns2 = pd.Series(['Stairway to Heaven', 'Eruption', 'Freebird',\r\n                    'Comfortably Numb', 'All Along the Watchtower'])\r\nprint(\"s2.str.lower():\\n{}\\n\".format(s2.str.lower()))\r\nprint(\"s2.str.upper():\\n{}\\n\".format(s2.str.upper()))\r\nprint(\"s2.str.len():\\n{}\\n\".format(s2.str.len()))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45b412763919-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45b412763919-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45b412763919-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45b412763919-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45b412763919-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45b412763919-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45b412763919-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45b412763919-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45b412763919-1\"><span class=\"crayon-p\"># process_string.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45b412763919-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45b412763919-3\"><span class=\"crayon-v\">s2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Stairway to Heaven'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Eruption'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Freebird'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45b412763919-4\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'Comfortably Numb'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'All Along the Watchtower'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45b412763919-5\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"s2.str.lower():\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lower</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45b412763919-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"s2.str.upper():\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">upper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45b412763919-7\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"s2.str.len():\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45b412763919-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n\n</div>\n</div>\n<p>该段代码输出如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd4c14d45e750756664\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ns2.str.lower():\r\n0          stairway to heaven\r\n1                    eruption\r\n2                    freebird\r\n3            comfortably numb\r\n4    all along the watchtower\r\ndtype: object\r\n\r\ns2.str.upper():\r\n0          STAIRWAY TO HEAVEN\r\n1                    ERUPTION\r\n2                    FREEBIRD\r\n3            COMFORTABLY NUMB\r\n4    ALL ALONG THE WATCHTOWER\r\ndtype: object\r\n\r\ns2.str.len():\r\n0    18\r\n1     8\r\n2     8\r\n3    16\r\n4    24\r\ndtype: int64\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd4c14d45e750756664-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd4c14d45e750756664-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-1\"><span class=\"crayon-v\">s2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lower</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-2\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">stairway </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">heaven</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">                    </span><span class=\"crayon-i\">eruption</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-4\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">                    </span><span class=\"crayon-i\">freebird</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-5\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">            </span><span class=\"crayon-e\">comfortably </span><span class=\"crayon-i\">numb</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-6\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">all </span><span class=\"crayon-e\">along </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">watchtower</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-7\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">object</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-9\"><span class=\"crayon-v\">s2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">upper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-10\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">          </span><span class=\"crayon-e\">STAIRWAY </span><span class=\"crayon-st\">TO</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">HEAVEN</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-11\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">                    </span><span class=\"crayon-i\">ERUPTION</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-12\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">                    </span><span class=\"crayon-i\">FREEBIRD</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-13\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">            </span><span class=\"crayon-e\">COMFORTABLY </span><span class=\"crayon-i\">NUMB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-14\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">ALL </span><span class=\"crayon-e\">ALONG </span><span class=\"crayon-e\">THE </span><span class=\"crayon-e\">WATCHTOWER</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-15\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">object</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-16\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-17\"><span class=\"crayon-v\">s2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">str</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-18\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">18</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-19\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-20\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-21\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">16</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-22\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">24</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd4c14d45e750756664-23\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">int64</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd4c14d45e750756664-24\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n\n</div>\n</div>\n<h1 id=\"id-结束语\">结束语</h1>\n<p>本文是pandas的入门教程，因此我们只介绍了最基本的操作。对于</p>\n<ul>\n<li>MultiIndex/Advanced Indexing</li>\n<li>Merge, join, concatenate</li>\n<li>Computational tools</li>\n</ul>\n<p>之类的高级功能，以后有机会我们再来一起学习。</p>\n<p>读者也可以根据下面的链接获取更多的知识。</p>\n<h1 id=\"id-参考资料与推荐读物\">参考资料与推荐读物</h1>\n<ul>\n<li><a href=\"https://pandas.pydata.org\">pandas官方网站</a></li>\n<li><a href=\"https://www.amazon.com/Python-Data-Analysis-Wrangling-IPython/dp/1491957662/\">Python for Data Analysis</a></li>\n<li><a href=\"https://www.dataquest.io/blog/pandas-python-tutorial/\">Pandas Tutorial: Data analysis with Python: Part 1</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89084\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89084votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89084\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d315412814aef42630d4b72940c9aa65ae3c4229.jpg"}
{"url_object_id": "06d8d3d2a9ed1381ab62b8d630b3d037", "title": "手把手教你写网络爬虫（5）：PhantomJS实战", "url": "http://python.jobbole.com/89123/", "create_date": "2018/05/06", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "系列教程", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8901370.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p>大家好！从今天开始，我要与大家一起打造一个属于我们自己的分布式爬虫平台，同时也会对涉及到的技术进行详细介绍。大家如果有什么好的想法请多留言，多提意见，一起来完善我们的爬虫平台。在正式介绍平台之前，先用一些篇幅对基础篇做一点补充。模拟滚动</p>\n<p>这次的目标是爬一个众筹网站的所有项目，项目列表页如下：<a href=\"https://www.kaistart.com/project/more.html\">https://www.kaistart.com/project/more.html</a>。打开后进行分析，页面显示出10个项目：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6d8d96b4d5f4a09d16f2f7774a54551b.jpg\" alt=\"\"></p>\n<p>如果想看到更多项目，并不能像网易云音乐那样点“下一页”翻页，而是需要向下拉滚动条或者向下滚动鼠标滚轮来触发异步请求。爬虫该如何应对这种情况呢？我们可以使用selenium的api执行js代码将屏幕内容滚动到指定位置。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/cb1982e04d7e377f2cb46500b80c1cc9.jpg\" alt=\"\"></p>\n<p>下面这段代码会一直向下滚动项目页，一直到滚不动为止：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de688a130b986604366\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 一直滚动到最底部\r\njs1 = 'return document.body.scrollHeight'\r\njs2 = 'window.scrollTo(0, document.body.scrollHeight)'\r\nold_scroll_height = 0\r\nwhile browser.execute_script(js1) &gt;= old_scroll_height:\r\n    old_scroll_height = browser.execute_script(js1)\r\n    browser.execute_script(js2) \r\n    time.sleep(1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de688a130b986604366-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a130b986604366-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a130b986604366-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a130b986604366-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a130b986604366-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a130b986604366-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a130b986604366-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a130b986604366-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de688a130b986604366-1\"><span class=\"crayon-p\"># 一直滚动到最底部</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a130b986604366-2\"><span class=\"crayon-v\">js1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'return document.body.scrollHeight'</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a130b986604366-3\"><span class=\"crayon-v\">js2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'window.scrollTo(0, document.body.scrollHeight)'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a130b986604366-4\"><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a130b986604366-5\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a130b986604366-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a130b986604366-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a130b986604366-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n\n</div>\n<p>scrollTo() 方法可把内容滚动到指定的坐标:</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td valign=\"top\" width=\"132\">参数</td>\n<td valign=\"top\" width=\"421\">描述</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"132\">xpos</td>\n<td valign=\"top\" width=\"421\">必需。要在窗口文档显示区左上角显示的文档的 x 坐标。</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"132\">ypos</td>\n<td valign=\"top\" width=\"421\">必需。要在窗口文档显示区左上角显示的文档的 y 坐标。</td>\n</tr>\n</tbody>\n</table>\n<p>这里用到了scrollHeight，它和ClientHeight还有OffsetHeight有什么区别呢？</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/790ed6fb77c1c3c6ec9ae5dff14b33eb.jpg\" alt=\"\"></p>\n<p><strong>offsetHeight</strong>： 包括内容可见部分的高度，border，可见的padding，水平方向的scrollbar（如果存在）；不包括margin。</p>\n<p><strong>clientHeight</strong>： 包括内容可见部分的高度，可见的padding；不包括border，水平方向的scrollbar，margin。</p>\n<p><strong>scrollHeight</strong>： 包括内容的高度（可见与不可见），padding（可见与不可见）；不包括border，margin。</p>\n<h3>Chrome</h3>\n<p>代码写好了，接下来就用selenium+phantomJs大法实验一下！滚到底后把项目列表提取出来看一下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de688a1315121368699\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrowser = webdriver.PhantomJs()\r\nurl = 'https://www.kaistart.com/project/more.html'\r\ntry:\r\n    browser.get(url)\r\n    wait = ui.WebDriverWait(browser, 20)\r\n    wait.until(lambda dr: dr.find_element_by_class_name('project-detail').is_displayed())\r\n\r\n    # 一直滚动到最底部\r\n    js1 = 'return document.body.scrollHeight'\r\n    js2 = 'window.scrollTo(0, document.body.scrollHeight)'\r\n    old_scroll_height = 0\r\n    while browser.execute_script(js1) &gt;= old_scroll_height:\r\n        old_scroll_height = browser.execute_script(js1)\r\n        browser.execute_script(js2) \r\n        time.sleep(1)\r\n    sel = Selector(text=browser.page_source)\r\n    proj_list = sel.xpath('//li[@class=\"project-li\"]')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1315121368699-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1315121368699-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1315121368699-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1315121368699-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1315121368699-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1315121368699-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1315121368699-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1315121368699-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1315121368699-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-1\"><span class=\"crayon-v\">browser</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PhantomJs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1315121368699-2\"><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://www.kaistart.com/project/more.html'</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-3\"><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1315121368699-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">wait</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ui</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">WebDriverWait</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1315121368699-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">wait</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">until</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">lambda </span><span class=\"crayon-v\">dr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dr</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_class_name</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'project-detail'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">is_displayed</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1315121368699-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 一直滚动到最底部</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">js1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'return document.body.scrollHeight'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1315121368699-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">js2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'window.scrollTo(0, document.body.scrollHeight)'</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1315121368699-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">old_scroll_height</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1315121368699-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">execute_script</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">js2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1315121368699-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sel</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">page_source</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1315121368699-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">proj_list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sel</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//li[@class=\"project-li\"]'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n\n</div>\n<p>程序运行结束后，显示proje_list里面只有25个元素，而我们自己手动滚的话却有100多个，明显有bug。想定位这个问题很简单，截图即可，看看为什么停在第25个项目。对，phantomJs虽然没有图形界面，但是可以截图。</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de688a131a507974021\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrowser.save_screenshot(debug.png')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de688a131a507974021-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de688a131a507974021-1\"><span class=\"crayon-v\">browser</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">save_screenshot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">debug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">png</span>'<span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n<p>这样就会把图片保存在项目目录，打开看看：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/7e4908162f31303c3998cbb4690c73a8.png\" alt=\"\"></p>\n<p>发现项目页只能显示一行，这说明网页不兼容phantomJs，这倒不是什么新鲜事，换一个浏览器试试呗。第一期介绍过，selenium是支持所有主流浏览器的。比如换成Chrome，只需改一行代码：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de688a131d734858594\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrowser = webdriver.Chrome()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de688a131d734858594-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de688a131d734858594-1\"><span class=\"crayon-v\">browser</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Chrome</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n<p>再次运行程序，不出所料，Chrome浏览器弹出来，不仅能够正确显示页面，还一直在滚动：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/08916942069b29e91ae20ca8bdcbcecc.jpg\" alt=\"\"></p>\n<p>项目全都刷出来了，想爬什么就爬吧！什么？你问我在Linux服务器上怎么爬？纯命令行的那种吗？</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a7087ea55409fa050fca3edc9cd2f120.jpg\" alt=\"\"></p>\n<h3>虚拟X Server</h3>\n<p>PhantomJs是无界面浏览器，可以在Linux服务器上正常运行，但Chrome会在调用GUI接口时报错。既然Linux服务器没有图形接口服务，也就是X Server，我们就要虚拟出来一个，才能让Chrome正常运行。于是找到了Xvfb（X virtual frame buffer）,它可以用来作为完整X服务程序的替代。Xvfb有一个Python的封装叫PyVirtualDisplay，我们就用它来解决这个问题。</p>\n<p>安装：</p>\n<p>pip install pyvirtualdisplay</p>\n<p>用法：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de688a1321015033336\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom selenium import webdriver\r\nfrom pyvirtualdisplay import Display\r\n\r\ndisplay = Display(visible=0, size=(800, 600))\r\ndisplay.start()\r\ndriver = webdriver.Chrome()\r\ndriver.get(\"http://www.baidu.com\")\r\nprint (driver.page_source.encode('utf-8'))\r\ndriver.quit()\r\ndisplay.stop()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1321015033336-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1321015033336-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1321015033336-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1321015033336-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1321015033336-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1321015033336-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1321015033336-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1321015033336-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0de688a1321015033336-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de688a1321015033336-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de688a1321015033336-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">selenium </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">webdriver</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1321015033336-2\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">pyvirtualdisplay </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">Display</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1321015033336-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1321015033336-4\"><span class=\"crayon-v\">display</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Display</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">visible</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">800</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">600</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1321015033336-5\"><span class=\"crayon-v\">display</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">start</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1321015033336-6\"><span class=\"crayon-v\">driver</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Chrome</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1321015033336-7\"><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"http://www.baidu.com\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1321015033336-8\"><span class=\"crayon-e\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">page_source</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">encode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de688a1321015033336-9\"><span class=\"crayon-v\">driver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">quit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de688a1321015033336-10\"><span class=\"crayon-v\">display</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n\n</div>\n<p>运行程序后打印出了baidu的页面内容，现在可以完美运行Chrome了。需要补充的是，在Linux上运行Chrome需要额外安装一个ChromeDriver，比较简单，就不详细介绍了。</p>\n<h3>分布式系统</h3>\n<p>既然我们要打造自己的分布式爬虫平台，就要先知道什么是分布式系统，百度百科是这样定义的：</p>\n<p><em>分布式系统（distributed system）是建立在网络之上的软件系统。正是因为软件的特性，所以分布式系统具有高度的内聚性和透明性。因此，网络和分布式系统之间的区别更多的在于高层软件（特别是操作系统），而不是硬件。内聚性是指每一个数据库分布节点高度自治，有本地的数据库管理系统。透明性是指每一个数据库分布节点对用户的应用来说都是透明的，看不出是本地还是远程。在分布式数据库系统中，用户感觉不到数据是分布的，即用户不须知道关系是否分割、有无副本、数据存于哪个站点以及事务在哪个站点上执行等。</em></p>\n<p>这个定义不太好理解，看看书上怎么说。《分布式系统概念与设计》一书中对分布式系统做了如下定义：</p>\n<p><em>分布式系统是一个硬件或软件组件分布在不同的网络计算机上，彼此之间仅仅通过消息传递进行通信和协调的系统。</em></p>\n<p>《分布式系统原理和范型》一书中是这样定义分布式系统的：</p>\n<p><em>分布式系统是若干独立计算机的集合，这些计算机对于用户来说就像是单个相关系统。</em></p>\n<p>简单来说就是一群独立计算机集合共同对外提供服务，但是对于系统的用户来说，就像是一台计算机在提供服务一样。分布式意味着可以采用更多的普通计算机（相对于昂贵的大型机）组成分布式集群对外提供服务。计算机越多，CPU、内存、存储资源等也就越多，能够处理的并发访问量也就越大。</p>\n<p>从分布式系统的概念中我们知道，各个主机之间通信和协调主要通过网络进行，所以，分布式系统中的计算机在空间上几乎没有任何限制，这些计算机可能被放在不同的机柜上，也可能被部署在不同的机房中，还可能在不同的城市中，对于大型的网站甚至可能分布在不同的国家。但是，无论空间上如何分布，一个标准的分布式系统应该具有以下几个主要特征：</p>\n<p><strong>透明性</strong></p>\n<p>系统资源被所有计算机共享。每台计算机的用户不仅可以使用本机的资源，还可以使用本分布式系统中其他计算机的资源。</p>\n<p><strong>同一性</strong></p>\n<p>系统中的若干台计算机可以互相协作来完成一个共同的任务，或者说一个程序可以分布在几台计算机上并行地运行。</p>\n<p><strong>通信性</strong></p>\n<p>系统中的计算机都可以通过通信来交换信息。</p>\n<h3>下一步</h3>\n<p>今天先了解下基本概念，热热身。整个系统的架构及流程留到下次一起奉上。下期再见！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89123\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89123votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89123\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d21a83f6d43617f04d77157889bd773c35ec673d.jpg"}
{"url_object_id": "e731f35dd6563f9f91fe91e1307c16cc", "title": "手把手教你写网络爬虫（3）：开源爬虫框架对比", "url": "http://python.jobbole.com/89095/", "create_date": "2018/04/28", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "praise_nums": "1", "comment_nums": "2", "fav_nums": "  收藏", "tags": "系列教程", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8861422.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/4c3c71d7902e6f9d6923bf075ae598c4.png\" alt=\"\"></p>\n<h3>介绍</h3>\n<p>大家好！我们从今天开始学习开源爬虫框架Scrapy，如果你看过《手把手》系列的前两篇，那么今天的内容就非常容易理解了。细心的读者也许会有疑问，为什么不学出身名门的Apache顶级项目Nutch，或者人气飙升的国内大神开发的Pyspider等框架呢？原因很简单，我们来看一下主流爬虫框架在GitHub上的活跃度：</p>\n<div>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td valign=\"top\" width=\"108\"><strong>Project</strong></td>\n<td valign=\"top\" width=\"82\"><strong>Language</strong></td>\n<td valign=\"top\" width=\"55\"><strong>Star</strong></td>\n<td valign=\"top\" width=\"58\"><strong>Watch</strong></td>\n<td valign=\"top\" width=\"55\"><strong>Fork</strong></td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"108\"><strong>Nutch</strong></td>\n<td valign=\"top\" width=\"82\">Java</td>\n<td valign=\"top\" width=\"55\">1111</td>\n<td valign=\"top\" width=\"58\">195</td>\n<td valign=\"top\" width=\"55\">808</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"108\"><strong>webmagic</strong></td>\n<td valign=\"top\" width=\"82\">Java</td>\n<td valign=\"top\" width=\"55\">4216</td>\n<td valign=\"top\" width=\"58\">618</td>\n<td valign=\"top\" width=\"55\">2306</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"108\"><strong>WebCollector</strong></td>\n<td valign=\"top\" width=\"82\">Java</td>\n<td valign=\"top\" width=\"55\">1222</td>\n<td valign=\"top\" width=\"58\">255</td>\n<td valign=\"top\" width=\"55\">958</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"108\"><strong>heritrix3</strong></td>\n<td valign=\"top\" width=\"82\">Java</td>\n<td valign=\"top\" width=\"55\">773</td>\n<td valign=\"top\" width=\"58\">141</td>\n<td valign=\"top\" width=\"55\">428</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"108\"><strong>crawler4j</strong></td>\n<td valign=\"top\" width=\"82\">Java</td>\n<td valign=\"top\" width=\"55\">1831</td>\n<td valign=\"top\" width=\"58\">242</td>\n<td valign=\"top\" width=\"55\">1136</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"108\"><strong>Pyspider</strong></td>\n<td valign=\"top\" width=\"82\">Python</td>\n<td valign=\"top\" width=\"55\">8581</td>\n<td valign=\"top\" width=\"58\">687</td>\n<td valign=\"top\" width=\"55\">2273</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"108\"><strong>Scrapy</strong></td>\n<td valign=\"top\" width=\"82\">Python</td>\n<td valign=\"top\" width=\"55\">19642</td>\n<td valign=\"top\" width=\"58\">1405</td>\n<td valign=\"top\" width=\"55\">5261</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>看到了吗？星星数排名第一的Scrapy比其他所有的加起来都要多，我仿佛听到他这样说：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/1562b633803a70363688259a2330f13e.jpg\" alt=\"\"></p>\n<p>好了，以上纯属玩笑，切莫认真，不然要引发口水战了！这些框架都很优秀，都有很多用户，活跃度相对低的并不说明技术低，活跃度相对高的也许只是多满足了一些用户需求。接下来我们还是要理性的对主流爬虫框架做一个对比分析。</p>\n<h3>开源框架大PK</h3>\n<p>各路英雄已经到齐了， PK现在开始！</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/7fe322f771e265e4260f1420e4b8be6b.jpg\" alt=\"\"></p>\n<h4><strong>Nutch</strong></h4>\n<p>介绍：</p>\n<p>Nutch是一个开源的Java实现的搜索引擎。它提供了我们运行自己的搜索引擎所需的全部工具，包括全文搜索和网络爬虫。</p>\n<p>尽管搜索是上网的基本要求，但是现有的搜索引擎的数目却在下降。并且这很有可能进一步演变成为一个公司垄断了几乎所有的网页搜索为其谋取商业利益。这显然不利于广大Internet用户。</p>\n<p>Nutch为我们提供了这样一个不同的选择。相对于那些商用的搜索引擎，Nutch作为开放源代码的搜索引擎将会更加透明，从而更值得大家信赖。现在所有主要的搜索引擎都采用私有的排序算法, 而不会解释为什么一个网页会排在一个特定的位置。除此之外, 有的搜索引擎依照网站所付的费用, 而不是根据它们本身的价值进行排序。与它们不同，Nutch没有什么需要隐瞒，也没有动机去扭曲搜索的结果。Nutch将尽自己最大的努力为用户提供最好的搜索结果。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/d8c2c4d72bff50443f1d69193646f630.png\" alt=\"\"></p>\n<p>优点：</p>\n<p>Nutch支持分布式抓取，并有Hadoop支持，可以进行多机分布抓取，存储和索引。另外很吸引人的一点在于，它提供了一种插件框架，使得其对各种网页内容的解析、各种数据的采集、查询、集群、过滤等功能能够方便的进行扩展。正是由于有此框架，使得 Nutch 的插件开发非常容易，第三方的插件也层出不穷，极大的增强了 Nutch 的功能和声誉。</p>\n<p>缺点：</p>\n<p>对于大多数用户来说，一般是想做一个精确数据爬取的爬虫，就像第一篇里爬歌单那个“主题爬虫”。而第二篇介绍的“通用爬虫”适合做搜索引擎，这种需求就比较少。如果以此为标准，那么为搜索引擎而生的Nutch就有着天生缺点。Nutch的架构里大部分为搜索引擎而设计的，对精确爬取没有特别的考虑。也就是说，用Nutch做主题爬虫，会浪费很多的时间在不必要的计算上。而且如果你试图通过对Nutch进行二次开发来扩展其定制能力，基本上就要破坏Nutch的框架，反而不如自己写了。</p>\n<h4><strong>Pyspider</strong></h4>\n<p>介绍：</p>\n<p>Pyspider是一个国人编写的强大的网络爬虫系统并带有强大的WebUI。采用Python语言编写，分布式架构，支持多种数据库后端，强大的WebUI支持脚本编辑器，任务监视器，项目管理器以及结果查看器。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/0abc1e3f49330547e343ab52a2c4a3ed.png\" alt=\"\"></p>\n<p>Pyspider的主要功能包括，抓取、更新调度多站点的特定的页面；需要对页面进行结构化信息提取；灵活可扩展，稳定可监控。满足了绝大多数Python爬虫的需求 —— 定向抓取，结构化化解析。但是面对结构迥异的各种网站，单一的抓取模式并不一定能满足，灵活的抓取控制是必须的。为了达到这个目的，单纯的配置文件往往不够灵活，于是，通过脚本去控制抓取成为了最后的选择。而去重调度，队列，抓取，异常处理，监控等功能作为框架，提供给抓取脚本，并保证灵活性。最后加上web的编辑调试环境，以及web任务监控，即成为了最终的框架。</p>\n<p>优点：</p>\n<ol>\n<li>支持分布式部署。</li>\n<li>完全可视化，对用户非常友好：WEB 界面编写调试脚本，起停脚本，监控执行状态，查看活动历史，获取结果产出。</li>\n<li>简单，五分钟就能上手。脚本规则简单，开发效率高。</li>\n<li>支持抓取JavaScript的页面。</li>\n</ol>\n<p>总之，Pyspider非常强大，强大到更像一个产品而不是一个框架。</p>\n<p>缺点：</p>\n<ol>\n<li>URL去重使用数据库而不是布隆过滤器，亿级存储的db io将导致效率急剧降低。</li>\n<li>使用上的人性化牺牲了灵活度，定制化能力降低。</li>\n</ol>\n<h4><strong>Scrapy</strong></h4>\n<p>介绍：</p>\n<p>Scrapy是一个为了爬取网站数据，提取结构性数据而编写的应用框架。 可以应用在包括数据挖掘，信息处理或存储历史数据等一系列的程序中。Scrapy 使用 Twisted这个异步网络库来处理网络通讯，架构清晰，并且包含了各种中间件接口，可以灵活的完成各种需求。Scratch，是抓取的意思，这个Python的爬虫框架叫Scrapy，大概也是这个意思吧。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/0673775990cb8f1c83faa90830502c4c.png\" alt=\"\"></p>\n<p>优点：</p>\n<ol>\n<li>极其灵活的定制化爬取。</li>\n<li>社区人数多、文档完善。</li>\n<li>URL去重采用布隆过滤器方案。</li>\n<li>可以处理不完整的HTML，Scrapy已经提供了selectors（一个在lxml的基础上提供了更高级的接口），可以高效地处理不完整的HTML代码。</li>\n</ol>\n<p>缺点：</p>\n<ol>\n<li>不支持分布式部署。</li>\n<li>原生不支持抓取JavaScript的页面。</li>\n<li>全命令行操作，对用户不友好，需要一定学习周期。</li>\n</ol>\n<h3>结论</h3>\n<p>篇幅有限，就先选择这三个最有代表性的框架进行PK。他们都有远超别人的优点，比如：Nutch天生的搜索引擎解决方案、Pyspider产品级的WebUI、Scrapy最灵活的定制化爬取。也都各自致命的缺点，比如Scrapy不支持分布式部署，Pyspider不够灵活，Nutch和搜索绑定。究竟该怎么选择呢？</p>\n<p>我们的目标是做纯粹的爬虫，不是搜索引擎，所以先把Nutch排除掉，剩下人性化的Pyspider和高可定制的Scrapy。Scrapy的灵活性几乎能够让我们完成任何苛刻的抓取需求，它的“难用”也让我们不知不觉的研究爬虫技术。现在还不是享受Pyspider的时候，目前的当务之急是打好基础，应该学习最接近爬虫本质的框架，了解它的原理，所以把Pyspider也排除掉。</p>\n<p>最终，理性的从个人的需求角度对比，还是Scrapy胜出！其实Scrapy还有更多优点：</p>\n<ol>\n<li>HTML, XML源数据选择及提取的原生支持。</li>\n<li>提供了一系列在spider之间共享的可复用的过滤器(即 Item Loaders)，对智能处理爬取数据提供了内置支持。</li>\n<li>通过 feed导出 提供了多格式(JSON、CSV、XML)，多存储后端(FTP、S3、本地文件系统)的内置支持。</li>\n<li>提供了media pipeline，可以 自动下载 爬取到的数据中的图片(或者其他资源)。</li>\n<li>高扩展性。您可以通过使用 signals ，设计好的API(中间件, extensions, pipelines)来定制实现您的功能。</li>\n<li>内置的中间件及扩展为下列功能提供了支持:\n<ol>\n<li>cookies and session 处理</li>\n<li>HTTP 压缩</li>\n<li>HTTP 认证</li>\n<li>HTTP 缓存</li>\n<li>user-agent模拟</li>\n<li>robots.txt</li>\n<li>爬取深度限制</li>\n</ol>\n</li>\n<li>针对非英语语系中不标准或者错误的编码声明, 提供了自动检测以及健壮的编码支持。</li>\n<li>支持根据模板生成爬虫。在加速爬虫创建的同时，保持在大型项目中的代码更为一致。</li>\n<li>针对多爬虫下性能评估、失败检测，提供了可扩展的 状态收集工具 。</li>\n<li>提供 交互式shell终端 , 为您测试XPath表达式，编写和调试爬虫提供了极大的方便。</li>\n<li>提供 System service, 简化在生产环境的部署及运行。</li>\n<li>内置 Telnet终端 ，通过在Scrapy进程中钩入Python终端，使您可以查看并且调试爬虫。</li>\n<li>Logging 为您在爬取过程中捕捉错误提供了方便。</li>\n<li>支持 Sitemaps 爬取。</li>\n<li>具有缓存的DNS解析器。</li>\n</ol>\n<h3>下一步</h3>\n<p>吹了半天的Scrapy，时间也到了，如果大家能够喜欢上它，学习的效率一定会成倍提升！下次我会为大家带来满满的干货，并完成更具挑战性的爬虫任务，我们下期再见！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89095\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89095votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89095\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/af4571ab68e7f3066d3aadf08de9928f8d6c901b.jpg"}
{"url_object_id": "da80fb712b60f4406bdce4907bef760a", "title": "用 Plumbum 开发 Python 命令行工具", "url": "http://python.jobbole.com/89132/", "create_date": "2018/05/10", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/bcc8c14d726eefb31b713beff135cf4b.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "实践项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://plumbum.readthedocs.io/en/latest/cli.html\">Tomer Filiba</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9604-1.html\">qhh0205</a>   </div><div id=\"article_content\">\n<blockquote><p><strong>摘要</strong>：本文翻译自 Python <a href=\"https://plumbum.readthedocs.io/en/latest/\">Plumbum</a> 开源库的官方文档 <a href=\"https://plumbum.readthedocs.io/en/latest/cli.html\">Plumbum CLI</a> 部分，主要介绍如何使用 <a href=\"https://plumbum.readthedocs.io/en/latest/cli.html\">Plumbum CLI</a> 工具包来开发 Python 命令行应用程序，这是一个非常 Pythonic、容易使用、功能强大的工具包，非常值得广大 Python 程序员掌握并使用。</p></blockquote>\n<p>轻松执行程序的另一方面是轻松编写 CLI 程序。Python 脚本一般使用 <code>optparse</code> 或者最新的 <code>argparse</code> 及其衍生品来开发命令行工具，但是所有这些表现力有限，而且非常不直观（甚至不够 Pythonic）。Plumbum 的 CLI 工具包提供了一个程序化的方法来构建命令行应用程序，不需要创建一个解析器对象，然后填充一系列“选项”，该 CLI 工具包使用内省机制将这些原语转义成 Pythonic 结构。</p>\n<p>总体来看，Plumbum CLI 应用程序是一个继承自 <code>plumbum.cli.Application</code> 的类。这些类定义了一个 <code>main()</code> 方法，并且可选地公开出方法和属性来作为命令行的选项。这些选项可能需要参数，而任何剩余的位置参数会根据 <code>main</code> 函数的声明来将其赋予 <code>main</code> 方法。一个简单的 CLI 应用程序看起来像如下这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891cf230870213\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom plumbum import cli\r\nclass MyApp(cli.Application):\r\n    verbose = cli.Flag([\"v\", \"verbose\"], help = \"If given, I will be very talkative\")\r\n    def main(self, filename):\r\n        print(\"I will now read {0}\".format(filename))\r\n        if self.verbose:\r\n            print(\"Yadda \" * 200)\r\nif __name__ == \"__main__\":\r\n    MyApp.run()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891cf230870213-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891cf230870213-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891cf230870213-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891cf230870213-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891cf230870213-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891cf230870213-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891cf230870213-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891cf230870213-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891cf230870213-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891cf230870213-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plumbum </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cli</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891cf230870213-2\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891cf230870213-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">verbose</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Flag</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"v\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"verbose\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"If given, I will be very talkative\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891cf230870213-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891cf230870213-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"I will now read {0}\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891cf230870213-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">verbose</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891cf230870213-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Yadda \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891cf230870213-8\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891cf230870213-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">MyApp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>你可以运行该程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891e1551745492\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python example.py foo\r\nI will now read foo\r\n$ python example.py --help\r\nexample.py v1.0\r\nUsage: example.py [SWITCHES] filename\r\nMeta-switches:\r\n    -h, --help                 Prints this help message and quits\r\n    --version                  Prints the program's version and quits\r\nSwitches:\r\n    -v, --verbose              If given, I will be very talkative</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891e1551745492-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891e1551745492-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891e1551745492-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891e1551745492-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891e1551745492-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891e1551745492-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891e1551745492-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891e1551745492-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891e1551745492-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891e1551745492-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891e1551745492-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python </span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py </span><span class=\"crayon-i\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891e1551745492-2\"><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">now </span><span class=\"crayon-e\">read </span><span class=\"crayon-i\">foo</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891e1551745492-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python </span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891e1551745492-4\"><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py </span><span class=\"crayon-v\">v1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891e1551745492-5\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">filename</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891e1551745492-6\"><span class=\"crayon-v\">Meta</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891e1551745492-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-h\">                 </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">this </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891e1551745492-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">version                  </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">program</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">quits</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891e1551745492-9\"><span class=\"crayon-v\">Switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891e1551745492-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">verbose              </span><span class=\"crayon-st\">If</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">given</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-e\">very </span><span class=\"crayon-v\">talkative</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>到现在为止，你只看到了非常基本的使用。我们现在开始探索该库。</p>\n<p><em>新版本 1.6.1：</em> 你可以直接运行应用程序 <code>MyApp()</code>，不需要参数，也不需要调用 <code>.main()</code>。</p>\n<h1 id=\"toc_1\">应用程序</h1>\n<p><strong>Application</strong> 类是你的应用程序的“容器”，该“容器”由一个你需要实现的<code>main()</code>方法和任何数量公开选项函数和属性。你的应用程序的入口是类方法 <code>run</code>，该方法实例化你的类、解析参数、调用所有的选项函数，然后使用给的位置参数来调用<code>main()</code>函数。为了从命令行运行你的应用程序，你所要做的是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891e6080215049\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif __name__ == \"__main__\":\r\n    MyApp.run()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891e6080215049-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891e6080215049-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891e6080215049-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891e6080215049-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">MyApp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>除了 <code>run()</code> 和 <code>main()</code>，<code>Application</code> 类还公开了两个内置的选项函数：<code>help()</code> 和 <code>version()</code>，分别用于显示帮助和程序的版本。默认情况下，<code>--hep</code> 和 <code>-h</code> 会调用 <code>help()</code>，<code>--version</code> 和 <code>-v</code> 会调用 <code>version()</code>，这些函数被调用后会显示相应的信息然后退出（没有处理任何其他选项）。</p>\n<p>你可以通过定义类属性来自定义 <code>help()</code> 和 <code>version()</code> 显示的信息，比如 <code>PROGNAME</code>、 <code>VERSION</code> 和 <code>DESCRIPTION</code>。举例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891ea097522948\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    PROGNAME = \"Foobar\"\r\n    VERSION = \"7.3\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ea097522948-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891ea097522948-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ea097522948-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891ea097522948-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891ea097522948-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">PROGNAME</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Foobar\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891ea097522948-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">VERSION</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"7.3\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h2 id=\"toc_2\">颜色</h2>\n<p><em>新版本 1.6</em></p>\n<p>该库也支持终端字符颜色控制。你可以直接将 <code>PROGNAME</code>, <code>VERSION</code> 和 <code>DESCRIPTION</code> 变为带颜色的字符串。如果你给 <code>PROGNAME</code> 设置了颜色，你会得到自定义的程序名字和颜色。使用方法字符串的颜色可以通过设置 <code>COLOR_USAGE</code> 来生效，不同选项组的颜色可以通过设置 <code>COLOR_GROUPS</code> 字典来生效。</p>\n<p>举例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891ee878954252\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    PROGNAME = colors.green\r\n    VERSION = colors.blue | \"1.0.2\"\r\n    COLOR_GROUPS = {\"Meta-switches\" : colors.bold &amp; colors.yellow}\r\n    opts =  cli.Flag(\"--ops\", help=colors.magenta | \"This is help\")</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ee878954252-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891ee878954252-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ee878954252-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891ee878954252-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ee878954252-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891ee878954252-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891ee878954252-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">PROGNAME</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">green</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891ee878954252-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">VERSION</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">blue</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1.0.2\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891ee878954252-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">COLOR_GROUPS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"Meta-switches\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bold</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">yellow</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891ee878954252-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">opts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Flag</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--ops\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">magenta</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"This is help\"</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891f3522667781\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSimpleColorCLI.py 1.0.2\r\nUsage:\r\n    SimpleColorCLI.py [SWITCHES]\r\nMeta-switches\r\n    -h, --help         Prints this help message and quits\r\n    --help-all         Print help messages of all subcommands and quit\r\n    -v, --version      Prints the program's version and quits\r\nSwitches\r\n    --ops              This is help</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f3522667781-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f3522667781-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f3522667781-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f3522667781-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f3522667781-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f3522667781-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f3522667781-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f3522667781-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f3522667781-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891f3522667781-1\"><span class=\"crayon-v\">SimpleColorCLI</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0.2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f3522667781-2\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f3522667781-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">SimpleColorCLI</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f3522667781-4\"><span class=\"crayon-v\">Meta</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">switches</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f3522667781-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-h\">         </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">this </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f3522667781-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-o\">-</span><span class=\"crayon-k \">all</span><span class=\"crayon-h\">         </span><span class=\"crayon-k \">Print</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">messages </span><span class=\"crayon-e\">of </span><span class=\"crayon-k \">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">subcommands </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quit</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f3522667781-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">version      </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">program</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f3522667781-8\"><span class=\"crayon-v\">Switches</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f3522667781-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">ops              </span><span class=\"crayon-e\">This </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<h1 id=\"toc_3\">选项函数</h1>\n<p><code>switch</code> 装饰器是该 CLI 开发工具包的“灵魂”，它会公开你的 CLI 应用程序的方法来作为 CLI 命令行选项，这些方法运行通过命令行来调用。我们测试下如下应用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891f7570945178\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    _allow_root = False       # provide a default\r\n    @cli.switch(\"--log-to-file\", str)\r\n    def log_to_file(self, filename):\r\n        \"\"\"Sets the file into which logs will be emitted\"\"\"\r\n        logger.addHandler(FileHandle(filename))\r\n    @cli.switch([\"-r\", \"--root\"])\r\n    def allow_as_root(self):\r\n        \"\"\"If given, allow running as root\"\"\"\r\n        self._allow_root = True\r\n    def main(self):\r\n        if os.geteuid() == 0 and not self._allow_root:\r\n            raise ValueError(\"cannot run as root\")</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f7570945178-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f7570945178-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f7570945178-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f7570945178-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f7570945178-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f7570945178-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f7570945178-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f7570945178-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f7570945178-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f7570945178-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f7570945178-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891f7570945178-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891f7570945178-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891f7570945178-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f7570945178-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_allow_root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\">       </span><span class=\"crayon-c\"># provide a default</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f7570945178-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f7570945178-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">log_to_file</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f7570945178-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"Sets the file into which logs will be emitted\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f7570945178-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">FileHandle</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f7570945178-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"-r\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"--root\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f7570945178-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">allow_as_root</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f7570945178-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"If given, allow running as root\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f7570945178-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_allow_root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f7570945178-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891f7570945178-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">os</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">geteuid</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_allow_root</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891f7570945178-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">raise</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"cannot run as root\"</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>当程序运行时，选项函数通过相应的参数被调用。比如，<code>$ ./myapp.py --log-to-file=/tmp/log</code> 将被转化成调用 <code>app.log_to_file(\"/tmp/log\")</code>。在选项函数被执行后，程序的控制权会被传递到 <code>main</code> 方法。</p>\n<blockquote><p><strong>注意</strong></p>\n<p>方法的文档字符串和参数名字会被用来渲染帮助信息，尽量保持你的代码 <a href=\"https://www.wikiwand.com/en/Don't_repeat_yourself\"><strong>DRY</strong></a>。</p>\n<p><code>autoswitch</code> 可以从函数名字中推断出选项的名称，举例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891fb835436100\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@cli.autoswitch(str)\r\ndef log_to_file(self, filename):\r\n    pass</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891fb835436100-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891fb835436100-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891fb835436100-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891fb835436100-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">autoswitch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891fb835436100-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">log_to_file</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891fb835436100-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">pass</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>这会将选项函数和 <code>--log-to-file</code> 绑定。</p></blockquote>\n<h2 id=\"toc_4\">选项参数</h2>\n<p>如上面例子所示，选项函数可能没有参数（不包括 <code>self</code>）或者有一个参数。如果选项函数接受一个参数，必须指明该参数的<em>类型</em>。如果你不需要特殊的验证，只需传递 <code>str</code>，否则，您可能会传递任何类型（或实际上可调用的任何类型），该类型将接收一个字符串并将其转换为有意义的对象。如果转换是不可行的，那么会抛出 <code>TypeError</code> 或者 <code>ValueError</code> 异常。</p>\n<p>举例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df712891ff270576076\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    _port = 8080\r\n    @cli.switch([\"-p\"], int)\r\n    def server_port(self, port):\r\n        self._port = port\r\n    def main(self):\r\n        print(self._port)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ff270576076-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891ff270576076-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ff270576076-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891ff270576076-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ff270576076-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df712891ff270576076-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df712891ff270576076-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df712891ff270576076-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891ff270576076-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_port</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8080</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891ff270576076-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"-p\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891ff270576076-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">server_port</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891ff270576076-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_port</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">port</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df712891ff270576076-6\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df712891ff270576076-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_port</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289202411460466\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py -p 17\r\n17\r\n$ ./example.py -p foo\r\nArgument of -p expected to be &lt;type 'int'&gt;, not 'foo':\r\n    ValueError(\"invalid literal for int() with base 10: 'foo'\",)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289202411460466-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289202411460466-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289202411460466-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289202411460466-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289202411460466-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289202411460466-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289202411460466-2\"><span class=\"crayon-cn\">17</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289202411460466-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289202411460466-4\"><span class=\"crayon-e\">Argument </span><span class=\"crayon-v\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">expected </span><span class=\"crayon-e\">to </span><span class=\"crayon-v\">be</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'int'</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'foo'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289202411460466-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"invalid literal for int() with base 10: 'foo'\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>工具包包含两个额外的“类型”（或者是是验证器）：<code>Range</code> 和 <code>Set</code>。<code>Range</code> 指定一个最小值和最大值，限定一个整数在该范围内（闭区间）。<code>Set</code> 指定一组允许的值，并且期望参数匹配这些值中的一个。示例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289205749997421\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    _port = 8080\r\n    _mode = \"TCP\"\r\n    @cli.switch(\"-p\", cli.Range(1024,65535))\r\n    def server_port(self, port):\r\n        self._port = port\r\n    @cli.switch(\"-m\", cli.Set(\"TCP\", \"UDP\", case_sensitive = False))\r\n    def server_mode(self, mode):\r\n        self._mode = mode\r\n    def main(self):\r\n        print(self._port, self._mode)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289205749997421-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289205749997421-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289205749997421-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289205749997421-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289205749997421-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289205749997421-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289205749997421-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289205749997421-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289205749997421-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289205749997421-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289205749997421-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289205749997421-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289205749997421-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_port</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8080</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289205749997421-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_mode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TCP\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289205749997421-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-p\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">Range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">65535</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289205749997421-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">server_port</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">port</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289205749997421-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_port</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">port</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289205749997421-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-m\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">Set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"TCP\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"UDP\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">case_sensitive</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289205749997421-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">server_mode</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289205749997421-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_mode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mode</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289205749997421-10\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289205749997421-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_port</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_mode</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128920b933160008\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py -p 17\r\nArgument of -p expected to be [1024..65535], not '17':\r\n    ValueError('Not in range [1024..65535]',)\r\n$ ./example.py -m foo\r\nArgument of -m expected to be Set('udp', 'tcp'), not 'foo':\r\n    ValueError(\"Expected one of ['UDP', 'TCP']\",)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128920b933160008-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128920b933160008-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128920b933160008-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128920b933160008-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128920b933160008-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128920b933160008-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128920b933160008-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128920b933160008-2\"><span class=\"crayon-e\">Argument </span><span class=\"crayon-v\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">expected </span><span class=\"crayon-e\">to </span><span class=\"crayon-i\">be</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1024..65535</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'17'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128920b933160008-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Not in range [1024..65535]'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128920b933160008-4\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128920b933160008-5\"><span class=\"crayon-e\">Argument </span><span class=\"crayon-v\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">expected </span><span class=\"crayon-e\">to </span><span class=\"crayon-e\">be </span><span class=\"crayon-k \">Set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'udp'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'tcp'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'foo'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128920b933160008-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">ValueError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Expected one of ['UDP', 'TCP']\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<blockquote><p><strong>注意</strong> 工具包中还有其他有用的验证器：<code>ExistingFile</code>（确保给定的参数是一个存在的文件），<code>ExistingDirectory</code>（确保给定的参数是一个存在的目录），<code>NonexistentPath</code>（确保给定的参数是一个不存在的路径）。所有这些将参数转换为<a href=\"https://plumbum.readthedocs.io/en/latest/paths.html#guide-paths\">本地路径</a>。</p></blockquote>\n<h2>可重复的选项</h2>\n<p>很多时候，你需要在同一个命令行中多次指定某个选项。比如，在 <code>gcc</code> 中，你可能使用 <code>-I</code> 参数来引入多个目录。默认情况下，选项只能指定一次，除非你给 <code>switch</code> 装饰器传递 <code>list = True</code> 参数。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128920f925248748\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    _dirs = []\r\n    @cli.switch(\"-I\", str, list = True)\r\n    def include_dirs(self, dirs):\r\n        self._dirs = dirs\r\n    def main(self):\r\n        print(self._dirs)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128920f925248748-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128920f925248748-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128920f925248748-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128920f925248748-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128920f925248748-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128920f925248748-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128920f925248748-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128920f925248748-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128920f925248748-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">_dirs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128920f925248748-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-I\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128920f925248748-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">include_dirs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dirs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128920f925248748-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_dirs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dirs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128920f925248748-6\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128920f925248748-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_dirs</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289213198392461\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py -I/foo/bar -I/usr/include\r\n['/foo/bar', '/usr/include']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289213198392461-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289213198392461-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289213198392461-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bar</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">I</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">include</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289213198392461-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'/foo/bar'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/usr/include'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<blockquote><p><strong>注意</strong> 选项函数只被调用一次，它的参数将会变成一个列表。</p></blockquote>\n<h2 id=\"toc_6\">强制的选项</h2>\n<p>如果某个选项是必须的，你可以给 <code>switch</code> 装饰器传递 <code>mandatory = True</code> 来实现。这样的话，如果用户不指定该选项，那么程序是无法运行的。</p>\n<h2 id=\"toc_7\">选项依赖</h2>\n<p>很多时候，一个选项的出现依赖另一个选项，比如，如果不给定 <code>-y</code> 选项，那么 <code>-x</code> 选项是无法给定的。这种限制可以通过给 <code>switch</code> 装饰器传递 <code>requires</code> 参数来实现，该参数是一个当前选项所依赖的选项名称列表。如果不指定某个选项所依赖的其他选项，那么用户是无法运行程序的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289216222425823\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    @cli.switch(\"--log-to-file\", str)\r\n    def log_to_file(self, filename):\r\n        logger.addHandler(logging.FileHandler(filename))\r\n    @cli.switch(\"--verbose\", requires = [\"--log-to-file\"])\r\n    def verbose(self):\r\n        logger.setLevel(logging.DEBUG)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289216222425823-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289216222425823-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289216222425823-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289216222425823-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289216222425823-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289216222425823-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289216222425823-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289216222425823-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289216222425823-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289216222425823-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">log_to_file</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289216222425823-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">FileHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289216222425823-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--verbose\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requires</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289216222425823-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">verbose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289216222425823-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setLevel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128921a846933533\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example --verbose\r\nGiven --verbose, the following are missing ['log-to-file']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128921a846933533-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128921a846933533-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128921a846933533-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">verbose</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128921a846933533-2\"><span class=\"crayon-v\">Given</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">verbose</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">following </span><span class=\"crayon-e\">are </span><span class=\"crayon-i\">missing</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'log-to-file'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<blockquote><p><strong>警告</strong> 选项函数的调用顺序和命令行指定的选项的顺序是一致的。目前不支持在程序运行时计算选项函数调用的拓扑顺序，但是将来会改进。</p></blockquote>\n<h2 id=\"toc_8\">选项互斥</h2>\n<p>有些选项依赖其他选项，但是有些选项是和其他选项互斥的。比如，<code>--verbose</code> 和 <code>--terse</code> 同时存在是不合理的。为此，你可以给 <code>switch</code> 装饰器指定 <code>excludes</code> 列表来实现。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128921d939654662\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    @cli.switch(\"--log-to-file\", str)\r\n    def log_to_file(self, filename):\r\n        logger.addHandler(logging.FileHandler(filename))\r\n    @cli.switch(\"--verbose\", requires = [\"--log-to-file\"], excludes = [\"--terse\"])\r\n    def verbose(self):\r\n        logger.setLevel(logging.DEBUG)\r\n    @cli.switch(\"--terse\", requires = [\"--log-to-file\"], excludes = [\"--verbose\"])\r\n    def terse(self):\r\n        logger.setLevel(logging.WARNING)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128921d939654662-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128921d939654662-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128921d939654662-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128921d939654662-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128921d939654662-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128921d939654662-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128921d939654662-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128921d939654662-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128921d939654662-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128921d939654662-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128921d939654662-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128921d939654662-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128921d939654662-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">log_to_file</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128921d939654662-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">FileHandler</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128921d939654662-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--verbose\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requires</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">excludes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--terse\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128921d939654662-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">verbose</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128921d939654662-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setLevel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128921d939654662-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--terse\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requires</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--log-to-file\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">excludes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"--verbose\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128921d939654662-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">terse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128921d939654662-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logger</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setLevel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">WARNING</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289221833747903\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example --log-to-file=log.txt --verbose --terse\r\nGiven --verbose, the following are invalid ['--terse']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289221833747903-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289221833747903-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289221833747903-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">to</span><span class=\"crayon-o\">-</span><span class=\"crayon-k \">file</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">verbose</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">terse</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289221833747903-2\"><span class=\"crayon-v\">Given</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">verbose</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">following </span><span class=\"crayon-e\">are </span><span class=\"crayon-i\">invalid</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'--terse'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<h2 id=\"toc_9\">选项分组</h2>\n<p>如果你希望在帮助信息中将某些选项组合在一起，你可以给 <code>switch</code> 装饰器指定 <code>group = \"Group Name\"</code>, <code>Group Name</code> 可以是任意字符串。当显示帮助信息的时候，所有属于同一个组的选项会被聚合在一起。注意，分组不影响选项的处理，但是可以增强帮助信息的可读性。</p>\n<h1 id=\"toc_10\">选项属性</h1>\n<p>很多时候只需要将选项的参数存储到类的属性中，或者当某个属性给定后设置一个标志。为此，工具包提供了 <code>SwitchAttr</code>，这是一个<a href=\"https://docs.python.org/3/howto/descriptor.html\">数据描述符</a>，用来存储参数。 该工具包还提供了两个额外的 <code>SwitchAttr</code>:<code>Flag</code>（如果选项给定后，会给其赋予默认值）和 <code>CountOf</code> （某个选项出现的次数）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289227013813882\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    log_file = cli.SwitchAttr(\"--log-file\", str, default = None)\r\n    enable_logging = cli.Flag(\"--no-log\", default = True)\r\n    verbosity_level = cli.CountOf(\"-v\")\r\n    def main(self):\r\n        print(self.log_file, self.enable_logging, self.verbosity_level)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289227013813882-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289227013813882-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289227013813882-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289227013813882-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289227013813882-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289227013813882-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289227013813882-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289227013813882-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">log_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SwitchAttr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289227013813882-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">enable_logging</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Flag</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--no-log\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">default</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289227013813882-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">verbosity_level</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">CountOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-v\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289227013813882-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289227013813882-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log_file</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">enable_logging</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">verbosity_level</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128922a397256773\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py -v --log-file=log.txt -v --no-log -vvv\r\nlog.txt False 5</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128922a397256773-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128922a397256773-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128922a397256773-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">-</span><span class=\"crayon-k \">file</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">no</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">vvv</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128922a397256773-2\"><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-t\">False</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h2 id=\"toc_11\">环境变量</h2>\n<p><em>新版本 1.6</em></p>\n<p>你可以使用 <code>envname</code> 参数将环境变量作为 <code>SwitchAttr</code> 的输入。举例如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128922e134236801\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    log_file = cli.SwitchAttr(\"--log-file\", str, envname=\"MY_LOG_FILE\")\r\n    def main(self):\r\n        print(self.log_file)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128922e134236801-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128922e134236801-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128922e134236801-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128922e134236801-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128922e134236801-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128922e134236801-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">log_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SwitchAttr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"--log-file\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">envname</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"MY_LOG_FILE\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128922e134236801-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128922e134236801-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log_file</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289231920844969\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ MY_LOG_FILE=this.log ./example.py\r\nthis.log</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289231920844969-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289231920844969-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289231920844969-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MY_LOG_FILE</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289231920844969-2\"><span class=\"crayon-v\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>在命令行给定变量值会覆盖相同环境变量的值。</p>\n<h1 id=\"toc_12\">Main</h1>\n<p>一旦当所有命令行参数被处理后 ，<code>main()</code> 方法会获取程序的控制，并且可以有任意数量的位置参数，比如，在 <code>cp -r /foo /bar</code> 中, <code>/foo</code> 和 <code>/bar</code> 是位置参数。程序接受位置参数的数量依赖于 <code>main()</code> 函数的声明：如果 <code>main</code> 方法有 5 个参数，2 个是有默认值的，那么用户最少需要提供 3 个位置参数并且总数量不能多于 5 个。如果 <code>main</code> 方法的声明中使用的是可变参数（<code>*args</code>），那么位置参数的个数是没有限制的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289234421253708\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    def main(self, src, dst, mode = \"normal\"):\r\n        print(src, dst, mode)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289234421253708-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289234421253708-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289234421253708-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289234421253708-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289234421253708-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"normal\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289234421253708-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mode</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289238135265795\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py /foo /bar\r\n/foo /bar normal\r\n$ ./example.py /foo /bar spam\r\n/foo /bar spam\r\n$ ./example.py /foo\r\nExpected at least 2 positional arguments, got ['/foo']\r\n$ ./example.py /foo /bar spam bacon\r\nExpected at most 3 positional arguments, got ['/foo', '/bar', 'spam', 'bacon']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289238135265795-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289238135265795-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289238135265795-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289238135265795-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289238135265795-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289238135265795-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289238135265795-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289238135265795-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289238135265795-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bar</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289238135265795-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bar </span><span class=\"crayon-i\">normal</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289238135265795-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bar </span><span class=\"crayon-v\">spam</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289238135265795-4\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bar </span><span class=\"crayon-i\">spam</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289238135265795-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289238135265795-6\"><span class=\"crayon-e\">Expected </span><span class=\"crayon-e\">at </span><span class=\"crayon-i\">least</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">positional </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">got</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'/foo'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289238135265795-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bar </span><span class=\"crayon-e\">spam </span><span class=\"crayon-e\">bacon</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289238135265795-8\"><span class=\"crayon-e\">Expected </span><span class=\"crayon-e\">at </span><span class=\"crayon-i\">most</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">positional </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">got</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'/foo'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/bar'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'spam'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'bacon'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<blockquote><p><strong>注意</strong> 该方法的声明也用于生成帮助信息，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128923b531855254\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nUsage:  [SWITCHES] src dst [mode='normal']</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128923b531855254-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128923b531855254-1\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">src </span><span class=\"crayon-i\">dst</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">mode</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'normal'</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>\n</p></blockquote>\n<p>使用可变参数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128923f542499761\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    def main(self, src, dst, *eggs):\r\n        print(src, dst, eggs)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128923f542499761-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128923f542499761-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128923f542499761-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128923f542499761-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128923f542499761-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">eggs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128923f542499761-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dst</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">eggs</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289244054707418\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ./example.py a b c d\r\na b ('c', 'd')\r\n$ ./example.py --help\r\nUsage:  [SWITCHES] src dst eggs...\r\nMeta-switches:\r\n    -h, --help                 Prints this help message and quits\r\n    -v, --version              Prints the program's version and quits</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289244054707418-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289244054707418-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289244054707418-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289244054707418-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289244054707418-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289244054707418-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289244054707418-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289244054707418-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289244054707418-2\"><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'c'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'d'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289244054707418-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">example</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289244054707418-4\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">src </span><span class=\"crayon-e\">dst </span><span class=\"crayon-v\">eggs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289244054707418-5\"><span class=\"crayon-v\">Meta</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289244054707418-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-h\">                 </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">this </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289244054707418-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">version              </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">program</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p></p>\n<h2 id=\"toc_13\">位置验证</h2>\n<p><em>新版本 1.6</em></p>\n<p>你可以使用 <code>cli.positional</code> 装饰器提供的验证器来验证位置参数。只需在装饰器中传递与 <code>main</code> 函数中的相匹配的验证器即可。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289247039762293\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    @cli.positional(cli.ExistingFile, cli.NonexistentPath)\r\n    def main(self, infile, *outfiles):\r\n        \"infile is a path, outfiles are a list of paths, proper errors are given\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289247039762293-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289247039762293-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289247039762293-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289247039762293-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289247039762293-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289247039762293-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">positional</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ExistingFile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NonexistentPath</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289247039762293-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">infile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">outfiles</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289247039762293-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"infile is a path, outfiles are a list of paths, proper errors are given\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>如果你的程序只在 Python 3 中运行，你可以使用注解来指定验证器，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128924b295666939\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass MyApp(cli.Application):\r\n    def main(self, infile : cli.ExistingFile, *outfiles : cli.NonexistentPath):\r\n    \"Identical to above MyApp\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924b295666939-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924b295666939-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924b295666939-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128924b295666939-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MyApp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924b295666939-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">infile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ExistingFile</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">outfiles</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">NonexistentPath</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924b295666939-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"Identical to above MyApp\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>如果 <code>positional</code> 装饰器存在，那么注解会被忽略。</p>\n<h1 id=\"toc_14\">子命令</h1>\n<p><em>新版本 1.1</em></p>\n<p>随着 CLI 应用程序的扩展，功能变的越来越多，一个通常的做法是将其逻辑分成多个子应用（或者子命令）。一个典型的例子是版本控制系统，比如 <a href=\"https://git-scm.com/\"><strong>git</strong></a>，<code>git</code> 是根命令，在这之下的子命令比如 <code>commit</code> 或者 <code>push</code> 是嵌套的。<code>git</code> 甚至支持命令别名，这运行用户自己创建一些子命令。Plumbum 写类似这样的程序是很轻松的。</p>\n<p>在我们开始了解代码之前，先强调两件事情：</p>\n<ul>\n<li>在 Plumbum 中，每个子命令都是一个完整的 <code>cli.Application</code> 应用，你可以单独执行它，或者从所谓的根命令中分离出来。当应用程序单独执行是，它的父属性是 <code>None</code>，当以子命令运行时，它的父属性指向父应用程序。同样，当父应用使用子命令执行时，它的内嵌命令被设置成内嵌应用。</li>\n<li>每个子命令只负责它自己的选项参数（直到下一个子命令）。这允许应用在内嵌应用调用之前来处理它自己的选项和位置参数。例如 <code>git --foo=bar spam push origin --tags</code>：根应用 <code>git</code> 负责选项 <code>--foo</code> 和位置选项 <code>spam</code> ，内嵌应用 <code>push</code> 负责在它之后的参数。从理论上讲，你可以将多个子应用程序嵌套到另一个应用程序中，但在实践中，通常嵌套层级只有一层。</li>\n</ul>\n<p>这是一个模仿版本控制系统的例子 <code>geet</code>。我们有一个根应用 <code>Geet</code> ，它有两个子命令 <code>GeetCommit</code> 和 <code>GeetPush</code>：这两个子命令通过 <code>subcommand</code> 装饰器来将其附加到根应用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128924f896025425\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Geet(cli.Application):\r\n    \"\"\"The l33t version control\"\"\"\r\n    VERSION = \"1.7.2\"\r\n    def main(self, *args):\r\n        if args:\r\n            print(\"Unknown command {0!r}\".format(args[0]))\r\n            return 1   # error exit code\r\n        if not self.nested_command:           # will be ``None`` if no sub-command follows\r\n            print(\"No command given\")\r\n            return 1   # error exit code\r\n@Geet.subcommand(\"commit\")                    # attach 'geet commit'\r\nclass GeetCommit(cli.Application):\r\n    \"\"\"creates a new commit in the current branch\"\"\"\r\n    auto_add = cli.Flag(\"-a\", help = \"automatically add changed files\")\r\n    message = cli.SwitchAttr(\"-m\", str, mandatory = True, help = \"sets the commit message\")\r\n    def main(self):\r\n        print(\"doing the commit...\")\r\n@Geet.subcommand(\"push\")                      # attach 'geet push'\r\nclass GeetPush(cli.Application):\r\n    \"\"\"pushes the current local branch to the remote one\"\"\"\r\n    def main(self, remote, branch = None):\r\n        print(\"doing the push...\")\r\nif __name__ == \"__main__\":\r\n    Geet.run()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128924f896025425-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128924f896025425-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Geet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"The l33t version control\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">VERSION</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"1.7.2\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Unknown command {0!r}\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\"># error exit code</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nested_command</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">           </span><span class=\"crayon-c\"># will be ``None`` if no sub-command follows</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"No command given\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\"># error exit code</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-11\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subcommand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"commit\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                    </span><span class=\"crayon-c\"># attach 'geet commit'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-12\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GeetCommit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"creates a new commit in the current branch\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">auto_add</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Flag</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-a\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"automatically add changed files\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">message</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">SwitchAttr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"-m\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mandatory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"sets the commit message\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"doing the commit...\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-18\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subcommand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"push\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">                      </span><span class=\"crayon-c\"># attach 'geet push'</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-19\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GeetPush</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Application</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"pushes the current local branch to the remote one\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">remote</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">branch</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"doing the push...\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128924f896025425-23\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128924f896025425-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">Geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0055 seconds] -->\r\n<p></p>\n<blockquote><p><strong>注意</strong></p>\n<ul>\n<li>由于 <code>GeetCommit</code> 也是一个 <code>cli.Application</code>，因此你可以直接调用 <code>GeetCommit.run()</code> （这在应用的上下文是合理的）</li>\n<li>你也可以不用装饰器而使用 <code>subcommand</code> 方法来附加子命令：<code>Geet.subcommand(\"push\", GeetPush)</code></li>\n</ul>\n</blockquote>\n<p>以下是运行该应用程序的示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289253800059408\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ python geet.py --help\r\ngeet v1.7.2\r\nThe l33t version control\r\nUsage: geet.py [SWITCHES] [SUBCOMMAND [SWITCHES]] args...\r\nMeta-switches:\r\n    -h, --help                 Prints this help message and quits\r\n    -v, --version              Prints the program's version and quits\r\nSubcommands:\r\n    commit                     creates a new commit in the current branch; see\r\n                               'geet commit --help' for more info\r\n    push                       pushes the current local branch to the remote\r\n                               one; see 'geet push --help' for more info\r\n$ python geet.py commit --help\r\ngeet commit v1.7.2\r\ncreates a new commit in the current branch\r\nUsage: geet commit [SWITCHES]\r\nMeta-switches:\r\n    -h, --help                 Prints this help message and quits\r\n    -v, --version              Prints the program's version and quits\r\nSwitches:\r\n    -a                         automatically add changed files\r\n    -m VALUE:str               sets the commit message; required\r\n$ python geet.py commit -m \"foo\"\r\ndoing the commit...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0df71289253800059408-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289253800059408-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python </span><span class=\"crayon-v\">geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-2\"><span class=\"crayon-e\">geet </span><span class=\"crayon-v\">v1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-cn\">7.2</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-3\"><span class=\"crayon-e\">The </span><span class=\"crayon-e\">l33t </span><span class=\"crayon-e\">version </span><span class=\"crayon-e\">control</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-4\"><span class=\"crayon-v\">Usage</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">SUBCOMMAND</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">SWITCHES</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-5\"><span class=\"crayon-v\">Meta</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-h\">                 </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">this </span><span class=\"crayon-k \">help</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">message </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quits</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">version              </span><span class=\"crayon-e\">Prints </span><span class=\"crayon-e\">the </span><span class=\"crayon-i\">program</span><span class=\"crayon-s\">'s version and quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-8\"><span class=\"crayon-s\">Subcommands:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-9\"><span class=\"crayon-s\">    commit                     creates a new commit in the current branch; see</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-10\"><span class=\"crayon-s\">                               '</span><span class=\"crayon-e\">geet </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-s\">' for more info</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-11\"><span class=\"crayon-s\">    push                       pushes the current local branch to the remote</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-12\"><span class=\"crayon-s\">                               one; see '</span><span class=\"crayon-e\">geet </span><span class=\"crayon-v\">push</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-k \">help</span><span class=\"crayon-s\">' for more info</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-13\"><span class=\"crayon-s\">$ python geet.py commit --help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-14\"><span class=\"crayon-s\">geet commit v1.7.2</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-15\"><span class=\"crayon-s\">creates a new commit in the current branch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-16\"><span class=\"crayon-s\">Usage: geet commit [SWITCHES]</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-17\"><span class=\"crayon-s\">Meta-switches:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-18\"><span class=\"crayon-s\">    -h, --help                 Prints this help message and quits</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-19\"><span class=\"crayon-s\">    -v, --version              Prints the program'</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">quits</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-20\"><span class=\"crayon-v\">Switches</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\">                         </span><span class=\"crayon-e\">automatically </span><span class=\"crayon-e\">add </span><span class=\"crayon-e\">changed </span><span class=\"crayon-v\">files</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">VALUE</span><span class=\"crayon-o\">:</span><span class=\"crayon-k \">str</span><span class=\"crayon-h\">               </span><span class=\"crayon-k \">sets</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">commit </span><span class=\"crayon-v\">message</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">required</span></div><div class=\"crayon-line\" id=\"crayon-5b0df71289253800059408-23\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">python </span><span class=\"crayon-v\">geet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py </span><span class=\"crayon-v\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"foo\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289253800059408-24\"><span class=\"crayon-e\">doing </span><span class=\"crayon-e\">the </span><span class=\"crayon-v\">commit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p></p>\n<h1 id=\"toc_15\">配置解析器</h1>\n<p>应用程序的另一个常见的功能是配置文件解析器，解析后台 INI 配置文件：<code>Config</code> （或者 <code>ConfigINI</code>）。使用示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df7128925b961205319\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom plumbum import cli\r\nwith cli.Config('~/.myapp_rc') as conf:\r\n    one = conf.get('one', '1')\r\n    two = conf.get('two', '2')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df7128925b961205319-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128925b961205319-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df7128925b961205319-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df7128925b961205319-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df7128925b961205319-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plumbum </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cli</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128925b961205319-2\"><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cli</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Config</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'~/.myapp_rc'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conf</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df7128925b961205319-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">one</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'one'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'1'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df7128925b961205319-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">two</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'two'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>如果配置文件不存在，那么将会以当前的 <code>key</code> 和默认的 <code>value</code> 来创建一个配置文件，在调用 <code>.get</code> 方法时会得到默认值，当上下文管理器存在时，文件会被创建。如果配置文件存在，那么该文件将会被读取并且没有任何改变。你也可以使用 <code>[]</code> 语法来强制设置一个值或者当变量不存在时获取到一个 <code>ValueError</code>。如果你想避免上下文管理器，你也可以使用 <code>.read</code> 和 <code>.write</code>。</p>\n<p>ini 解析器默认使用 <code>[DEFAULT]</code> 段，就像 Python 的 ConfigParser。如果你想使用一个不同的段，只需要在 key 中通过 <code>.</code> 将段和标题分隔开。比如 <code>conf['section.item']</code> 会将 <code>item</code> 放置在 <code>[section]</code> 下。所有存储在 <code>ConfigINI</code> 中的条目会被转化成 <code>str</code>，<code>str</code> 是经常返回的。</p>\n<h1 id=\"toc_16\">终端实用程序</h1>\n<p>在 <code>plumbum.cli.terminal</code> 中有多个终端实用程序，用来帮助制作终端应用程序。</p>\n<p><code>get_terminal_size(default=(80,25))</code> 允许跨平台访问终端屏幕大小，返回值是一个元组 <code>(width, height)</code>。还有几个方法可以用来询问用户输入，比如 <code>readline</code>, <code>ask</code>, <code>choose</code> 和 <code>prompt</code> 都是可用的。</p>\n<p><code>Progress(iterator)</code> 可以使你快速地从迭代器来创建一个进度条。简单地打包一个 slow 迭代器并迭代就会生成一个不错的基于用户屏幕宽度的文本进度条，同时会显示剩余时间。如果你想给 fast 迭代器创建一个进度条，并且在循环中包含代码，那么请使用 <code>Progress.wrap</code> 或者 <code>Progress.range</code>。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289260305513003\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor i in Progress.range(10):\r\n    time.sleep(1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289260305513003-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df71289260305513003-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289260305513003-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Progress</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df71289260305513003-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>如果在终端中有其他输出，但是仍然需要一个进度条，请传递 <code>has_output=True</code> 参数来禁止进度条清除掉历史输出。</p>\n<p>在 <code>plumbum.cli.image</code> 中提供了一个命令行绘图器（<code>Image</code>）。它可以绘制一个类似 PIL 的图像：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df71289265526429469\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nImage().show_pil(im)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df71289265526429469-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df71289265526429469-1\"><span class=\"crayon-e\">Image</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show_pil</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">im</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>Image 构造函数接受一个可选的 size 参数（如果是 None，那么默认是当前终端大小）和一个字符比例，该比例来自当前字符的高度和宽度的度量，默认值是 2.45。如果设置为 None，ratio 将会被忽略，图像不再被限制成比例缩放。要直接绘制一个图像，<code>show</code> 需要一个文件名和一对参数。<code>show_pil</code> 和 <code>show_pil_double</code> 方法直接接受一个 PIL-like 对象。为了从命令行绘制图像，该模块可以直接被运行：<code>python -m plumbum.cli.image myimage.png</code>。</p>\n<p>要获取帮助列表和更多的信息请参见 <a href=\"https://plumbum.readthedocs.io/en/latest/api/cli.html#api-cli\"><strong>api docs</strong></a>。</p>\n<h1 id=\"toc_17\">请参阅</h1>\n<ul>\n<li><a href=\"https://github.com/tomerfiliba/plumbum/blob/master/examples/filecopy.py\">filecopy.py</a> 示例</li>\n<li><a href=\"https://github.com/tomerfiliba/plumbum/blob/master/examples/geet.py\">geet.py</a> – 一个可运行的使用子命令的示例</li>\n<li><a href=\"http://rpyc.readthedocs.io/en/latest/\">RPyC</a> 已经将基于 bash 的编译脚本换成了 Plumbum CLI。这是多么<a href=\"https://github.com/tomerfiliba/rpyc/blob/c457a28d689df7605838334a437c6b35f9a94618/build.py\">简短和具有可读性</a></li>\n<li>一篇<a href=\"http://tomerfiliba.com/blog/Plumbum/\">博客</a>，讲述 CLI 模块的理论</li>\n</ul>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89132\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89132votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89132\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/609639dd781e1dde397ac1495b98be9618b8b279.jpg"}
{"url_object_id": "566271936f9d3bb2d867b11ea8c0b95c", "title": "手把手教你写网络爬虫（1）：网易云音乐歌单", "url": "http://python.jobbole.com/89091/", "create_date": "2018/04/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/2c224095b3bd5c6fee7c908a481292f7.jpg"], "praise_nums": "1", "comment_nums": "6", "fav_nums": "4", "tags": "系列教程", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8718107.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p> </p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/7c31b3f8ab65e9d1f9913cf0230b6506.jpg\" alt=\"\"></p>\n<p>大家好，《手把手教你写网络爬虫》连载开始了！在笔者的职业生涯中，几乎没有发现像网络爬虫这样的编程实践，可以同时吸引程序员和门外汉的注意。本文由浅入深的把爬虫技术和盘托出，为初学者提供一种轻松的入门方式。请跟随我们一起踏上爬虫学习的打怪升级之路吧！</p>\n<h3>介绍</h3>\n<p><strong>什么是爬虫？</strong></p>\n<p>先看看百度百科的定义:</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a9998ffe7fe38b85cbbefba4fa9ff1b1.png\" alt=\"\"></p>\n<p>简单的说网络爬虫（Web crawler）也叫做网络铲（Web scraper）、网络蜘蛛（Web spider），其行为一般是先“爬”到对应的网页上，再把需要的信息“铲”下来。</p>\n<p><strong>为什么学习爬虫？</strong></p>\n<p>看到这里，有人就要问了：google、百度等搜索引擎已经帮我们抓取了互联网上的大部分信息了，为什么还要自己写爬虫呢？这是因为，需求是多样的。比如在企业中，爬取下来的数据可以作为数据挖掘的数据源。甚至有人为了炒股，专门抓取股票信息。笔者就见过有人为了分析房价，自学编程，爬了绿中介的数据。</p>\n<p>在大数据深入人心的时代，网络爬虫作为网络、存储与机器学习等领域的交汇点，已经成为满足个性化网络数据需求的最佳实践。还犹豫什么？让我们开始学习吧！</p>\n<h3>语言&amp;环境</h3>\n<p><strong>语言</strong>：人生苦短，我用Python。让Python带我们飞！</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/2e3c2f3eccb2dfbdd082750a4e9319bf.png\" alt=\"\"></p>\n<p><strong>urllib.request</strong><strong>：</strong>这是Python自带的库，不需要单独安装，它的作用是为我们打开url获取html的内容。Python官方文档的介绍：The urllib.request module defines functions and classes which help in opening URLs (mostly HTTP) in a complex world — basic and digest authentication, redirections, cookies and more.</p>\n<p><strong>BeautifulSoup</strong><strong>：</strong>是一个可以从HTML或XML文件中提取数据的Python库。它能够通过你喜欢的转换器实现惯用的文档导航，查找，修改文档的方式。Beautiful Soup会帮你节省数小时甚至数天的工作时间。安装比较简单：</p>\n<p>$pip install beautifulsoup4</p>\n<p>验证的方法，进入Python直接import一下，如果没有异常，那就说明安装成功了！</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/f99b651a3d3921daa37d90ba070057ee.png\" alt=\"\"></p>\n<p><strong>“美味的汤，绿色的浓汤，</strong></p>\n<p><strong>在热气腾腾的盖碗里装！</strong></p>\n<p><strong>谁不愿意尝一尝，这样的好汤？</strong></p>\n<p><strong>晚餐用的汤，美味的汤！”</strong></p>\n<p>BeautifulSoup库的名字取自《爱丽丝梦游仙境》里的同名诗歌。</p>\n<h3>爬取数据</h3>\n<p>接下来，我们就用urllib.request获取html内容，再用BeautifulSoup提取其中的数据，完成一次简单的爬取。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/f16321fbc4a4eebccada571b00f7963d.png\" alt=\"\"></p>\n<p>把这段代码保存为get_html.py，然后运行，看看输出了什么：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/f5f61fa924736feeb1863bbd4cc043c6.png\" alt=\"\"></p>\n<p>果然，输出了http://jr.jd.com 这个网页的全部HTML代码。</p>\n<p>输出的代码简直无法直视，如何方便的找到我们想抓取数据呢？用Chrome打开url，然后按F12，再按Ctrl + Shift + C。如果我们要抓导航栏，就用鼠标点击任意一个导航栏的项目，浏览器就在html中找到了它的位置。效果如下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/3e3a52fb4964aabe62b44ce8c24c5e2b.png\" alt=\"\"></p>\n<p>定位到的html代码：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/89a70fee0442b372d1fa8200428c29c1.png\" alt=\"\"></p>\n<p>有了这些信息，就可以用BeautifulSoup提取数据了。升级一下代码：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/f534f85b81b6a3fe9827c79c9d23d885.png\" alt=\"\"></p>\n<p>把这段代码保存为get_data.py，然后运行，看看输出了什么：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/fc7e2206335690a887ee335d79932832.png\" alt=\"\"></p>\n<p>没错，得到了我们想要的数据！</p>\n<p>BeautifulSoup提供一些简单的、Python式的函数用来处理导航、搜索、修改分析树等功能。它是一个工具箱，通过解析文档为用户提供需要抓取的数据，因为简单，所以不需要多少代码就可以写出一个完整的应用程序。怎么样，是不是觉得只要复制粘贴就可以写爬虫了？简单的爬虫确实是可以的！</p>\n<h3>一个迷你爬虫</h3>\n<p>我们先定一个小目标：爬取网易云音乐播放数大于500万的歌单。</p>\n<p>打开歌单的url: <a href=\"http://music.163.com/#/discover/playlist\">http://music.163.com/#/discover/playlist</a>，然后用BeautifulSoup提取播放数&lt;span class=”nb”&gt;3715&lt;/span&gt;。结果表明，我们什么也没提取到。难道我们打开了一个假的网页？</p>\n<p><strong>动态网页</strong>：所谓的动态网页，是指跟静态网页相对的一种网页编程技术。静态网页，随着html代码的生成，页面的内容和显示效果就基本上不会发生变化了——除非你修改页面代码。而动态网页则不然，页面代码虽然没有变，但是显示的内容却是可以随着时间、环境或者数据库操作的结果而发生改变的。</p>\n<p>值得强调的是，不要将动态网页和页面内容是否有动感混为一谈。这里说的动态网页，与网页上的各种动画、滚动字幕等视觉上的动态效果没有直接关系，动态网页也可以是纯文字内容的，也可以是包含各种动画的内容，这些只是网页具体内容的表现形式，无论网页是否具有动态效果，只要是采用了动态网站技术生成的网页都可以称为动态网页。</p>\n<p>现在我们明白了，这是一个动态网页，我们得到它的时候，歌单还没请求到呢，当然什么都提取不出来！</p>\n<p>我们之前的技术不能执行那些让页面产生各种神奇效果的JavaScript 代码。如果网站的HTML页面没有运行JavaScript，就可能和你在浏览器里看到的样子完全不同，因为浏览器可以正确地执行JavaScript。用Python 解决这个问题只有两种途径：直接从JavaScript 代码里采集内容，或者用Python 的第三方库运行JavaScript，直接采集你在浏览器里看到的页面。我们当然选择后者。今天第一课，不深究原理，先简单粗暴的实现我们的小目标。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/0f04f64bf63348aa1af241c0a2dd9b49.png\" alt=\"\"></p>\n<p><strong>Selenium</strong>：是一个强大的网络数据采集工具，其最初是为网站自动化测试而开发的。近几年，它还被广泛用于获取精确的网站快照，因为它们可以直接运行在浏览器上。Selenium 库是一个在WebDriver 上调用的API。WebDriver 有点儿像可以加载网站的浏览器，但是它也可以像BeautifulSoup对象一样用来查找页面元素，与页面上的元素进行交互（发送文本、点击等），以及执行其他动作来运行网络爬虫。安装方式与其他Python第三方库一样。</p>\n<p>$pip install Selenium</p>\n<p>验证一下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/0fe6620f57d89bc1977779ba33880468.png\" alt=\"\"></p>\n<p>Selenium 自己不带浏览器，它需要与第三方浏览器结合在一起使用。例如，如果你在Firefox 上运行Selenium，可以直接看到一个Firefox 窗口被打开，进入网站，然后执行你在代码中设置的动作。虽然这样可以看得更清楚，但不适用于我们的爬虫程序，爬一页就打开一页效率太低，所以我们用一个叫PhantomJS的工具代替真实的浏览器。</p>\n<p><strong>PhantomJS</strong>：是一个“无头”（headless）浏览器。它会把网站加载到内存并执行页面上的JavaScript，但是它不会向用户展示网页的图形界面。把Selenium和PhantomJS 结合在一起，就可以运行一个非常强大的网络爬虫了，可以处理cookie、JavaScript、header，以及任何你需要做的事情。</p>\n<p>PhantomJS并不是Python的第三方库，不能用pip安装。它是一个完善的浏览器，所以你需要去它的官方网站下载，然后把可执行文件拷贝到Python安装目录的Scripts文件夹，像这样：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e17d7845337e03967296b7d8baa6d031.png\" alt=\"\"></p>\n<p>开始干活！</p>\n<p>打开歌单的第一页：</p>\n<p><a href=\"http://music.163.com/#/discover/playlist/?order=hot&amp;cat=%E5%85%A8%E9%83%A8&amp;limit=35&amp;offset=0\">http://music.163.com/#/discover/playlist/?order=hot&amp;cat=%E5%85%A8%E9%83%A8&amp;limit=35&amp;offset=0</a></p>\n<p>用Chrome的“开发者工具”F12先分析一下，很容易就看穿了一切。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/390f565eed0791af98650b27b4da68a5.png\" alt=\"\"></p>\n<p>播放数nb (number broadcast)：29915</p>\n<p>封面 msk (mask)：有标题和url</p>\n<p>同理，可以找到“下一页”的url，最后一页的url是“javascript:void(0)”。</p>\n<p>最后，用18行代码即可完成我们的工作。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a49292f59489cb03c185cb1dca4c915a.png\" alt=\"\"></p>\n<p>把这段代码保存为get_data.py，然后运行。运行结束后，在程序的目录里生成了一个playlist.csv文件。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/081d4973f08acf78312c7e45032bb385.png\" alt=\"\"></p>\n<p>看到成果后是不是很有成就感？如果你感兴趣，还可以按照这个思路，找找评论数最多的单曲，再也不用担心没歌听了！</p>\n<p>今天的内容比较浅显，希望对你有用。就先介绍到这里，我们下期再见！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89091\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89091votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89091\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 6 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/21419078469fb3b2b48a75c73707dbfa6e1d5167.jpg"}
{"url_object_id": "27dd46555557c7ae9e174f1bf7eeb144", "title": "一行代码蒸发了¥6,447,277,680 人民币！", "url": "http://python.jobbole.com/89105/", "create_date": "2018/04/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/04/a84bf93b354bb294bc2fcf6852772bcf.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "1", "tags": "基础知识", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://zhuanlan.zhihu.com/p/35989258\">高金</a>   </div><p><b>现在进入你还是先行者，最后观望者进场才是韭菜。</b></p>\n<h1>背景</h1>\n<p>今天有人在群里说，<a class=\" wrap external\" href=\"https://link.zhihu.com/?target=https%3A//etherscan.io/address/0xc5d105e63711398af9bbff092d4b6769c82f793d\" target=\"_blank\" rel=\"nofollow noreferrer\">Beauty Chain 美蜜</a> 代码里面有bug，已经有人利用该bug获得了 57,896,044,618,658,100,000,000,000,000,000,000,000,000,000,000,000,000,000,000.792003956564819968 个 BEC</p>\n<p>那笔操作记录是 <a class=\" wrap external\" href=\"https://link.zhihu.com/?target=https%3A//etherscan.io/tx/0xad89ff16fd1ebe3a0a7cf4ed282302c06626c1af33221ebe0d3a470aba4a660f\" target=\"_blank\" rel=\"nofollow noreferrer\">0xad89ff16fd1ebe3a0a7cf4ed282302c06626c1af33221ebe0d3a470aba4a660f</a></p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/76bde36bd1cfb65e82137996158b93f2.jpg\"><img class=\"aligncenter size-full wp-image-89106\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/76bde36bd1cfb65e82137996158b93f2.jpg\" alt=\"v2-05da24da7d69dbeb1797e15c2f385517_hd\"></a></p>\n<p>下面我来带大家看看，黑客是如何实现的！</p>\n<p>我们可以看到执行的方法是 <code>batchTransfer</code></p>\n<p>那这个方法是干嘛的呢？（给指定的几个地址，发送相同数量的代币）</p>\n<h1>整体逻辑是</h1>\n<p>你传几个地址给我(<i>receivers),然后再传给我你要给每个人多少代币（</i>value)</p>\n<p>然后你要发送的总金额 = 发送的人数* 发送的金额</p>\n<p>然后 要求你当前的余额大于 发送的总金额</p>\n<p>然后扣掉你发送的总金额</p>\n<p>然后 给<i>receivers 里面的每个人发送 指定的金额（</i>value)</p>\n<p>从逻辑上看，这边是没有任何问题的，你想给别人发送代币，那么你本身的余额一定要大于发送的总金额的！</p>\n<p>但是这段代码却犯了一个很傻的错!</p>\n<h1>代码解释</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/751bee26d8dfcc4768e96864f937cd74.jpg\"><img class=\"aligncenter size-full wp-image-89107\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/751bee26d8dfcc4768e96864f937cd74.jpg\" alt=\"v2-05da24da7d69dbeb1797e15c2f385517_hd\"></a></p>\n<p>这个方法会传入两个参数</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be878b171218694\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n_receivers\r\n_value</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be878b171218694-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dec8be878b171218694-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be878b171218694-1\"><span class=\"crayon-e\">_receivers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dec8be878b171218694-2\"><span class=\"crayon-v\">_value</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>_receivers 的值是个列表，里面有两个地址</p>\n<p><a class=\" wrap external\" href=\"https://link.zhihu.com/?target=https%3A//etherscan.io/token/0xc5d105e63711398af9bbff092d4b6769c82f793d%3Fa%3D0x0e823ffe018727585eaf5bc769fa80472f76c3d7\" target=\"_blank\" rel=\"nofollow noreferrer\">0x0e823ffe018727585eaf5bc769fa80472f76c3d7</a></p>\n<p><a class=\" wrap external\" href=\"https://link.zhihu.com/?target=https%3A//etherscan.io/token/0xc5d105e63711398af9bbff092d4b6769c82f793d%3Fa%3D0xb4d30cac5124b46c2df0cf3e3e1be05f42119033\" target=\"_blank\" rel=\"nofollow noreferrer\">0xb4d30cac5124b46c2df0cf3e3e1be05f42119033</a></p>\n<p>_value 的值是 <code>8000000000000000000000000000000000000000000000000000000000000000</code></p>\n<p>我们再查看代码（如下图）</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/25c785a277067bee81ad8dd6ec66eda0.jpg\"><img class=\"aligncenter size-full wp-image-89108\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/25c785a277067bee81ad8dd6ec66eda0.jpg\" alt=\"v2-05da24da7d69dbeb1797e15c2f385517_hd\"></a></p>\n<p>我们一行一行的来解释</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be8794796360106\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nuint cnt = _receivers.length;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be8794796360106-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be8794796360106-1\"><span class=\"crayon-e\">uint </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_receivers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>是获取 _receivers 里面有几个地址，我们从上面可以看到 参数里面只有两个地址，所以 cnt=2，也就是 给两个地址发送代币</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be8798402070010\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nuint256 amount = uint256(cnt) * _value;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be8798402070010-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be8798402070010-1\"><span class=\"crayon-e\">uint256 </span><span class=\"crayon-v\">amount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">uint256</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cnt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_value</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h1>uint256</h1>\n<p>首先 <code>uint256(cnt)</code> 是把cnt 转成了 uint256类型</p>\n<p>那么,什么是uint256类型？或者说uint256类型的取值范围是多少…</p>\n<p>uintx 类型的取值范围是 0 到 2的x次方 -1</p>\n<p>也就是 假如是 uint8的话</p>\n<p>则 uint8的取值范围是 0 到 2的8次方 -1</p>\n<p>也就是 0 到255</p>\n<p>那么uint256 的取值范围是</p>\n<p>0 – 2的256次方-1 也就是 <code>0</code> <code>到115792089237316195423570985008687907853269984665640564039457584007913129639935</code></p>\n<p>python 算 2的256次方是多少</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/2c997c7089af79fdc943c947a4047bf8.jpg\"><img class=\"aligncenter size-full wp-image-89109\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/2c997c7089af79fdc943c947a4047bf8.jpg\" alt=\"v2-05da24da7d69dbeb1797e15c2f385517_hd\"></a></p>\n<p>那么假如说 设置的值超过了 取值范围怎么办？这种情况称为 <code>溢出</code></p>\n<p>举个例子来说明</p>\n<p>因为uint256的取值太大了，所以用uint8来 举例。。。</p>\n<p>从上面我们已经知道了 uint8 最小是0，最大是255</p>\n<p>那么当我 255 + 1 的时候，结果是啥呢？<b>结果会变成0</b></p>\n<p>那么当我 255 + 2 的时候，结果是啥呢？<b>结果会变成1</b></p>\n<p>那么当我 0 – 1 的时候，结果是啥呢？<b>结果会变成255</b></p>\n<p>那么当我 0 – 2 的时候，结果是啥呢？<b>结果会变成254</b></p>\n<p>那么 我们回到上面的代码中，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be879d163971938\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\namount = uint256(cnt) * _value</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be879d163971938-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be879d163971938-1\"><span class=\"crayon-v\">amount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">uint256</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cnt</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_value</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>则</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be87a0611705613\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\namount = 2* _value</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87a0611705613-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be87a0611705613-1\"><span class=\"crayon-v\">amount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_value</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>但是此时 _value 是16进制的，我们把他转成 10进制</p>\n<p>（python 16进制转10进制）</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/86ac40bb883132d9a6c9791b0cb5bd5c.jpg\"><img class=\"aligncenter size-full wp-image-89110\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/86ac40bb883132d9a6c9791b0cb5bd5c.jpg\" alt=\"v2-05da24da7d69dbeb1797e15c2f385517_hd\"></a></p>\n<p>可以看到 _value = <code>57896044618658097711785492504343953926634992332820282019728792003956564819968</code></p>\n<p>那么amount = _value*2 = <code>115792089237316195423570985008687907853269984665640564039457584007913129639936</code></p>\n<p>可以在查看上面看到 uint256取值范围最大为 <code>115792089237316195423570985008687907853269984665640564039457584007913129639935</code></p>\n<p>此时，amout已经超过了最大值，溢出 则 <code>amount</code> <code>=</code> <code>0</code></p>\n<p>下一行代码 <code>require(cnt</code> <code>&gt;</code> <code>0</code> <code>&amp;&amp;</code> <code>cnt</code> <code>&lt;=</code> <code>20);</code> require 语句是表示该语句一定要是正确的，也就是 cnt 必须大于0 且 小于等于20</p>\n<p>我们的cnt等于2，通过!</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be87a4407154089\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nrequire(_value &gt; 0 &amp;&amp; balances[msg.sender] &gt;= amount);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87a4407154089-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be87a4407154089-1\"><span class=\"crayon-e\">require</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">balances</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sender</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">amount</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>这句要求 <i>value 大于0，我们的</i>value是大于0 的 且,当前用户拥有的代币余额大于等于 amount,因为amount等于0，所以 就算你一个代币没有，也是满足的！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be87a7454485700\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbalances[msg.sender] = balances[msg.sender].sub(amount);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87a7454485700-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be87a7454485700-1\"><span class=\"crayon-v\">balances</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sender</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">balances</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sender</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sub</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">amount</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这句是当前用户的余额 – amount</p>\n<p>当前amount 是0，所以当前用户代币的余额没有变动</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be87ab717581348\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor (uint i = 0; i &lt; cnt; i++) {\r\nbalances[_receivers[i]] = balances[_receivers[i]].add(_value);\r\nTransfer(msg.sender, _receivers[i], _value);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87ab717581348-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dec8be87ab717581348-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87ab717581348-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dec8be87ab717581348-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be87ab717581348-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">uint</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cnt</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dec8be87ab717581348-2\"><span class=\"crayon-v\">balances</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">_receivers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">balances</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">_receivers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">_value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dec8be87ab717581348-3\"><span class=\"crayon-e\">Transfer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sender</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_receivers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">_value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dec8be87ab717581348-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>这句是遍历 _receivers中的地址， 对每个地址做以下操作</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be87ae110363405\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbalances[_receivers[i]] = balances[_receivers[i]].add(_value);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87ae110363405-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be87ae110363405-1\"><span class=\"crayon-v\">balances</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">_receivers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">balances</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">_receivers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">_value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>_receivers中的地址的余额 = 原本余额+value</p>\n<p>所以 _receivers 中地址的余额 则加了57896044618658097711785492504343953926634992332820282019728792003956564819968 个代币！！！</p>\n<p><code>Transfer(msg.sender,</code> <code>_receivers[i],</code> <code>_value);</code> <code>}</code> 这句则只是把赠送代币的记录存下来！！！</p>\n<h1>总结</h1>\n<p>就一个简单的溢出漏洞，导致BEC代币的市值接近归0</p>\n<p>那么，开发者有没有考虑到溢出问题呢？</p>\n<p>其实他考虑了,</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/6f6fe129a8a1b4807f939685f09b9ac4.jpg\"><img class=\"aligncenter size-full wp-image-89113\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/6f6fe129a8a1b4807f939685f09b9ac4.jpg\" alt=\"v2-05da24da7d69dbeb1797e15c2f385517_hd\"></a></p>\n<p>可以看如上截图</p>\n<p>除了amount的计算外, 其他的给用户转钱 都用了safeMath 的方法（sub,add)</p>\n<p>那么 为啥就偏偏这一句没有用safeMath的方法呢。。。</p>\n<p>这就要用写代码的人了。。。</p>\n<h1>啥是safeMath</h1>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/c61bcd2cbca4602b595077bc8ba9e87a.jpg\"><img class=\"aligncenter size-full wp-image-89112\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/c61bcd2cbca4602b595077bc8ba9e87a.jpg\" alt=\"v2-05da24da7d69dbeb1797e15c2f385517_hd\"></a></p>\n<p>safeMath 是为了计算安全 而写的一个library</p>\n<p>我们看看他干了啥？为啥能保证计算安全.</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dec8be87b3793176243\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfunction mul(uint256 a, uint256 b) internal constant returns (uint256) {\r\nuint256 c = a * b;\r\nassert(a == 0 || c / a == b);\r\nreturn c;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87b3793176243-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dec8be87b3793176243-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87b3793176243-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dec8be87b3793176243-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dec8be87b3793176243-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dec8be87b3793176243-1\"><span class=\"crayon-e\">function </span><span class=\"crayon-e\">mul</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">uint256</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">uint256</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">internal </span><span class=\"crayon-e\">constant </span><span class=\"crayon-e\">returns</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">uint256</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dec8be87b3793176243-2\"><span class=\"crayon-i\">uint256</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dec8be87b3793176243-3\"><span class=\"crayon-st\">assert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dec8be87b3793176243-4\"><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dec8be87b3793176243-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>如上面的乘法. 他在计算后，用assert 验证了下结果是否正确！</p>\n<p>如果在上面计算 amount的时候，用了 mul的话， 则 <code>c</code> <code>/</code> <code>a</code> <code>==</code> <code>b</code> 也就是 验证 amount / cnt == _value</p>\n<p>这句会执行报错的，因为 0 / cnt 不等于 _value</p>\n<p>所以程序会报错！</p>\n<p>也就不会发生溢出了…</p>\n<p>那么 还有一个小问题，这里的 <code>assert</code> 好 <code>require</code> 好像是干的同一件事</p>\n<p>都是为了验证 某条语句是否正确！</p>\n<p>那么他俩有啥区别呢？</p>\n<p>用了assert的话，则程序的gas limit 会消耗完毕</p>\n<p>而require的话，则只是消耗掉当前执行的gas</p>\n<h2>总结</h2>\n<p>那么 我们如何避免这种问题呢？</p>\n<p>我个人看法是</p>\n<ol>\n<li>只要涉及到计算，一定要用safeMath</li>\n<li>代码一定要测试！</li>\n<li>代码一定要review！</li>\n<li>必要时，要请专门做代码审计的公司来 测试代码</li>\n</ol>\n<p>这件事后需要如何处理呢？</p>\n<p>目前，该方法已经暂停了（还好可以暂停）所以看过文章的朋友 不要去测试了…</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/04/56e8fb17b5c15594e775219660295f55.jpg\"><img class=\"aligncenter size-full wp-image-89114\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/56e8fb17b5c15594e775219660295f55.jpg\" alt=\"v2-05da24da7d69dbeb1797e15c2f385517_hd\"></a></p>\n<p>不过已经发生了的事情咋办呢？</p>\n<p>我能想到的是，快照在漏洞之前，所有用户的余额情况</p>\n<p>然后发行新的token，给之前的用户 发送等额的代币…</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89105\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89105votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89105\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a974965c0d516c7c492db731c8af0523afa0438b.jpg"}
{"url_object_id": "d46bda670adbb5e7786ca75d9979bc8a", "title": "手把手教你写网络爬虫（8）：彻底解决乱码问题", "url": "http://python.jobbole.com/89138/", "create_date": "2018/05/14", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/76b3926a3cb1335786bafbec805abaa6.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "实践项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8960736.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/76b3926a3cb1335786bafbec805abaa6.jpg\"><img class=\"aligncenter size-full wp-image-89152\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/76b3926a3cb1335786bafbec805abaa6.jpg\" alt=\"1368640-20180426083108287-1201983270\"></a></p>\n<p>字符编解码是爬虫里必学的一项知识，在我们的爬虫生涯中早晚会爬到乱码的网页，与其遇到时惊慌失措，不如早学早好，彻底避免乱码问题。</p>\n<h1>字符编码简介</h1>\n<p><strong>什么是字符集</strong></p>\n<p>在介绍字符编码之前，我们先了解下什么是字符集。</p>\n<p>字符(Character)是各种文字和符号的总称，包括各国家文字、标点符号、图形符号、数字等。字符集(Character set)是多个字符的集合，字符集种类较多，每个字符集包含的字符个数不同，常见字符集：ASCII字符集、GBK字符集、Unicode字符集等。</p>\n<p><strong>什么是字符编码</strong></p>\n<p>字符编码和字符集不同。字符集只是字符的集合，无法进行网络传送、处理，必须经编码后才能使用。如Unicode字符集可依不同需求以UTF-8、UTF-16、UTF-32等方式编码。</p>\n<p>字符编码就是以二进制的数字来对应字符集的字符。各个国家和地区在制定编码标准的时候，“字符的集合”和“编码”一般都是同时制定的。因此，平常我们所说的“字符集”，除了有“字符的集合”这层含义外，同时也包含了“编码”的含义。</p>\n<p><strong>常用字符集</strong></p>\n<p>简单介绍几个常见的。</p>\n<p>ASCII：</p>\n<p>ASCII是学计算机同学的启蒙字符集，一般是从这本书里学到的：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/01b9b725034a65cc5cc138e51495ec73.jpg\"><img class=\"aligncenter size-full wp-image-89154\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/01b9b725034a65cc5cc138e51495ec73.jpg\" alt=\"1368640-20180427084222299-735009224\"></a></p>\n<p>请允许我怀旧一下，以下引用谭浩强老师的讲解：</p>\n</div>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/1c57eb3fba64fc51255b5ff4cdccfa93.jpg\"><img class=\"aligncenter size-full wp-image-89155\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/1c57eb3fba64fc51255b5ff4cdccfa93.jpg\" alt=\"1368640-20180427084222299-735009224\"></a></p>\n<p>中文字符集：</p>\n<p>GB2312：包含6763个汉字。</p>\n<p>GBK：包含21003个汉字。GBK兼容GB2312，也就是说用GB2312编码的汉字可以用GBK来解码。</p>\n<p>GB18030：收录了70000个汉字，这么多是因为包含了少数民族文字。同样兼容GBK和GB2312。</p>\n<p>Unicode：Unicode 是为了解决传统的字符编码方案的局限而产生的，它为每种语言中的每个字符设定了统一并且唯一的二进制编码，以满足跨语言、跨平台进行文本转换、处理的要求。具有多种编码方式，如UTF-7、 UTF-8、UTF-16、UTF-32等。</p>\n<h1>为什么会产生乱码</h1>\n<p>简单的说乱码的出现是因为：编码和解码时用了不同的字符集。对应到真实生活中，就好比是一个英国人为了表示祝福在纸上写了bless（编码）。而一个法国人拿到了这张纸，由于在法语中bless表示受伤的意思，所以认为他想表达的是受伤（解码）。同理，在计算机中，一个用UTF-8编码后的字符，用GBK去解码。由于两个字符集的字库表不一样，同一个汉字在两个字符表的位置也不同，最终就会出现乱码。</p>\n<p>那么，爬虫中的乱码是怎么产生的，又该如何解决呢？</p>\n<h1>爬虫中的乱码</h1>\n<p>假设我们的爬虫是java开发的，网络请求库使用OkHttp，网页存储到MongoDB中。乱码产生的过程如下：</p>\n<ol>\n<li>OkHttp请求指定url，返回了一个GBK编码的网页字节流；</li>\n<li>OkHttp以默认UTF-8进行解码（此时已乱），并以UTF-16方式编码为Java的String类型，返回给处理程序。（为什么以UTF-16方式编码？因为Java的数据在内存中的编码是UTF-16）；</li>\n<li>爬虫拿到这个编码错误的String类型的网页，调用MongoDB的API，将数据编码为UTF-8存储到数据库中。所以最后在数据库看到的数据是乱的。</li>\n</ol>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/f5c1da5b7e3c912393447904e0bb8f83.jpg\"><img class=\"aligncenter size-full wp-image-89156\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f5c1da5b7e3c912393447904e0bb8f83.jpg\" alt=\"1368640-20180427084222299-735009224\"></a></p>\n<p>显然，导致乱码的根本原因就是OkHttp在最初使用了错误的解码方式进行解码。所以要解决这个问题，就要让OkHttp知道网页的编码类型，进行正确的解码。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/19560587cba2e5ee16985e2eacc5844a.jpg\"><img class=\"aligncenter size-full wp-image-89157\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/19560587cba2e5ee16985e2eacc5844a.jpg\" alt=\"1368640-20180427084222299-735009224\"></a></p>\n<p>网页有两种约定的方式告诉爬虫自己使用的是什么编码方式：</p>\n<p>1. Http协议的响应头中的约定：</p>\n<p>Content-Type: text/html;<strong>charset=utf-8</strong></p>\n<p>2. Html中meta标签中的约定：</p>\n<p>&lt;meta http-equiv=”Content-Type” content=”text/html; <strong>charset=UTF-8</strong>“/&gt;</p>\n<p>从约定中获取网页的编码后，Okhttp就可以正确的解码了。然而实际情况却并不乐观，很多网页并不遵守约定，缺少这两个信息。有人通过Alexa统计各国遵守这个约定的网页数：</p>\n<div align=\"center\">\n<table border=\"1\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\"><strong>语言</strong></p>\n</td>\n<td valign=\"top\">\n<p align=\"center\"><strong>URL</strong><strong>后缀</strong></p>\n</td>\n<td valign=\"top\">\n<p align=\"center\"><strong>URL</strong><strong>数</strong></p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\"><strong>HTTP</strong><strong>头中包含</strong></p>\n<p align=\"center\"><strong>charset</strong><strong>的URL数</strong></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Chinese</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.cn</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">10086</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">3776</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">English</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.us/.uk</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">21565</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">13223</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Russian</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.ru</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">39453</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">28257</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Japanese</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.jp</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">20339</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">6833</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Arabic</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.iq</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">1904</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">1093</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">German</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.de</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">35318</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">23225</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Persian</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.ir</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">7396</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">4018</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Indian</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">.in</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">12236</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">4867</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"86\">\n<p align=\"center\">Total</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">all</p>\n</td>\n<td valign=\"top\">\n<p align=\"center\">148297</p>\n</td>\n<td valign=\"top\" width=\"143\">\n<p align=\"center\">85292</p>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>结果表明我们不能被动的依赖网页告诉我们，而要根据网页内容来主动探测其编码类型。</p>\n<h3>探测字符编码</h3>\n<p><strong>什么是字符编码自动检测?</strong></p>\n<p>它是指当面对一串不知道编码信息的字节流的时候，尝试着确定一种编码方式以使我们能够读懂其中的文本内容。它就像我们没有解密钥匙的时候，尝试破解出编码。</p>\n<p><strong>那不是不可能的吗?</strong></p>\n<p>通常来说，是的，不可能。但是，有一些编码方式为特定的语言做了优化，而语言并非随机存在的。有一些字符序列在某种语言中总是会出现，而其他一些序列对该语言来说则毫无意义。一个熟练掌握英语的人翻开报纸，然后发现“txzqJv 2!dasd0a QqdKjvz”这样一些序列，他会马上意识到这不是英语（即使它完全由英语中的字母组成）。通过研究许多具有“代表性(typical)”的文本，计算机算法可以模拟人的这种对语言的感知，并且对一段文本的语言做出启发性的猜测。换句话说就是，检测编码信息就是检测语言的类型，并辅之一些额外信息，比如每种语言通常会使用哪些编码方式。</p>\n<p><strong>这样的算法存在吗?</strong></p>\n<p>结果证明，是的，它存在。所有主流的浏览器都有字符编码自动检测的功能，因为互联网上总是充斥着大量缺乏编码信息的页面。Mozilla Firefox包含有一个自动检测字符编码的库，已经移植到Python中，叫做chardet。</p>\n<p><strong>chardet</strong><strong>使用</strong></p>\n<p>安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfbb033cda935622447\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npip install chardet</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfbb033cda935622447-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfbb033cda935622447-1\"><span class=\"crayon-e\">pip </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">chardet</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfbb033ced550336985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; import urllib\r\n\r\n&gt;&gt;&gt; rawdata = urllib.urlopen('http://www.jd.com/').read()\r\n\r\n&gt;&gt;&gt; import chardet\r\n\r\n&gt;&gt;&gt; chardet.detect(rawdata)\r\n\r\n{'confidence': 0.98999999999999999, 'language': '', 'encoding': 'utf-8'}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfbb033ced550336985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfbb033ced550336985-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfbb033ced550336985-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfbb033ced550336985-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfbb033ced550336985-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfbb033ced550336985-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfbb033ced550336985-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfbb033ced550336985-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfbb033ced550336985-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfbb033ced550336985-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">urllib</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfbb033ced550336985-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfbb033ced550336985-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rawdata</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">urllib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">urlopen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'http://www.jd.com/'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfbb033ced550336985-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfbb033ced550336985-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chardet</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfbb033ced550336985-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfbb033ced550336985-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chardet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">detect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rawdata</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfbb033ced550336985-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfbb033ced550336985-9\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'confidence'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.98999999999999999</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'language'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'encoding'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0113 seconds] -->\r\n<p>注意：返回结果中有confidence，即置信度，这说明探测结果不是100%准确的。</p>\n<p>使用其他语言的小伙伴不用担心，chardet在很多语言中都有移植版。不过C++好像没有太好的选择，可以考虑使用IBM的ICU(<a href=\"http://site.icu-project.org/\">http://site.icu-project.org/</a>)。</p>\n<h1>扩展阅读</h1>\n<p>《A composite approach to language/encoding detection》</p>\n<p>(<a href=\"https://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html\">https://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html</a>)</p>\n<p>这篇论文解释了Chardet背后使用的探测算法，分别是“编码模式方法”、“字符分布方法”和“双字符序列分布方法”。最后说明了三种方法组合使用的必要性，并举例说明如何组合使用。</p>\n<p>《Charset Encoding Detection of HTML Documents A Practical Experience》</p>\n<p>(<a href=\"https://github.com/shabanali-faghani/IUST-HTMLCharDet/blob/master/wiki/Charset-Encoding-Detection-of-HTML-Documents.pdf\">https://github.com/shabanali-faghani/IUST-HTMLCharDet/blob/master/wiki/Charset-Encoding-Detection-of-HTML-Documents.pdf</a>)</p>\n<p>利用现有的探测技术，通过一些技巧来提高探测的准确性。主要原理是组合使用Mozilla CharDet和IBM ICU，并在探测前巧妙的去掉了HTML标签。虽然这是伊朗大学发的Paper，但据说这种方法已经在生产环境取得了很好的效果，目前正应用在一个10亿级别数据量的大型爬虫上。</p>\n<h1>下一步</h1>\n<p>最近聊的话题越来越沉重，想必大家也累了。下期打算带大家一起放松一下，聊点轻松的话题。从系列的开篇到现在也有半年了，技术领域有了不小的更新，出现了一些好用的工具，我们需要替换哪些工具呢？请听下回分解！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89138\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89138votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89138\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/0ef74122b1854e07ed75a71f75780e136d33aeb1.jpg"}
{"url_object_id": "13c76f46dff51efba86e5e4da283eae9", "title": "5 个用 Python 编写 web 爬虫的方法", "url": "http://python.jobbole.com/89164/", "create_date": "2018/05/20", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/f593a3d018db14d76993745211fb616b.jpeg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "1", "tags": "实践项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://blog.adnansiddiqi.me/5-strategies-to-write-unblock-able-web-scrapers-in-python/\">ADNAN</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/write-web-scrapers-in-python\">oschina</a>   </div><p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/f593a3d018db14d76993745211fb616b.jpeg\"><img class=\"aligncenter size-full wp-image-89165\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/f593a3d018db14d76993745211fb616b.jpeg\" alt=\"112834_QWiv_2896879\"></a></p>\n<p>大家在读<a href=\"http://blog.adnansiddiqi.me/tag/scraping/\" target=\"_blank\" rel=\"nofollow\">爬虫系列</a>的帖子时常常问我怎样写出不阻塞的爬虫，这很难，但可行。通过实现一些小策略可以让你的网页爬虫活得更久。那么今天我就将和大家讨论这方面的话题。</p>\n<h1 id=\"content_h3_2_5\"><strong>用户代理</strong></h1>\n<p>你需要关心的第一件事是设置用户代理。 用户代理是用户访问的工具，并告知服务器用户正在使用哪个网络浏览器访问网站。 如果未设置用户代理，许多网站不会让你查看内容。 如果你正在使用rquests库，可以执行如下操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e02f9123e6003742675\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nheaders = {\r\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\r\n    }\r\nr = requests.get('example.com',headers=headers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123e6003742675-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123e6003742675-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123e6003742675-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123e6003742675-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e02f9123e6003742675-1\"><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123e6003742675-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'user-agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123e6003742675-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123e6003742675-4\"><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'example.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>你可以通过在 Google 搜索栏中输入 User-Agent 来获取用户代理的信息，并且它会返回你当前的用户代理信息。</p>\n<p>现在，你已经有了一个用户代理，但如何去使用它？ 那么，最好的方法是从文本文件、数据库、Python 的列表中选择一个随机的 User-Agent 。 <a href=\"https://udger.com/resources/ua-list\" target=\"_blank\" rel=\"nofollow\">Udger</a> 分享了大量的 UA w.r.t 浏览器。 比如，对于 Chrome 而言，它看起来像<a href=\"https://udger.com/resources/ua-list/browser-detail?browser=Chrome\" target=\"_blank\" rel=\"nofollow\">这样</a>，对 Firefox 来说，又像<a href=\"https://udger.com/resources/ua-list/browser-detail?browser=FIREFOX\" target=\"_blank\" rel=\"nofollow\">这样</a>。 现在让我们来创建一个函数，它将返回一个随机 UA ，你可以在请求中使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e02f9123f1426171841\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport numpy as np\r\ndef get_random_ua():\r\n    random_ua = ''\r\n    ua_file = 'ua_file.txt'\r\n    try:\r\n        with open(ua_file) as f:\r\n            lines = f.readlines()\r\n        if len(lines) &gt; 0:\r\n            prng = np.random.RandomState()\r\n            index = prng.permutation(len(lines) - 1)\r\n            idx = np.asarray(index, dtype=np.integer)[0]\r\n            random_proxy = lines[int(idx)]\r\n    except Exception as ex:\r\n        print('Exception in random_ua')\r\n        print(str(ex))\r\n    finally:\r\n        return random_ua</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f1426171841-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f1426171841-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f1426171841-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f1426171841-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f1426171841-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f1426171841-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f1426171841-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f1426171841-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f1426171841-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-1\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f1426171841-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_ua</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">random_ua</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f1426171841-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ua_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'ua_file.txt'</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f1426171841-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ua_file</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">lines</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">readlines</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f1426171841-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">prng</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">RandomState</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f1426171841-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prng</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">permutation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">idx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">asarray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">integer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f1426171841-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">random_proxy</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lines</span><span class=\"crayon-sy\">[</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">idx</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">except</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">Exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ex</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f1426171841-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Exception in random_ua'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ex</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f1426171841-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">finally</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f1426171841-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">random_ua</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p>ua_file.txt 包含一个来自我上面共享的网站的每行 UA 。 函数 get_random_ua 将始终从该文件中返回唯一的 UA 。 你现在可以调用如下函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e02f9123f5661819939\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nuser_agent = get_random_ua()\r\nheaders = {\r\n        'user-agent': user_agent,\r\n    }\r\nr = requests.get('example.com',headers=headers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f5661819939-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f5661819939-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f5661819939-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f5661819939-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f5661819939-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f5661819939-1\"><span class=\"crayon-v\">user_agent</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_ua</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f5661819939-2\"><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f5661819939-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'user-agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_agent</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f5661819939-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f5661819939-5\"><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'example.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<h1 id=\"content_h3_3_5\"><strong>Referrers</strong></h1>\n<p>接下来你需要设置的是引用。 一般的规则是，如果它是一个列表页面或主页，那么你可以设置该国家的 Google 主页网址。 例如，如果我正在爬取 olx.com.pk ，那么我会设置 https://google.com.pk 而不是 https://google.ca。</p>\n<p>如果你要抓取各个产品页面，可以在引用中设置相关类别的网址，或者可以找到要抓取的域的<a href=\"https://en.wikipedia.org/wiki/Backlink\" target=\"_blank\" rel=\"nofollow\">反向链接</a>。 我通常使用 SEMRush 来这么做。针对链接 https://www.olx.com.pk/furniture-home-decor/categories/  通过 SEMRush 会返回如下所示的内容：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/e89baf6b56738f7dd038eac8e04df1c5.png\"><img class=\"aligncenter size-full wp-image-89166\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e89baf6b56738f7dd038eac8e04df1c5.png\" alt=\"113036_HEC2_2896879\"></a></p>\n<p>如果你点击查看放大的图像，你可以看到一些链接指向我所需的类别。一旦你收集所有这些真实的反向链接，你可以通过复制逻辑 insideget_random_ua（）返回随机引用，并将它们用作引用。 如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e02f9123f9676069631\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nheaders = {\r\n        'user-agent': user_agent,\r\n        'referer':referer\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f9676069631-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f9676069631-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123f9676069631-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f9123f9676069631-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f9676069631-1\"><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f9676069631-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'user-agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user_agent</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f9123f9676069631-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'referer'</span><span class=\"crayon-o\">:</span><span class=\"crayon-i\">referer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f9123f9676069631-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h1 id=\"content_h3_4_5\">代理 IP</h1>\n<p>我不得不强调这一点。如果认真研究，那么你必须使用多个代理 IP 来避免阻塞。 大多数网站会根据你的服务器或主机提供商的静态 IP 来阻止抓取工具。 这些网站使用智能的工具来确定某个 IP 或 IP 池的方式，并简单地阻止它们。 这也是为什么建议购买几个 IP 地址，50-100个至少要避免阻塞。有许多可用的服务，但我对 Shaders（现在称为 <a href=\"https://oxylabs.io/pricing\" target=\"_blank\" rel=\"nofollow\">OxyLabs</a> ）感到满意。 它们虽然很贵，但服务质量很好。 确保你在订购多个 IP 时，要求提供随机 IP 或至少不遵循 1.2.3.4 到 1.2.3.100 等特定模式。站点管理员将很简单的设置 IP 地址不全部为 1.2.3.* 。 就这么简单。</p>\n<p>如果你正在使用请求，你可以像下面这样使用它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e02f9123fd996395544\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nr = requests.get('example.com',headers=headers,proxies={'https': proxy_url})</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e02f9123fd996395544-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e02f9123fd996395544-1\"><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'example.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">proxies</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'https'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proxy_url</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>如果你在 Selenium 使用代理 IP ，那么这将有点棘手。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e02f912400184300383\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nr = requests.get('example.com',headers=headers,proxies={'https': proxy_url})\r\nproxy = get_random_proxy().replace('\\n', '')\r\n        service_args = [\r\n            '--proxy={0}'.format(proxy),\r\n            '--proxy-type=http',\r\n            '--proxy-auth=user:path'\r\n        ]\r\n        print('Processing..' + url)\r\n        driver = webdriver.PhantomJS(service_args=service_args)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912400184300383-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912400184300383-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912400184300383-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912400184300383-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912400184300383-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912400184300383-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912400184300383-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912400184300383-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912400184300383-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e02f912400184300383-1\"><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">requests</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'example.com'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">headers</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">headers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">proxies</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'https'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proxy_url</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912400184300383-2\"><span class=\"crayon-v\">proxy</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_proxy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">replace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'\\n'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f912400184300383-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">service_args</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912400184300383-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'--proxy={0}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">proxy</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f912400184300383-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'--proxy-type=http'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912400184300383-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'--proxy-auth=user:path'</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f912400184300383-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912400184300383-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Processing..'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f912400184300383-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">driver</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PhantomJS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">service_args</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">service_args</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>不用说，get_random_proxy() 是返回一个唯一且随机代理的方法，就像上面获得唯一且随机的 UA 和 Referer 一样。</p>\n<p>你可以思考一个这样的系统，在系统中你可以设置一个 IP 每天或每小时访问网站频率，如果它超过了，那么它将被放入一个笼子里直到第二天。 我所在的公司设计了一个这样的系统，不仅设置了 IP 访问频率，还记录了哪个 IP 被阻止。 最后，我只是使用代理服务提供者仅替换这些代理。 由于这超出了本文的范围，所以我不会详细介绍它。</p>\n<h1 id=\"content_h3_5_5\">Request Headers</h1>\n<p>到目前为止，事情你都已经做得很好，但是仍然有些狡猾的网站要求你做更多的事情。当你访问页面的时候他们会查找特定的请求响应头信息，如果特定的头信息没有被发现，他们会阻止内容显示或者展示一个虚假的内容。模拟一个你想访问的网站的请求是非常简单的。例如，比如你正准备访问一个 Craigslist URL ，并且想知道哪个头部信息是需要的。进入 Chrome/Firefox 浏览器，检查正在访问的页面，你应该会看到下面这些内容：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/4f5f113a894dd81933759d0a88d2f973.png\"><img class=\"aligncenter size-full wp-image-89167\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/4f5f113a894dd81933759d0a88d2f973.png\" alt=\"113036_HEC2_2896879\"></a></p>\n<p>如果你点击了图标并查看，你能找到除了 referer 和 user-agent 之外的大量信息。你能一次性全都实现也可以一个个的实现并测试。无论访问哪个网站，我总是去设置这些信息。请确保你不只是复制粘贴这些信息去访问所有网站，因为这些信息通常会因网站不同而改变。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e02f912405899836138\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nheaders = {\r\n        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36',\r\n        'referrer': 'https://google.com',\r\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',\r\n        'Accept-Encoding': 'gzip, deflate, br',\r\n        'Accept-Language': 'en-US,en;q=0.9',\r\n        'Pragma': 'no-cache',\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912405899836138-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912405899836138-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912405899836138-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912405899836138-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912405899836138-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912405899836138-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912405899836138-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912405899836138-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e02f912405899836138-1\"><span class=\"crayon-v\">headers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912405899836138-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'user-agent'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f912405899836138-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'referrer'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://google.com'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912405899836138-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'Accept'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f912405899836138-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'Accept-Encoding'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'gzip, deflate, br'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912405899836138-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'Accept-Language'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'en-US,en;q=0.9'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f912405899836138-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'Pragma'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'no-cache'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912405899836138-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h1 id=\"content_h3_6_5\">延时</h1>\n<p>在请求之间放置一些延迟总是很好的。我使用 numpy.random.choice() 来实现这一目标，该函数将在我想延迟的服务中传递随机数列表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e02f912408500904368\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndelays = [7, 4, 6, 2, 10, 19]\r\ndelay = np.random.choice(delays)\r\ntime.sleep(delay)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912408500904368-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e02f912408500904368-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e02f912408500904368-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e02f912408500904368-1\"><span class=\"crayon-v\">delays</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e02f912408500904368-2\"><span class=\"crayon-v\">delay</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">choice</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delays</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e02f912408500904368-3\"><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">delay</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>如果你还没有使用过 numpy 库，你也可以使用 random.choice 来达到同样的目的。</p>\n<p>如果你真的很急，那么你可以并行执行 URL ，我之前在<a href=\"http://blog.adnansiddiqi.me/how-to-speed-up-your-python-web-scraper-by-using-multiprocessing/\" target=\"_blank\" rel=\"nofollow\">此文</a>中解释过了。</p>\n<h1 id=\"content_h3_7_5\">结语</h1>\n<p>Web 爬虫被阻塞的不确定性永远不会变为零，但你总是可以采取一些措施来规避它。我讨论了一些你应该以某种或其他方式在 web 爬虫中实现的策略。</p>\n<p>如果你知道其他策略或技巧，请通过分享评论让我获知。一如既往地，期待你的反馈。</p>\n<p><em>本文最初发表在</em><em><a href=\"http://blog.adnansiddiqi.me/5-strategies-to-write-unblock-able-web-scrapers-in-python/\" target=\"_blank\" rel=\"nofollow\">此</a>。</em></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89164\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89164votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89164\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/f8bc0f5b431e38b4a2980334305e4135ff4724a7.jpg"}
{"url_object_id": "0393183126b85e4c1d582f196d94c2e3", "title": "手把手教你写网络爬虫（7）：URL去重", "url": "http://python.jobbole.com/89140/", "create_date": "2018/05/14", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/54dd234f4e132436240c22b5c0b1f7db.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "实践项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8949393.html\">拓海</a>   </div><p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/54dd234f4e132436240c22b5c0b1f7db.jpg\"><img class=\"aligncenter size-full wp-image-89145\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/54dd234f4e132436240c22b5c0b1f7db.jpg\" alt=\"Yosemite National Park, California\"></a></p>\n<p>本期我们来聊聊URL去重那些事儿。以前我们曾使用Python的字典来保存抓取过的URL，目的是将重复抓取的URL去除，避免多次抓取同一网页。爬虫会将待抓取的URL放在todo队列中，从抓取到的网页中提取到新的URL，在它们被放入队列之前，首先要确定这些新的URL是否被抓取过，如果之前已经抓取过了，就不再放入队列。</p>\n<p>有别于单机系统，在分布式系统中，这些URL应该存放在公共缓存中，才能让多个爬虫实例共享，我们继续使用Redis缓存这些数据。URL既可以存储在Redis的Set数据结构中，也可以将URL作为Key存储为Redis的String类型。至于这两种方案各有什么优缺点，就留给读者自己去思考了。</p>\n<h1>直接存储URL</h1>\n<p>将URL以字符串的形式直接存储到内存中。保守估计一下URL的平均长度是100字节，那么1亿个URL所占的内存是: 100000000 * 0.0001MB = 10000MB，约等于10G。这也不是不能用，占用的空间再大都能通过扩容来解决。</p>\n<p>问题是，如果一个服务器存不下这么多URL该怎么办呢？其实也简单，明确每台服务器的分工，也就是说得到一个URL就知道要交给哪台服务器存储，每台服务器只存储一类URL，比较简单的实现方式就是对URL先哈希再取模。虽然能用，但还是有很大优化空间的。</p>\n<h1>存储消息摘要</h1>\n<p>MD5是一个消息摘要算法，它的用途很广泛，我们这里用它来压缩URL。</p>\n<p>消息摘要算法的特点：</p>\n<ol>\n<li>无论输入的消息有多长，计算出来的消息摘要的长度总是固定的。</li>\n<li>只要输入的消息不同，对其进行摘要以后产生的摘要消息也必不相同；但相同的输入必会产生相同的输出。</li>\n<li>消息摘要是单向、不可逆的。只能进行正向的信息摘要，而无法从摘要中恢复出任何的原始消息。</li>\n</ol>\n<p>以上特点说明我们可以通过存储URL的MD5来实现去重功能，因为不同的URL，MD5不同，相同的URL，MD5相同嘛。</p>\n<p>以前我们要存的URL是这样的：<a href=\"http://news.baidu.com/ns?ct=1&amp;rn=20&amp;ie=utf-8&amp;bs=%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D&amp;rsv_bp=1&amp;sr=0&amp;cl=2&amp;f=8&amp;prevct=no&amp;tn=news&amp;word=%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D&amp;rsv_sug3=1&amp;rsv_sug4=6&amp;rsv_sug1=1&amp;rsv_sug=1\">http://news.baidu.com/ns?ct=1&amp;rn=20&amp;ie=utf-8&amp;bs=%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D&amp;rsv_bp=1&amp;sr=0&amp;cl=2&amp;f=8&amp;prevct=no&amp;tn=news&amp;word=%E4%BA%AC%E4%B8%9C%E9%87%91%E8%9E%8D&amp;rsv_sug3=1&amp;rsv_sug4=6&amp;rsv_sug1=1&amp;rsv_sug=1</a></p>\n<p>对应的MD5值是这样的：d552b0b40e21d06d73a1a0938635eb1a</p>\n<p>怎么样？省了不少空间吧？</p>\n<p>有人说，拓海你不要骗我，这个算法的输入是个无穷集合，而输出是一个有限集合，必然会存在碰撞的，也就是存在不同的URL算出相同的MD5。这会导致去重时误判，少抓数据！</p>\n<p>好吧，从理论上来说，必然会出现这种情况。可是出现这种情况的概率是多少呢？下面就算算两个不同URL产生相同消息摘要的概率。</p>\n<p>以下是三种常见的消息摘要算法，分别是32、64、128字节，每个字节是十六进制数字的字符，它们的可能值数量分别是：</p>\n<p>md5:   16^32  = 2^128 = 3.4 * 10^38</p>\n<p>sha256: 16^64  = 2^256 = 1.2 × 10^77</p>\n<p>sha512: 16^128 = 2^512 = 1.3 × 10^154</p>\n<p>你可能会说，我是数字盲，我不知道这个数大不大。好吧，我为你找到了两个直观的参照物：</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/3428b6829af3cede765160e8e935c545.jpg\"><img class=\"aligncenter size-full wp-image-89147\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/3428b6829af3cede765160e8e935c545.jpg\" alt=\"1368640-20180426083108287-1201983270\"></a></p>\n<p>IPv6编码地址数：2^128（约3.4×10^38）</p>\n<p>IPv6是IETF设计的用于替代现行版本IP协议（IPv4）的下一代IP协议，号称可以为全世界的每一粒沙子编上一个网址。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2018/05/b528572c8d4aa5fcb2fb7b2db61546d5.jpg\"><img class=\"aligncenter size-full wp-image-89150\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/b528572c8d4aa5fcb2fb7b2db61546d5.jpg\" alt=\"1368640-20180426083145237-797515647\"></a></p>\n<p>可观测宇宙中的原子总数：10^80</p>\n<p>上图是哈勃望远镜对准天球上一个特定的区域（相当于整个天球面积的1/12700000）进行长时间的图像拍摄，最后在这个区域里面找到了约有10000个星系。这样可以合理的推测，目前我们能用天文望远镜观测到的宇宙范围内有1.27×10^11个星系。</p>\n<p>一个星系的恒星数(行星忽略不计了)目前普遍接受的一个数量级是4×10^11个。</p>\n<p>像太阳这样的恒星的质量是1.96×10^30kg。</p>\n<p>这就可以算出宇宙的总质量为9.96×10^55kg。</p>\n<p>一个氢原子的质量是1.66×10^-24g。</p>\n<p>用宇宙质量除以一个氢原子的质量就得出了目前可观测宇宙中的近似原子个数是10^80个。</p>\n<p>可见，不同URL产生相同消息摘要的可能性非常小，简直像大海捞针。。。不是，简直像宇宙中捞原子一样难，所以就放心使用吧。</p>\n<p>消息摘要实现了对URL的压缩，但压缩后的大小还是和原来在一个数量级，空间效率并没有质的提升。有没有办法只用几个bit来唯一标识一个URL呢？有！布隆过滤器就是专门解决这类问题的。</p>\n<h1>布隆过滤器</h1>\n<p>Bloom Filter是一种空间效率很高的随机数据结构，它利用bit数组很简洁地表示一个集合，并能判断一个元素是否属于这个集合。Bloom Filter的这种高效是有一定代价的：在判断一个元素是否属于某个集合时，有可能会把不属于这个集合的元素误认为属于这个集合（false positive）。因此，Bloom Filter不适合那些“零错误”的应用场合。而在能容忍低错误率的应用场合下，Bloom Filter通过极少的错误换取了存储空间的极大节省。</p>\n<p>它的原理很简单，首先需要准bit数组（所有位初始化为0）和k个独立hash函数。将hash函数对应的值的位数组置1，查找时如果发现所有hash函数对应位都是1说明存在，否则不存在。很明显这个过程并不保证查找的结果是100%正确的。</p>\n<p>如何根据输入元素个数n，确定bit数组m的大小及hash函数个数呢？当hash函数个数k=(ln2)*(m/n)时错误率最小。在错误率不大于E的情况下，m至少要等于n*lg(1/E)才能表示任意n个元素的集合。但m还应该更大些，因为还要保证bit数组里至少一半为0，则m应该&gt;=nlg(1/E)*lge ，大概就是nlg(1/E)的1.44倍。假设错误率为0.01，则此时m应是n的13倍。这样k大概是8个。</p>\n<p>Google的Guava基础库里有布隆过滤器的实现，非常的简洁和有深度，我们一起来学习一下这段java代码。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df11474ade979308394\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic &lt;T&gt; boolean put(T object, Funnel&lt;? super T&gt; funnel, int numHashFunctions, BitArray bits) {\r\n    long bitSize = bits.bitSize();\r\n    long hash64 = Hashing.murmur3_128().hashObject(object, funnel).asLong();\r\n    int hash1 = (int) hash64;\r\n    int hash2 = (int) (hash64 &gt;&gt;&gt; 32);\r\n\r\n    boolean bitsChanged = false;\r\n    for (int i = 1; i &lt;= numHashFunctions; i++) {\r\n        int combinedHash = hash1 + (i * hash2);\r\n        // Flip all the bits if it's negative (guaranteed positive number)\r\n        if (combinedHash &lt; 0) {\r\n            combinedHash = ~combinedHash;\r\n        }\r\n        bitsChanged |= bits.set(combinedHash % bitSize);\r\n    }\r\n    return bitsChanged;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ade979308394-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ade979308394-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ade979308394-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ade979308394-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ade979308394-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ade979308394-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ade979308394-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ade979308394-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ade979308394-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-1\"><span class=\"crayon-v\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">boolean </span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Funnel</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">super</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">funnel</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numHashFunctions</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">BitArray </span><span class=\"crayon-v\">bits</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ade979308394-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bitSize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bits</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bitSize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Hashing</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">murmur3_128</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hashObject</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">funnel</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">asLong</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ade979308394-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash64</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">hash64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ade979308394-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">boolean </span><span class=\"crayon-v\">bitsChanged</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ade979308394-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">numHashFunctions</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hash2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ade979308394-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Flip </span><span class=\"crayon-k \">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">bits </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">it</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">negative</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">guaranteed </span><span class=\"crayon-e\">positive </span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ade979308394-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ade979308394-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">bitsChanged</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bits</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">combinedHash</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bitSize</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ade979308394-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bitsChanged</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ade979308394-17\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0055 seconds] -->\r\n<p><strong>01</strong> 函数的功能是把一条数据hash后保存到BitArray中，如果BitArray有变化则返回true，否则返回false。参数是数据、hash函数个数、BitArray地址。</p>\n<p><strong>03</strong> 使用murmur3 hash出一个long型的值。为什么是一个，不应该是numHashFunctions个吗？请往下看。</p>\n<p><strong>04 05</strong> 把hash64切成两半，变成hash1和hash2。</p>\n<p><strong>08 09</strong> 重点来了，numHashFunctions个hash函数原来是这么来的：hash1+(i*hash2)。Excuse me? 这种操作太随意了吧？不用担心，请看《Less Hashing, Same Performance: Building a Better Bloom Filter》，里面论述了这种操作不会影响布隆过滤器的性能：A standard technique from the hashing literature is to use two hash functions h<sub>1</sub>(x) and h<sub>2</sub>(x) to simulate additional hash functions of the form <strong>g<sub>i</sub>(x) = h<sub>1</sub>(x) + ih<sub>2</sub>(x)</strong>. We demonstrate that this technique can be usefully applied to Bloom filters and related data structures. Specifically, only two hash functions are necessary to effectively implement a Bloom filter without any loss in the asymptotic false positive probability.这个优化非常有用，毕竟hash的代价还是很大的。</p>\n<p><strong>11 12</strong> 是负的就取反（这里的操作都很粗暴）。</p>\n<p><strong>14</strong> 设置BitArray里对应的bit，下面进入set()里看看。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df11474ae9223602384\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nboolean set(long index) {\r\n    if (!get(index)) {\r\n        data[(int) (index &gt;&gt;&gt; 6)] |= (1L &lt;&lt; index);\r\n        bitCount++;\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n  \r\nboolean get(long index) {\r\n    return (data[(int) (index &gt;&gt;&gt; 6)] &amp; (1L &lt;&lt; index)) != 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ae9223602384-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ae9223602384-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ae9223602384-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ae9223602384-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ae9223602384-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ae9223602384-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ae9223602384-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ae9223602384-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ae9223602384-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ae9223602384-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df11474ae9223602384-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df11474ae9223602384-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df11474ae9223602384-1\"><span class=\"crayon-e\">boolean </span><span class=\"crayon-k \">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ae9223602384-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ae9223602384-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1L</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ae9223602384-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">bitCount</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ae9223602384-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ae9223602384-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ae9223602384-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ae9223602384-8\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ae9223602384-9\"><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ae9223602384-10\"><span class=\"crayon-e\">boolean </span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0df11474ae9223602384-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1L</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df11474ae9223602384-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p><strong>02</strong> 先get()一下，看看是不是已经置为1。</p>\n<p><strong>03</strong> index右移6位就是除以64，说明data是long型的数组，除以64就定位到了bit所在的数组下标。1L左移index位，定位到了bit在long中的位置。</p>\n<h1>下一步</h1>\n<p>以上就是URL去重的一点思路，希望对大家有帮助。下期打算为大家介绍下字符编解码，以及乱码的完美解决方案。再见！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89140\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89140votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89140\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/8368f0559c025d749c0199fbe64b0976208ce37e.jpg"}
{"url_object_id": "b021f78faf856c4a77a6007c2d99d30b", "title": "使用交互式 shell 来增强你的 Python", "url": "http://python.jobbole.com/89169/", "create_date": "2018/05/21", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/8ef4df4888b257b5ea7bbd4b033a519c.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "基础知识", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://fedoramagazine.org/enhance-python-interactive-shell/\">Clément Verna</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9658-1.html\"> linux中国 / geekpi</a>   </div><p>Python 编程语言已经成为 IT 中使用的最流行的语言之一。成功的一个原因是它可以用来解决各种问题。从网站开发到数据科学、机器学习到任务自动化，Python 生态系统有丰富的框架和库。本文将介绍 Fedora 软件包集合中提供的一些有用的 Python shell 来简化开发。</p>\n<div id=\"article_content\">\n<h1 id=\"toc_1\">Python Shell</h1>\n<p>Python Shell 让你以交互模式使用解释器。这在测试代码或尝试新库时非常有用。在 Fedora 中，你可以通过在终端会话中输入 <code>python3</code> 来调用默认的 shell。虽然 Fedora 提供了一些更高级和增强的 shell。</p>\n<h1 id=\"toc_2\">IPython</h1>\n<p>IPython 为 Python shell 提供了许多有用的增强功能。例如包括 tab 补全，对象内省，系统 shell 访问和命令历史检索。许多功能也被 <a href=\"https://ipython.org/notebook.html\">Jupyter Notebook</a> 使用，因为它底层使用 IPython。</p>\n<h2 id=\"toc_3\">安装和运行 IPython</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd89c6debd269524660\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndnf install ipython3\r\nipython3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd89c6debd269524660-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd89c6debd269524660-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd89c6debd269524660-1\"><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">ipython3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd89c6debd269524660-2\"><span class=\"crayon-v\">ipython3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>使用 tab 补全会提示你可能的选择。当你使用不熟悉的库时，此功能会派上用场。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/476308aa38bdddcfb2f15764f8b8a937.png\" alt=\"\"></p>\n<p>如果你需要更多信息，输入 <code>?</code> 命令来查看文档。对此的更多详细信息，你可以使用 <code>??</code> 命令。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/2db56ed4c41178cdbde6a72faac014c9.png\" alt=\"\"></p>\n<p>另一个很酷的功能是使用 <code>!</code> 字符执行系统 shell 命令的能力。然后可以在 IPython shell 中引用该命令的结果。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ea504d69c2a2015a5528ca213a99fe3b.png\" alt=\"\"></p>\n<p>IPython 完整的功能列表可在<a href=\"https://ipython.readthedocs.io/en/stable/overview.html#main-features-of-the-interactive-shell\">官方文档</a>中找到。</p>\n<h1 id=\"toc_4\">bpython</h1>\n<p>bpython 并不能像 IPython 做那么多，但它却在一个简单的轻量级包中提供了一系列有用功能。除其他功能之外，bpython 提供：</p>\n<ul>\n<li>内嵌语法高亮显示</li>\n<li>在你输入时提供自动补全建议</li>\n<li>可预期的参数列表</li>\n<li>能够将代码发送或保存到 pastebin 服务或文件中</li>\n</ul>\n<h2 id=\"toc_5\">安装和运行 bpython</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd89c6dec6552625510\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndnf install bpython3\r\nbpython3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd89c6dec6552625510-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd89c6dec6552625510-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd89c6dec6552625510-1\"><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-e\">bpython3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd89c6dec6552625510-2\"><span class=\"crayon-v\">bpython3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>在你输入的时候，<code>bpython</code> 为你提供了选择来自动补全你的代码。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/acf5be3c927c76da21cb68258e403b0f.png\" alt=\"\"></p>\n<p>当你调用函数或方法时，会自动显示需要的参数和文档字符串。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/cd2a49ed08ad76b5481ab1d21e5a0d61.png\" alt=\"\"></p>\n<p>另一个很好的功能是可以使用功能键 <code>F7</code> 在外部编辑器（默认为 Vim）中打开当前的 <code>bpython</code> 会话。这在测试更复杂的程序时非常有用。</p>\n<p>有关配置和功能的更多细节，请参考 bpython <a href=\"https://docs.bpython-interpreter.org/\">文档</a>。</p>\n<h1 id=\"toc_6\">总结</h1>\n<p>使用增强的 Python shell 是提高生产力的好方法。它为你提供增强的功能来编写快速原型或尝试新库。你在使用增强的 Python shell 吗？请随意在评论区留言。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89169\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89169votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89169\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/430eb84fd4e1df3ccd28755d851f669dffe47702.jpg"}
{"url_object_id": "7718d735e033a003120841482612766a", "title": "Python 绘图库 Matplotlib 入门教程", "url": "http://python.jobbole.com/89077/", "create_date": "2018/04/16", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/11/8ef4df4888b257b5ea7bbd4b033a519c.png"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "4", "tags": "工具与框架", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://qiangbo.space/2018-04-06/matplotlib_l1/\">强波的技术博客</a>   </div><p>Matplotlib是一个Python语言的2D绘图库，它支持各种平台，并且功能强大，能够轻易绘制出各种专业的图像。本文是对它的一个入门教程。</p>\n<h1 id=\"id-运行环境\">运行环境</h1>\n<p>由于这是一个Python语言的软件包，因此需要你的机器上首先安装好Python语言的环境。关于这一点，请自行在网络上搜索获取方法。</p>\n<p>关于如何安装Matplotlib请参见这里：<a href=\"https://matplotlib.org/users/installing.html\">Matplotlib Installing</a>。</p>\n<p>笔者推荐大家通过pip的方式进行安装，具体方法如下：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdbd575114006\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo pip3 install matplotlib\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdbd575114006-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdbd575114006-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdbd575114006-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">pip3 </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">matplotlib</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdbd575114006-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n\n</div>\n</div>\n<p>本文中的源码和测试数据可以在这里获取：<a href=\"https://github.com/paulQuei/matplotlib_tutorial\">matplotlib_tutorial</a></p>\n<p>本文的代码示例会用到另外一个Python库：<a href=\"http://numpy.org\">NumPy</a>。建议读者先对<a href=\"http://numpy.org\">NumPy</a>有一定的熟悉，我之前也写过一个NumPy的基础教程，参见这里：<a href=\"/2018-01-06/AI_NumPy_Tutorial/\">Python 机器学习库 NumPy 教程</a>。</p>\n<p>本文的代码在如下环境中测试：</p>\n<ul>\n<li>Apple OS X 10.13</li>\n<li>Python 3.6.3</li>\n<li>matplotlib 2.1.1</li>\n<li>numpy 1.13.3</li>\n</ul>\n<h1 id=\"id-介绍\">介绍</h1>\n<p>Matplotlib适用于各种环境，包括：</p>\n<ul>\n<li>Python脚本</li>\n<li>IPython shell</li>\n<li><a href=\"http://jupyter.org/index.html\">Jupyter</a> notebook</li>\n<li>Web应用服务器</li>\n<li>用户图形界面工具包</li>\n</ul>\n<p>使用Matplotlib，能够的轻易生成各种类型的图像，例如：直方图，波谱图，条形图，散点图等。并且，可以非常轻松的实现定制。</p>\n<h2 id=\"id-入门代码示例\">入门代码示例</h2>\n<p>下面我们先看一个最简单的代码示例，让我们感受一下Matplotlib是什么样的：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdc7104371651\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# test.py\r\n\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\ndata = np.arange(100, 201)\r\nplt.plot(data)\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdc7104371651-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdc7104371651-1\"><span class=\"crayon-p\"># test.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdc7104371651-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdc7104371651-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdc7104371651-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdc7104371651-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdc7104371651-6\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">201</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdc7104371651-7\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdc7104371651-8\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdc7104371651-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码的主体逻辑只有三行，但是它却绘制出了一个非常直观的线性图，如下所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/ce88252400cbca262b813e8435ae7425.png\" width=\"500\"></p>\n<p>对照着这个线形图，我们来讲解一下三行代码的逻辑：</p>\n<ol>\n<li>通过<code>np.arange(100, 201)</code>生成一个[100, 200]之间的整数数组，它的值是：[100, 101, 102, … , 200]</li>\n<li>通过<code>matplotlib.pyplot</code>将其绘制出来。很显然，绘制出来的值对应了图中的纵坐标（y轴）。而matplotlib本身为我们设置了图形的横坐标（x轴）：[0, 100]，因为我们刚好有100个数值</li>\n<li>通过<code>plt.show()</code>将这个图形显示出来</li>\n</ol>\n<p>这段代码非常的简单，运行起来也是一样。如果你已经有了本文的运行环境，将上面的代码保存到一个文本文件中（或者通过<a href=\"https://github.com/paulQuei/matplotlib_tutorial\">Github</a>获取本文的源码），然后通过下面的命令就可以在你自己的电脑上看到上面的图形了:</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdcc721591185\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npython3 test.py\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdcc721591185-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdcc721591185-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdcc721591185-1\"><span class=\"crayon-e\">python3 </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdcc721591185-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n\n</div>\n</div>\n<blockquote><p>注1：后面的教程中，我们会逐步讲解如何定制图中的每一个细节。例如：坐标轴，图形，着色，线条样式，等等。</p></blockquote>\n<blockquote><p>注2：如果没有必要，下文的截图会去掉图形外侧的边框，只保留图形主体。</p></blockquote>\n<h1 id=\"id-一次绘制多个图形\">一次绘制多个图形</h1>\n<p>有些时候，我们可能希望一次绘制多个图形，例如：两组数据的对比，或者一组数据的不同展示方式等。</p>\n<p>可以通过下面的方法创建多个图形：</p>\n<h2 id=\"id-多个figure\">多个figure</h2>\n<p>可以简单的理解为一个<code>figure</code>就是一个图形窗口。<code>matplotlib.pyplot</code>会有一个默认的<code>figure</code>，我们也可以通过<code>plt.figure()</code>创建更多个。如下面的代码所示：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdd0581370999\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# figure.py\r\n\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\ndata = np.arange(100, 201)\r\nplt.plot(data)\r\n\r\ndata2 = np.arange(200, 301)\r\nplt.figure()\r\nplt.plot(data2)\r\n\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd0581370999-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd0581370999-1\"><span class=\"crayon-p\"># figure.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd0581370999-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd0581370999-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd0581370999-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd0581370999-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd0581370999-6\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">201</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd0581370999-7\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd0581370999-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd0581370999-9\"><span class=\"crayon-v\">data2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">301</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd0581370999-10\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">figure</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd0581370999-11\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd0581370999-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd0581370999-13\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd0581370999-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码绘制了两个窗口的图形，它们各自是一个不同区间的线形图，如下所示：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/53fe55292e89780f7ac94096ee1ceacf.png\" width=\"900\"></p>\n<blockquote><p>注：初始状态这两个窗口是完全重合的。</p></blockquote>\n<h2 id=\"id-多个subplot\">多个subplot</h2>\n<p>有些情况下，我们是希望在同一个窗口显示多个图形。此时就这可以用多个subplot。下面是一段代码示例：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdd4080145045\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# subplot.py\r\n\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\ndata = np.arange(100, 201)\r\nplt.subplot(2, 1, 1)\r\nplt.plot(data)\r\n\r\ndata2 = np.arange(200, 301)\r\nplt.subplot(2, 1, 2)\r\nplt.plot(data2)\r\n\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdd4080145045-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd4080145045-1\"><span class=\"crayon-p\"># subplot.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd4080145045-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd4080145045-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd4080145045-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd4080145045-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd4080145045-6\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">201</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd4080145045-7\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd4080145045-8\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd4080145045-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd4080145045-10\"><span class=\"crayon-v\">data2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">301</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd4080145045-11\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd4080145045-12\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd4080145045-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdd4080145045-14\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdd4080145045-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码中，除了<code>subplot</code>函数之外都是我们熟悉的内容。<code>subplot</code>函数的前两个参数指定了subplot数量，即：它们是以矩阵的形式来分割当前图形，两个整数分别指定了矩阵的行数和列数。而第三个参数是指矩阵中的索引。</p>\n<p>因此，下面这行代码指的是：2行1列subplot中的第1个subplot。</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fddd196097777\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nplt.subplot(2, 1, 1)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fddd196097777-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fddd196097777-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fddd196097777-1\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fddd196097777-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n</div>\n<p>下面这行代码指的是：2行1列subplot中的第2个subplot。</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fde1506109548\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nplt.subplot(2, 1, 2)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde1506109548-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde1506109548-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde1506109548-1\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde1506109548-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n\n</div>\n</div>\n<p>所以这段代码的结果是这个样子：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/19069d64c82846349dbee7e01f393b30.png\" width=\"500\"></p>\n<p><code>subplot</code>函数的参数不仅仅支持上面这种形式，还可以将三个整数（10之内的）合并一个整数。例如：<code>2, 1, 1</code>可以写成<code>211</code>，<code>2, 1, 2</code>可以写成<code>212</code>。</p>\n<p>因此，下面这段代码的结果是一样的：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fde4949557118\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\ndata = np.arange(100, 201)\r\nplt.subplot(211)\r\nplt.plot(data)\r\n\r\ndata2 = np.arange(200, 301)\r\nplt.subplot(212)\r\nplt.plot(data2)\r\n\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde4949557118-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde4949557118-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde4949557118-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde4949557118-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde4949557118-4\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">201</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde4949557118-5\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">211</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde4949557118-6\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde4949557118-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde4949557118-8\"><span class=\"crayon-v\">data2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">301</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde4949557118-9\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">subplot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">212</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde4949557118-10\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde4949557118-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde4949557118-12\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde4949557118-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n\n</div>\n</div>\n<blockquote><p><code>subplot</code>函数的详细说明参见这里：<a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplot.html#matplotlib.pyplot.subplot\">matplotlib.pyplot.subplot</a></p></blockquote>\n<h1 id=\"id-常用图形示例\">常用图形示例</h1>\n<p>Matplotlib可以生成非常多的图形式样，多到令人惊叹的地步。大家可以在这里：<a href=\"https://matplotlib.org/gallery/index.html\">Matplotlib Gallery</a> 感受一下。</p>\n<p>本文作为第一次的入门教程，我们先来看看最常用的一些图形的绘制。</p>\n<h2 id=\"id-线性图\">线性图</h2>\n<p>前面的例子中，线性图的横轴的点都是自动生成的，而我们很可能希望主动设置它。另外，线条我们可能也希望对其进行定制。看一下下面这个例子：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fde8419570889\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# plot.py\r\n\r\nimport matplotlib.pyplot as plt\r\n\r\nplt.plot([1, 2, 3], [3, 6, 9], '-r')\r\nplt.plot([1, 2, 3], [2, 4, 9], ':g')\r\n\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fde8419570889-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde8419570889-1\"><span class=\"crayon-p\"># plot.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde8419570889-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde8419570889-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde8419570889-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde8419570889-5\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'-r'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde8419570889-6\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">':g'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde8419570889-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fde8419570889-8\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fde8419570889-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码可以让我们得到这样的图形：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a8abce3fbbf412a6f3586756e1323f1d.png\" width=\"500\"></p>\n<p>这段代码说明如下：</p>\n<ol>\n<li><code>plot</code>函数的第一个数组是横轴的值，第二个数组是纵轴的值，所以它们一个是直线，一个是折线；</li>\n<li>最后一个参数是由两个字符构成的，分别是线条的样式和颜色。前者是红色的直线，后者是绿色的点线。关于样式和颜色的说明请参见<code>plot</code>函数的API Doc：<a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot\">matplotlib.pyplot.plot</a></li>\n</ol>\n<h2 id=\"id-散点图\">散点图</h2>\n<p><code>scatter</code>函数用来绘制散点图。同样，这个函数也需要两组配对的数据指定x和y轴的坐标。下面是一段代码示例：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdec175506108\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# scatter.py\r\n\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\nN = 20\r\n\r\nplt.scatter(np.random.rand(N) * 100,\r\n            np.random.rand(N) * 100,\r\n            c='r', s=100, alpha=0.5)\r\n\r\nplt.scatter(np.random.rand(N) * 100,\r\n            np.random.rand(N) * 100,\r\n            c='g', s=200, alpha=0.5)\r\n\r\nplt.scatter(np.random.rand(N) * 100,\r\n            np.random.rand(N) * 100,\r\n            c='b', s=300, alpha=0.5)\r\n\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdec175506108-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-1\"><span class=\"crayon-p\"># scatter.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-6\"><span class=\"crayon-v\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-8\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'r'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-12\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-16\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">scatter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">300</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdec175506108-20\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdec175506108-21\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0046 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码说明如下：</p>\n<ol>\n<li>这幅图包含了三组数据，每组数据都包含了20个随机坐标的位置</li>\n<li>参数<code>c</code>表示点的颜色，<code>s</code>是点的大小，<code>alpha</code>是透明度</li>\n</ol>\n<p>这段代码绘制的图形如下所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e6046c18d8d3293f54f4e2c2a9f1f483.png\" width=\"500\"></p>\n<blockquote><p><code>scatter</code>函数的详细说明参见这里：<a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.scatter.html#matplotlib.pyplot.scatter\">matplotlib.pyplot.scatter</a></p></blockquote>\n<h2 id=\"id-饼状图\">饼状图</h2>\n<p><code>pie</code>函数用来绘制饼状图。饼状图通常用来表达集合中各个部分的百分比。</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdf0057635420\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pie.py\r\n\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\nlabels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n\r\ndata = np.random.rand(7) * 100\r\n\r\nplt.pie(data, labels=labels, autopct='%1.1f%%')\r\nplt.axis('equal')\r\nplt.legend()\r\n\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf0057635420-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf0057635420-1\"><span class=\"crayon-p\"># pie.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf0057635420-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf0057635420-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf0057635420-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf0057635420-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf0057635420-6\"><span class=\"crayon-v\">labels</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Mon'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Tue'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Wed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Thu'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fri'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Sat'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Sun'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf0057635420-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf0057635420-8\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf0057635420-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf0057635420-10\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pie</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">labels</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">labels</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">autopct</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'%1.1f%%'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf0057635420-11\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'equal'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf0057635420-12\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">legend</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf0057635420-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf0057635420-14\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf0057635420-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码说明如下：</p>\n<ol>\n<li><code>data</code>是一组包含7个数据的随机数值</li>\n<li>图中的标签通过<code>labels</code>来指定</li>\n<li><code>autopct</code>指定了数值的精度格式</li>\n<li><code>plt.axis('equal')</code>设置了坐标轴大小一致</li>\n<li><code>plt.legend()</code>指明要绘制图例（见下图的右上角）</li>\n</ol>\n<p>这段代码输出的图形如下所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/cd60ec2971b77b4cdf9f1af9e918a81d.png\" width=\"500\"></p>\n<blockquote><p><code>pie</code>函数的详细说明参见这里：<a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.pie.html?highlight=pie#matplotlib.pyplot.pie\">matplotlib.pyplot.pie</a></p></blockquote>\n<h2 id=\"id-条形图\">条形图</h2>\n<p><code>bar</code>函数用来绘制条形图。条形图常常用来描述一组数据的对比情况，例如：一周七天，每天的城市车流量。</p>\n<p>下面是一个代码示例：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdf4067649668\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# bar.py\r\n\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\nN = 7\r\n\r\nx = np.arange(N)\r\ndata = np.random.randint(low=0, high=100, size=N)\r\ncolors = np.random.rand(N * 3).reshape(N, -1)\r\nlabels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\r\n\r\nplt.title(\"Weekday Data\")\r\nplt.bar(x, data, alpha=0.8, color=colors, tick_label=labels)\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf4067649668-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf4067649668-1\"><span class=\"crayon-p\"># bar.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf4067649668-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf4067649668-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf4067649668-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf4067649668-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf4067649668-6\"><span class=\"crayon-v\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf4067649668-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf4067649668-8\"><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">arange</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf4067649668-9\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">low</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">high</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf4067649668-10\"><span class=\"crayon-v\">colors</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">rand</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e \">N *</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf4067649668-11\"><span class=\"crayon-v\">labels</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Mon'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Tue'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Wed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Thu'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Fri'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Sat'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Sun'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf4067649668-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf4067649668-13\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">title</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Weekday Data\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf4067649668-14\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">bar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">alpha</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0.8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">colors</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tick_label</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">labels</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf4067649668-15\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf4067649668-16\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n\n</div>\n</div>\n<p>这段代码说明如下：</p>\n<ol>\n<li>这幅图展示了一组包含7个随机数值的结果，每个数值是[0, 100]的随机数</li>\n<li>它们的颜色也是通过随机数生成的。<code>np.random.rand(N * 3).reshape(N, -1)</code>表示先生成21（N x 3）个随机数，然后将它们组装成7行，那么每行就是三个数，这对应了颜色的三个组成部分。如果不理解这行代码，请先学习一下<a href=\"/2018-01-06/AI_NumPy_Tutorial/\">Python 机器学习库 NumPy 教程</a></li>\n<li><code>title</code>指定了图形的标题，<code>labels</code>指定了标签，<code>alpha</code>是透明度</li>\n</ol>\n<p>这段代码输出的图形如下所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e9f92d2344fa976d3d91c171d521cfa9.png\" width=\"500\"></p>\n<blockquote><p><code>bar</code>函数的详细说明参见这里：<a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.bar.html?highlight=bar#matplotlib.pyplot.bar\">matplotlib.pyplot.bar</a></p></blockquote>\n<h2 id=\"id-直方图\">直方图</h2>\n<p><code>hist</code>函数用来绘制直方图。直方图看起来是条形图有些类似。但它们的含义是不一样的，直方图描述了数据中某个范围内数据出现的频度。这么说有些抽象，我们通过一个代码示例来描述就好理解了：</p>\n<div>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfcfb6fdf8195101656\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# hist.py\r\n\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\ndata = [np.random.randint(0, n, n) for n in [3000, 4000, 5000]]\r\nlabels = ['3K', '4K', '5K']\r\nbins = [0, 100, 500, 1000, 2000, 3000, 4000, 5000]\r\n\r\nplt.hist(data, bins=bins, label=labels)\r\nplt.legend()\r\n\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfcfb6fdf8195101656-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf8195101656-1\"><span class=\"crayon-p\"># hist.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf8195101656-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf8195101656-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf8195101656-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf8195101656-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf8195101656-6\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5000</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf8195101656-7\"><span class=\"crayon-v\">labels</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'3K'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'4K'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'5K'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf8195101656-8\"><span class=\"crayon-v\">bins</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">500</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5000</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf8195101656-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf8195101656-10\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hist</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bins</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">bins</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">label</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">labels</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf8195101656-11\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">legend</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf8195101656-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfcfb6fdf8195101656-13\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfcfb6fdf8195101656-14\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n\n</div>\n</div>\n<p>上面这段代码中，<code>[np.random.randint(0, n, n) for n in [3000, 4000, 5000]]</code>生成了包含了三个数组的数组，这其中：</p>\n<ul>\n<li>第一个数组包含了3000个随机数，这些随机数的范围是 [0, 3000)</li>\n<li>第二个数组包含了4000个随机数，这些随机数的范围是 [0, 4000)</li>\n<li>第三个数组包含了5000个随机数，这些随机数的范围是 [0, 5000)</li>\n</ul>\n<p>bins数组用来指定我们显示的直方图的边界，即：[0, 100) 会有一个数据点，[100, 500)会有一个数据点，以此类推。所以最终结果一共会显示7个数据点。同样的，我们指定了标签和图例。</p>\n<p>这段代码的输出如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/43c70b18842147d813bf18914dcc9bff.png\" width=\"500\"></p>\n<p>在这幅图中，我们看到，三组数据在3000以下都有数据，并且频度是差不多的。但蓝色条只有3000以下的数据，橙色条只有4000以下的数据。这与我们的随机数组数据刚好吻合。</p>\n<blockquote><p><code>hist</code>函数的详细说明参见这里：<a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.hist.html?highlight=hist#matplotlib.pyplot.hist\">matplotlib.pyplot.hist</a></p></blockquote>\n<h1 id=\"id-结束语\">结束语</h1>\n<p>通过本文，我们已经知道了Matplotlib的大致使用方法和几种最基本的图形的绘制方式。</p>\n<p>需要说明的是，由于是入门教程，因此本文中我们只给出了这些函数和图形最基本的使用方法。但实际上，它们的功能远不止这么简单。因此本文中我们贴出了这些函数的API地址以便读者进一步的研究。</p>\n<p>在后面的文章中，我们会看到更多深入的内容，敬请期待。</p>\n<h1 id=\"id-参考资料与推荐读物\">参考资料与推荐读物</h1>\n<ul>\n<li><a href=\"https://matplotlib.org\">Matplotlib官方网站</a></li>\n<li><a href=\"https://www.amazon.com/Python-Data-Analysis-Wrangling-IPython/dp/1491957662/\">Python for Data Analysis</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89077\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89077votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89077\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/430eb84fd4e1df3ccd28755d851f669dffe47702.jpg"}
{"url_object_id": "80d68ccf40ef8aecd0ecd87d7e28d4a6", "title": "Python 项目可以有多大", "url": "http://python.jobbole.com/89175/", "create_date": "2018/05/22", "front_image_url": ["https://shuhari.github.io/blog/media/2018/01/python-projects-loc.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "实践项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://yuhao.space/blog/2018/1/how-large-python-projects-can-be/\">YuHao</a>   </div><div>\n<p>总是看到有人说，动态一时爽，重构火葬场。然而这世界上有的是著名的开源项目， 也有像 Github、Instagram 这样流量巨大的知名网站是基于动态语言开发的，经过了这么多年重构，也未听说哪个作者进了火葬场的，不明白这些人是真的不知道还是装作看不见呢？不过他们说动态语言大到一定程度就无法维护，虽然这话也同样不值一驳，不过也提醒了我，我也很好奇用动态语言开发的项目规模能大到什么程度。</p>\n<p>从我知道的信息看，用动态语言开发的最大规模的项目可能要算是 <a href=\"https://www.openstack.org\">OpenStack</a>，据说代码总量已经达到数百万行，并且还在持续增加中。这当然是一个说明动态语言能力的好例子。不过像这样巨大的项目，要分析起来也并不容易（好吧，真正的原因是我懒得下载那么庞大的代码库）。我选择了 Python 社区中比较知名的一些项目来分析，主要是来自 Github ，也有个别来自其他仓库。这个选择可能包含了一定的主观因素在内，不过我相信大多数项目还是非常有代表性的。</p>\n<p>计算代码数量的工具是 <a href=\"https://github.com/AlDanial/cloc\">cloc</a>。所有项目均选择截止到 2018 年 1 月 3 日的主干代码，统计中仅包含 Python 文件，排除了其他文件类型。值得说明的一点是， 通过 Ubuntu APT 默认安装的 cloc 版本 1.60 在统计部分项目的时候存在问题，该问题在最新的版本中已经得到解决，因此本文中所有统计均使用从官网下载的 cloc v1.72。</p>\n<table>\n<thead>\n<tr>\n<th>项目</th>\n<th>文件</th>\n<th>空白行</th>\n<th>注释行</th>\n<th>代码行</th>\n<th>代码行/文件</th>\n<th>注释/代码</th>\n<th>类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Sentry</td>\n<td>1,828</td>\n<td>32,745</td>\n<td>16,593</td>\n<td>698,733</td>\n<td>409.23</td>\n<td>2.22%</td>\n<td>py,po</td>\n</tr>\n<tr>\n<td>CPython</td>\n<td>1,775</td>\n<td>106,670</td>\n<td>132,042</td>\n<td>496,500</td>\n<td>414.20</td>\n<td>17.96%</td>\n<td>py,c</td>\n</tr>\n<tr>\n<td>Salt</td>\n<td>2,432</td>\n<td>158,906</td>\n<td>248,391</td>\n<td>486,106</td>\n<td>367.35</td>\n<td>27.80%</td>\n<td>py,js</td>\n</tr>\n<tr>\n<td>Ansible</td>\n<td>2,641</td>\n<td>109,406</td>\n<td>254,073</td>\n<td>383,396</td>\n<td>282.80</td>\n<td>13.41%</td>\n<td>py,yaml</td>\n</tr>\n<tr>\n<td>wxPython</td>\n<td>1,611</td>\n<td>95,293</td>\n<td>94,784</td>\n<td>220,420</td>\n<td>254.81</td>\n<td>23.09%</td>\n<td>py,c</td>\n</tr>\n<tr>\n<td>Django</td>\n<td>1,906</td>\n<td>50,634</td>\n<td>48,494</td>\n<td>219,999</td>\n<td>167.43</td>\n<td>15.20%</td>\n<td>py,po</td>\n</tr>\n<tr>\n<td>Pandas</td>\n<td>561</td>\n<td>64,291</td>\n<td>57,207</td>\n<td>213,402</td>\n<td>596.97</td>\n<td>17.08%</td>\n<td>py,html</td>\n</tr>\n<tr>\n<td>Odoo</td>\n<td>2,010</td>\n<td>31,394</td>\n<td>37,042</td>\n<td>158,106</td>\n<td>112.71</td>\n<td>16.35%</td>\n<td>po,js</td>\n</tr>\n<tr>\n<td>youtube-dl</td>\n<td>830</td>\n<td>15,343</td>\n<td>6,666</td>\n<td>108,276</td>\n<td>156.97</td>\n<td>5.12%</td>\n<td>py,markdown</td>\n</tr>\n<tr>\n<td>NumPy</td>\n<td>380</td>\n<td>33,578</td>\n<td>68,711</td>\n<td>102,490</td>\n<td>538.89</td>\n<td>33.55%</td>\n<td>c,py</td>\n</tr>\n<tr>\n<td>PyTorch</td>\n<td>381</td>\n<td>14,014</td>\n<td>15,435</td>\n<td>46,895</td>\n<td>200.38</td>\n<td>20.22%</td>\n<td>py,cuda</td>\n</tr>\n<tr>\n<td>Django-CMS</td>\n<td>302</td>\n<td>9,459</td>\n<td>8,089</td>\n<td>41,492</td>\n<td>195.50</td>\n<td>13.70%</td>\n<td>po,py</td>\n</tr>\n<tr>\n<td>Keras</td>\n<td>158</td>\n<td>9,707</td>\n<td>13,972</td>\n<td>37,484</td>\n<td>387.11</td>\n<td>22.84%</td>\n<td>py,markdown</td>\n</tr>\n<tr>\n<td>Pillow</td>\n<td>267</td>\n<td>9,064</td>\n<td>8,733</td>\n<td>26,348</td>\n<td>165.34</td>\n<td>19.78%</td>\n<td>py,c</td>\n</tr>\n<tr>\n<td>Scrapy</td>\n<td>340</td>\n<td>6,800</td>\n<td>4,106</td>\n<td>24,874</td>\n<td>105.24</td>\n<td>11.48%</td>\n<td>py,xml</td>\n</tr>\n<tr>\n<td>Flask</td>\n<td>71</td>\n<td>3,448</td>\n<td>3,524</td>\n<td>8,768</td>\n<td>221.68</td>\n<td>22.39%</td>\n<td>py,html</td>\n</tr>\n<tr>\n<td>Fabric</td>\n<td>78</td>\n<td>2,341</td>\n<td>4,333</td>\n<td>7,314</td>\n<td>179.33</td>\n<td>30.98%</td>\n<td>py,yaml</td>\n</tr>\n</tbody>\n</table>\n<p>上表已经按代码行数排了序。有意思的一点是， 代码规模最大的前4名中除了 CPython 之外其他三个全部是运维性质的项目，本来我猜测代码应该比较多的项目比如 Odoo 排名反而很靠后。我对运维项目了解有限，不太清楚为什么这些项目的代码规模会名列前茅，或许是因为要支持的内容比较多而杂？</p>\n<p><img src=\"https://shuhari.github.io/blog/media/2018/01/python-projects-loc.jpg\" alt=\"代码量统计\"></p>\n<p>本次统计中纯 Python 代码量最大的 Sentry 几乎达到了 70W 行，这是相当有规模的项目了。30W~50W 行代码的项目有三个，包括基础项目 CPython 在内。20W 和 10W 行代码规模的分别有三个，剩下 7 个则在 10W 行以内。看过这个列表你应当相信，动态语言至少在几十W行代码的项目上是完全没有问题的。这也是绝大多数普通应用的上限了，如果代码真的达到数百万行规模的话，那么无论用什么语言，都势必面临着拆分项目的问题。</p>\n<p>上表将代码量指标按照代码/空白/注释进行了分类，也在一定程度上反应了项目的代码风格。Sentry 是本次统计中代码量最多的项目，然而从表中可以看到，项目中的注释和其他项目相比，少得有点不成比例，说明 Sentry 的作者非常不注重注释。</p>\n<p>同学们一定发现了，我在列表中除了代码行相关的指标之外还增加了几个其他内容，这也是我个人比较感兴趣的方面。</p>\n<p><img src=\"https://shuhari.github.io/blog/media/2018/01/python-projects-loc-file.jpg\" alt=\"代码行/文件统计\"></p>\n<p>第一个指标是每个文件的平均代码行数。按照模块化的观点，单个文件中堆砌太多内容显然是不合理的，这通常意味着耦合太多、难于理解和修改。然而到底多少算是合适，并没有一个明确的标准。我希望通过这些项目的分析，了解一下开源作者们在实践中做出的选择。</p>\n<p>统计的结果分布比较平均，从 100~600行/文件的都存在，并不存在明显的集中点。有趣的是，头两名（Pandas, NumPy）有着紧密的联系，都是和数学统计相关的。这可能是因为数学库的特点比较纯粹而单一，不像其他类库那样容易划分。末尾的项目（Pillow, youtube-dl, Odoo, Scrapy）可以从侧面印证这种猜想：它们都是面向特定领域的，所以更加容易模块化。</p>\n<p><img src=\"https://shuhari.github.io/blog/media/2018/01/python-projects-comment-code.jpg\" alt=\"注释/代码统计\"></p>\n<p>第二个指标是注释和代码的比例，这个问题也有着类似的情况。注释并非越详尽越好，但总是需要一定量的注释来解释 Why 的问题。注释太少，说明项目的作者没有给后来的维护人员留下足够的线索，可能会造成维护上的问题。另一方面，我们考察的全部是开源项目，没有公司考核或者 KPI 的约束，所以我们可以放心的相信不会存在作者故意多写注释的问题。前面提到的 Sentry 毫无争议的因为注释太少排到了最后，这未必说明这个项目很差，但至少是一个信号，说明该项目在维护方面可能是存在问题的。而对于那些作者愿意投入精力来写注释的项目（Ansible, NumPy, Fabric, Salt 等），足以反映作者在项目上投入了相当大的心力，这是一个好的信号，说明这些项目是值得信赖的。</p>\n<p>有一点是出乎我意料的，那就是作为所有项目之母的 CPython 排名比较靠后，按照道理这个基础项目应该有更多的注释才对。不过再想一想又觉得可以理解，因为 CPython 有单独发布的、非常详尽的文档，这是其他大多数项目都没有的，那么代码中的注释少一些也是情有可原的。</p>\n<p><img src=\"https://shuhari.github.io/blog/media/2018/01/python-projects-filetype.jpg\" alt=\"文件类型统计\"></p>\n<p>最后一项统计是关于文件类型的。Python 项目中绝大多数应该是 Python 代码，这点没有什么疑问，但同时我也想看看除了 Python 代码之外，一个项目还包括哪些主要文件。C/HTML/Javascipt 的上榜是毫不意外的，但有一种文件我事先没有想到，那就是 .PO（开源项目常用的语言资源文件）。对于 Django 和 Django-CMS 这两个项目, PO 代码数量甚至比 Python 代码还要多。大概看了一下，Django 支持 90 种以上的语言，这也无怪乎语言文件的数量如此之多了。这个结果也可以提醒我们，有些同学——不仅是程序员，也包括大多数经验不足的老板、客户、产品经理等——会下意识的认为程序开发无非是写代码，对于代码之外的其他工作，在估算的时候往往只拍脑袋式的定下一个极短的时间。但对于实际的项目来说，代码仅仅是其中的一部分，“其他工作”有时候——应该说是经常——会占用你大部分的的时间和精力。这些工作往往并不有趣，但对于项目来说又是必不可少的组成部分，希望同学们予以足够的重视。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89175\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89175votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89175\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/ad7272c0c4043685be1a6166ecb5f64559a6156a.jpg"}
{"url_object_id": "20a892567a5320f755b57b6473760af6", "title": "爬取豆瓣短评之《后来的我们》", "url": "http://python.jobbole.com/89161/", "create_date": "2018/05/17", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "实践项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://blog.csdn.net/stormdony/article/details/80143024\">stormdony</a>   </div><p>《后来的我们》上映了，或许大家有点小期待吧。毕竟，影片的主题曲《我们》，早就虐哭了不少人。电影能否跟歌曲一样深入人心？怀着这样的一种心情，下面就来看一下它的影评如何吧。</p>\n<h5 id=\"1抓数据\">1.抓数据</h5>\n<p>通过试探知道：豆瓣影评设置权限，没有登陆的话，只能够看到前面的几十条短评，并且登录的时候需要输入验证码。所以考虑使用<code>selenium</code>来获取数据。<br>\n登录时需要的验证码，通过保存图片，然后手动输入<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/51bc12eb18a1679d3b0baa0c1b1bbe3a.png\" alt=\"后来的我们\"><br>\n所以构造两个方法</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df937754d6803594873\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 登录\r\ndef login(url,username,password):\r\n    brower.get(url)\r\n    brower.find_element_by_css_selector('[class=\"nav-login\"]').click()\r\n    name = brower.find_element_by_id('email')\r\n    name.clear()\r\n    name.send_keys(username)\r\n    pwd = brower.find_element_by_id('password')\r\n    pwd.clear()\r\n    pwd.send_keys(password)\r\n    pic_src = brower.find_element_by_id('captcha_image').get_attribute('src')\r\n    #调用获取验证码的方法\r\n    cap_value = get_yzm(pic_src)\r\n    yan_zheng_ma = brower.find_element_by_id('captcha_field')\r\n    yan_zheng_ma.clear()\r\n    yan_zheng_ma.send_keys(cap_value)\r\n    brower.find_element_by_css_selector('[class=\"btn-submit\"]').click()\r\n    print('登陆成功')\r\n\r\n\r\n# 获取验证码\r\ndef get_yzm(src):\r\n    print(\"正在保存验证码图片\")\r\n    captchapicfile = \"D:/pycharm/PycharmProjects/next_our/captcha.png\"\r\n    urllib.request.urlretrieve(src, filename=captchapicfile)\r\n    print(\"请打开图片文件，查看验证码，输入单词......\")\r\n    captcha_value = input()\r\n    return captcha_value\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754d6803594873-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754d6803594873-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-1\"><span class=\"crayon-p\"># 登录</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">login</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">username</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[class=\"nav-login\"]'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'email'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_keys</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">username</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pwd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'password'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pwd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pwd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_keys</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">pic_src</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'captcha_image'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get_attribute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'src'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#调用获取验证码的方法</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">cap_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_yzm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">pic_src</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">yan_zheng_ma</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'captcha_field'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">yan_zheng_ma</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">yan_zheng_ma</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_keys</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cap_value</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[class=\"btn-submit\"]'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'登陆成功'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-20\"> </div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-21\"><span class=\"crayon-p\"># 获取验证码</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-22\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_yzm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"正在保存验证码图片\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">captchapicfile</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"D:/pycharm/PycharmProjects/next_our/captcha.png\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">urllib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">request</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">urlretrieve</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">src</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">captchapicfile</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"请打开图片文件，查看验证码，输入单词......\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">captcha_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">input</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754d6803594873-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">captcha</span><span class=\"crayon-sy\">_</span>value</div><div class=\"crayon-line\" id=\"crayon-5b0df937754d6803594873-29\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0062 seconds] -->\r\n<p>登陆成功之后，通过搜索框搜索《后来的我们》，进入详情页，随后进入短评列表<br>\n<img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/3d54bd61ce5fbfd942073dc61a828a10.png\" alt=\"这里写图片描述\"><br>\n<img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/0bd7314ace43d3081d0f3397e37dc5d9.png\" alt=\"这里写图片描述\"><br>\n需要获取昵称,短评和赞同数<br>\n<img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/a1ba40b0d5f4055df7c408c5a57f4dd4.png\" alt=\"这里写图片描述\"><br>\n每一个步骤我们都构建一个方法</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df937754e5717939764\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 搜索电影\r\ndef seach(movie_name):\r\n    inp_query = brower.find_element_by_id('inp-query')\r\n    inp_query.clear()\r\n    inp_query.send_keys(movie_name)\r\n    submit = brower.find_element_by_css_selector('[type=\"submit\"]')\r\n    submit.click()\r\n    sleep(1)\r\n    brower.find_element_by_xpath('//*[@id=\"root\"]/div/div[2]/div[1]/div[1]/div[1]/div[1]/div/div[1]/a').click()\r\n    print(\"进入详情页\")\r\n\r\n# 进入短评列表\r\ndef into_comment():\r\n    brower.find_element_by_xpath('//*[@id=\"comments-section\"]/div[1]/h2/span/a').click()\r\n    print(\"进入短评列表\")\r\n\r\n# 获取短评\r\ndef get_comment():\r\n    wait.until(lambda brower : brower.find_element_by_css_selector('[class=\"next\"]'))\r\n    sleep(1)\r\n    for i in range(1,21):\r\n        comment = brower.find_element_by_xpath('//*[@id=\"comments\"]/div[{}]/div[2]/p'.format(str(i))).text\r\n        comment_name = brower.find_element_by_xpath('//*[@id=\"comments\"]/div[{}]/div[2]/h3/span[2]/a'.format(str(i))).text\r\n        votes = brower.find_element_by_xpath('//*[@id=\"comments\"]/div[{}]/div[2]/h3/span[1]/span'.format(str(i))).text\r\n        #构建字典\r\n        data = {\r\n            'comment': comment,\r\n            'comment_name': comment_name,\r\n            'votes': int(votes)\r\n        }\r\n        comments.insert_one(data)\r\n        print('*'*100)\r\n        print(data)\r\n        print('成功存入数据库')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754e5717939764-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754e5717939764-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-1\"><span class=\"crayon-p\"># 搜索电影</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">seach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">movie_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inp_query</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_id</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'inp-query'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inp_query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clear</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inp_query</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">send_keys</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">movie_name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">submit</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[type=\"submit\"]'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">submit</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"root\"]/div/div[2]/div[1]/div[1]/div[1]/div[1]/div/div[1]/a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"进入详情页\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-12\"><span class=\"crayon-p\"># 进入短评列表</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-13\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">into_comment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"comments-section\"]/div[1]/h2/span/a'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"进入短评列表\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-16\"> </div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-17\"><span class=\"crayon-p\"># 获取短评</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-18\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">get_comment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">wait</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">until</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">lambda </span><span class=\"crayon-v\">brower</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[class=\"next\"]'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">sleep</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">comment</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"comments\"]/div[{}]/div[2]/p'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">text</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-23\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">comment_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"comments\"]/div[{}]/div[2]/h3/span[2]/a'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">text</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-24\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">votes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_xpath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'//*[@id=\"comments\"]/div[{}]/div[2]/h3/span[1]/span'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">text</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-p\">#构建字典</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'comment'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">comment</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-28\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'comment_name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">comment_name</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'votes'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">votes</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">comments</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">insert_one</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'*'</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754e5717939764-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'成功存入数据库'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754e5717939764-35\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0062 seconds] -->\r\n<p>还有最重要的一步就是，需要进行翻页，然后重新获取短评信息</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df937754f0978775407\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#翻页\r\ndef next_page():\r\n    next = brower.find_element_by_css_selector('[class=\"next\"]')\r\n    try:\r\n        next.click()\r\n    except:\r\n        logging.info(\"全部完成了\")</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f0978775407-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f0978775407-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f0978775407-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f0978775407-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f0978775407-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f0978775407-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f0978775407-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df937754f0978775407-1\"><span class=\"crayon-p\">#翻页</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f0978775407-2\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">next_page</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f0978775407-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">next</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">find_element_by_css_selector</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'[class=\"next\"]'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f0978775407-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f0978775407-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">click</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f0978775407-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">except</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f0978775407-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">logging</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"全部完成了\"</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>ps:由于技术较渣,所以直接跳到最后一页,发现只有24页,所以直接使用循环了&lt;~_~&gt;</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df937754f7850261250\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#使用PhantomJS\r\nbrower = webdriver.PhantomJS(executable_path=\"D:/phantomjs-2.1.1-windows/bin/phantomjs.exe\")\r\nwait = ui.WebDriverWait(brower,10)\r\n# 数据库\r\nclient = pymongo.MongoClient('localhost',27017)\r\nnext_our = client['next_our']\r\ncomments = next_our['comments']\r\n\r\nURL = 'https://movie.douban.com/'\r\nusername = '你的豆瓣账号'\r\npassword = '你的密码'\r\nmovie = '后来的我们‎'\r\nif __name__==\"__main__\":\r\n    login(URL,username,password)\r\n    seach(movie)\r\n    into_comment()\r\n    for page in range(24):\r\n        get_comment()\r\n        next_page()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754f7850261250-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754f7850261250-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-1\"><span class=\"crayon-p\">#使用PhantomJS</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-2\"><span class=\"crayon-v\">brower</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">webdriver</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PhantomJS</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">executable_path</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"D:/phantomjs-2.1.1-windows/bin/phantomjs.exe\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-3\"><span class=\"crayon-v\">wait</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ui</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">WebDriverWait</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">brower</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-4\"><span class=\"crayon-p\"># 数据库</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-5\"><span class=\"crayon-v\">client</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pymongo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">MongoClient</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'localhost'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">27017</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-6\"><span class=\"crayon-v\">next_our</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">client</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'next_our'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-7\"><span class=\"crayon-v\">comments</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">next_our</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'comments'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-9\"><span class=\"crayon-v\">URL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://movie.douban.com/'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-10\"><span class=\"crayon-v\">username</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'你的豆瓣账号'</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-11\"><span class=\"crayon-v\">password</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'你的密码'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-12\"><span class=\"crayon-v\">movie</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'后来的我们‎'</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-13\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__name__</span><span class=\"crayon-o\">==</span><span class=\"crayon-s\">\"__main__\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">login</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">URL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">username</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">password</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">seach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">movie</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">into_comment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">page </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">24</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754f7850261250-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">get_comment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754f7850261250-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">next_page</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p></p>\n<h5 id=\"2数据处理\">2.数据处理</h5>\n<p>在获取到数据之后,制作成图表,让我们更加直观的看到大体情况</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df937754fe916094732\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nseries =[\r\n    {\r\n    'name':'评论点赞数',\r\n    'data':[i for i in vote_list],\r\n    'type':'column'\r\n    }\r\n]\r\ncharts.plot(series,show='inline',options=dict(title=dict(text='评论点赞数')))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df937754fe916094732-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754fe916094732-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754fe916094732-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754fe916094732-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754fe916094732-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754fe916094732-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df937754fe916094732-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df937754fe916094732-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df937754fe916094732-1\"><span class=\"crayon-v\">series</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754fe916094732-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754fe916094732-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'评论点赞数'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754fe916094732-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'data'</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">[</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vote_list</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754fe916094732-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'type'</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'column'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754fe916094732-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0df937754fe916094732-7\"><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df937754fe916094732-8\"><span class=\"crayon-v\">charts</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">plot</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">show</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'inline'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">options</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">dict</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">title</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">dict</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">text</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'评论点赞数'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p><img title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e64b46ff7912bfdf019c79e32852871b.png\" alt=\"这里写图片描述\"><br>\n从图中可以看出短评中最受欢迎的大概有2500票,并且大部分集中在前排,(这是后面没有多少人看,所以点赞少?)<br>\n<strong>咳咳。。。前排很重要呀</strong></p>\n<p>接下来把所有的评论制作成云图</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0df93775505848496084\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntext=open('comment_list.txt', 'r',encoding='utf-8')\r\nmytext=text.read()\r\ncut = jieba.cut(mytext,cut_all=True)\r\nsplit_cut ='/'.join(cut)\r\nwc = WordCloud(background_color = \"white\", #设置背景颜色  \r\n               max_words = 2000, #设置最大显示的字数  \r\n               margin=5,\r\n               font_path=\"C:\\\\Windows\\\\Fonts\\\\STFANGSO.ttf\",#不加这一句显示口字形乱码\r\n               max_font_size = 80,  #设置字体最大值  \r\n               random_state = 40, #设置有多少种随机生成状态，即有多少种配色方案  \r\n    )  \r\nmword =wc.generate(split_cut)\r\nplt.imshow(mword)\r\nplt.axis(\"off\")\r\nplt.show()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0df93775505848496084-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df93775505848496084-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0df93775505848496084-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df93775505848496084-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0df93775505848496084-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df93775505848496084-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0df93775505848496084-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df93775505848496084-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0df93775505848496084-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df93775505848496084-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0df93775505848496084-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df93775505848496084-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0df93775505848496084-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0df93775505848496084-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0df93775505848496084-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0df93775505848496084-1\"><span class=\"crayon-v\">text</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'comment_list.txt'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'r'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">encoding</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'utf-8'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df93775505848496084-2\"><span class=\"crayon-v\">mytext</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">text</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df93775505848496084-3\"><span class=\"crayon-v\">cut</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jieba</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">cut</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mytext</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">cut_all</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df93775505848496084-4\"><span class=\"crayon-v\">split_cut</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'/'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cut</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df93775505848496084-5\"><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WordCloud</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">background_color</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"white\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#设置背景颜色  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df93775505848496084-6\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">max_words</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#设置最大显示的字数  </span></div><div class=\"crayon-line\" id=\"crayon-5b0df93775505848496084-7\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">margin</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df93775505848496084-8\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">font_path</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"C:\\\\Windows\\\\Fonts\\\\STFANGSO.ttf\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-p\">#不加这一句显示口字形乱码</span></div><div class=\"crayon-line\" id=\"crayon-5b0df93775505848496084-9\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">max_font_size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\">#设置字体最大值  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df93775505848496084-10\"><span class=\"crayon-h\">               </span><span class=\"crayon-v\">random_state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">40</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#设置有多少种随机生成状态，即有多少种配色方案  </span></div><div class=\"crayon-line\" id=\"crayon-5b0df93775505848496084-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df93775505848496084-12\"><span class=\"crayon-v\">mword</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">wc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">generate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">split_cut</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df93775505848496084-13\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">imshow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mword</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0df93775505848496084-14\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">axis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"off\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0df93775505848496084-15\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>得到下面的云图:<br>\n<img class=\"aligncenter\" title=\"\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fd350e72550cbd04ba26e9009086a07f.jpeg\" alt=\"这里写图片描述\"><br>\n从图中看到,大部分在<strong>评论周冬雨</strong>、感慨<strong>我们后来没有故事</strong>的<br>\n<em>ps:数据是4/29晚所爬取的</em></p>\n<p>接下来统计一下赞同数前十的评论</p>\n<table>\n<thead>\n<tr>\n<th>昵称</th>\n<th>获赞数</th>\n<th>短评</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Magic</td>\n<td>2475</td>\n<td>台词矫情的令人发指！</td>\n</tr>\n<tr>\n<td>华盛顿樱桃树</td>\n<td>2230</td>\n<td>最好的是演员，周冬雨完全开辟出自己的戏路。小井进步惊人，已长出美丽。最差的是编剧，没有一场完全连贯的戏，几乎都是攒的。</td>\n</tr>\n<tr>\n<td>痴痴的钟灵</td>\n<td>1784</td>\n<td>希望奶茶好好演戏唱歌,矫情的青春片已经没有市场了。吃完瓜回来，劝眼善良,中国的电影市场要被你们搞的烂透了。在工作日首日票房近3亿，把自己当妇联了么,【把没有市场收回，有,眼在何愁没有100亿.</td>\n</tr>\n<tr>\n<td>昵称过期作废</td>\n<td>1785</td>\n<td>毫无看点可言。剧情处处是硬伤！这是电影吗？这是PPT，刘小姐，还是回去唱歌吧。</td>\n</tr>\n<tr>\n<td>末药煎肉塔</td>\n<td>1601</td>\n<td>现在还把北京设定为梦想之城的，大概受众也是瞄准了小镇青年吧（多次冲北京喊话真是挺尴尬的）。剧情拖太长，唯一的泪点还是田壮壮演的老爸，周冬雨老演这种角色不会腻吗？</td>\n</tr>\n<tr>\n<td>xiaoning</td>\n<td>1373</td>\n<td>真的很讨厌卖情怀的电影，而且还有一个不是很有才华的歌手做导演，要不是主题曲我应该都不会想看。（留言说我收钱黑的，老子收了一分黑钱我多的钱都亏出去行了吧，就这尴尬的台词乱拼凑的故事是在看ppt吗还用收钱黑，我真是谢你们大爷了，你不用管我觉得谁有才华，反正这位文青女导演还真不是）</td>\n</tr>\n<tr>\n<td>张无B</td>\n<td>1508</td>\n<td>刘若英对着镜头唱一遍后来我都觉得比这片子感动。</td>\n</tr>\n<tr>\n<td>葡萄猪不爱睡觉</td>\n<td>1238</td>\n<td>从形式内容到档期营销，统统都是模仿当年的致青春，致青春票房年度第二，这部最终估计也不会差</td>\n</tr>\n<tr>\n<td>糖炒荔枝</td>\n<td>1146</td>\n<td>在我眼里第二个无问西东，投机取巧，毫无才华，对不起</td>\n</tr>\n<tr>\n<td>尼克Lui</td>\n<td>995</td>\n<td>垃圾做作的电影 这么多年了还在不断的重复搞这种烂片 大晚上被抓住票房造假 哈哈哈哈哈哈 垃圾怎么包装也是垃圾！</td>\n</tr>\n</tbody>\n</table>\n<p>ps:以上评论均来自豆瓣影评</p>\n<h5 id=\"3总结\">3.总结</h5>\n<p>或许是主题曲提前预热了市场,让观众的期望值变高了，《后来的我们》在豆瓣上的评分只有6.2分，并且现在又出现了退票事件。<br>\n单就电影来说，感觉还是可以的。或许是豆瓣的用户眼光有点高了。</p>\n<p>爱情有一种结局，是后来的我们，只能从情侣变成爱了很久的朋友。<br>\n电影有句很扎心的文案，<strong>“再后来，我什么都有了，却独独没有了我们”</strong>。<br>\n希望我们好好珍惜。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89161\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89161votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89161\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d21a83f6d43617f04d77157889bd773c35ec673d.jpg"}
{"url_object_id": "a011c866842ae72acb0ac83473f81b2e", "title": "6 个 Python 的日期时间库", "url": "http://python.jobbole.com/89178/", "create_date": "2018/05/25", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "工具与框架", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/4/python-datetime-libraries\">Lacey Williams Henschel &amp; Jeff Triplett</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9666-1.html\">Linux中国/MjSeven</a>   </div><p>曾几何时，我们中的一个人（Lacey）盯了一个多小时的 <a href=\"https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior\">Python 文档</a>中描述日期和时间格式化字符串的表格。当我试图编写从 API 中将日期时间字符串转换为 <a href=\"https://opensource.com/article/17/5/understanding-datetime-python-primer\">Python datetime</a> 对象时，我很难理解其中的特定部分，因此我决定请求帮助。</p>\n<p>有人问道：“为什么你不使用 <code>dateutil</code> 呢？”</p>\n<p>读者，如果你没有从这个月的 Python 专栏中获得任何东西，只是学习到有比 datetime 的 <code>strptime</code> 更容易地将 datetime 字符串转换为 datetime 对象的方法，那么我们觉得就已经成功了。</p>\n<p>但是，除了将字符串转换为更有用的 Python 对象之外，还有许多库都有一些有用的方法和工具，可以让您更轻松地进行时间测试、将时间转换为不同的时区、以人类可读的格式传递时间信息，等等。如果这是你在 Python 中第一次接触日期和时间，请暂停并阅读 <em><a href=\"https://opensource.com/article/17/5/understanding-datetime-python-primer\">如何使用 Python的日期和时间</a></em> 。要理解为什么在编程中处理日期和时间是困难的，请阅读 <a href=\"http://infiniteundo.com/post/25326999628/falsehoods-programmers-believe-about-time\">愚蠢的程序员相信时间</a>。</p>\n<p>随意跳过那些你已经熟悉的库，专注于那些对你而言是新的库。</p>\n<h3 id=\"toc_1\">内建的 datetime 模块</h3>\n<p>在跳转到其他库之前，让我们回顾一下如何使用 <code>datetime</code> 模块将日期字符串转换为 Python datetime 对象。</p>\n<p>假设我们从 API 接受到一个日期字符串，并且需要它作为 Python datetime 对象存在：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d47967635221\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n2018-04-29T17:45:25Z\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d47967635221-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d47967635221-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d47967635221-1\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29T17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25Z</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d47967635221-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>这个字符串包括：</p>\n<ul>\n<li>日期是 <code>YYYY-MM-DD</code> 格式的</li>\n<li>字母 <code>T</code> 表示时间即将到来</li>\n<li>时间是 <code>HH:II:SS</code> 格式的</li>\n<li>表示此时间的时区指示符 <code>Z</code> 采用 UTC （详细了解<a href=\"https://www.w3.org/TR/NOTE-datetime\">日期时间字符格式</a>）</li>\n</ul>\n<p>要使用 <code>datetime</code> 模块将此字符串转换为 Python datetime 对象，你应该从 <code>strptime</code> 开始。 <code>datetime.strptime</code> 接受日期字符串和格式化字符并返回一个 Python datetime 对象。</p>\n<p>我们必须手动将日期时间字符串的每个部分转换为 Python 的 <code>datetime.strptime</code> 可以理解的合适的格式化字符串。四位数年份由 <code>%Y</code> 表示，两位数月份是 <code>%m</code>，两位数的日期是 <code>%d</code>。在 24 小时制中，小时是 <code>%H</code>，分钟是 <code>%M</code>，秒是 <code>%S</code>。</p>\n<p>为了得出这些结论，需要在<a href=\"https://docs.python.org/3/library/datetime.html#strftime-strptime-behavior\">Python 文档</a>的表格中多加注意。</p>\n<p>由于字符串中的 <code>Z</code> 表示此日期时间字符串采用 UTC，所以我们可以在格式中忽略此项。（现在，我们不会担心时区。）</p>\n<p>转换的代码是这样的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d51438578317\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ from datetime import datetime \r\n$ datetime.strptime('2018-04-29T17:45:25Z', '%Y-%m-%dT%H:%M:%SZ')\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d51438578317-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d51438578317-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d51438578317-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d51438578317-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d51438578317-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">datetime </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">datetime</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d51438578317-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strptime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'%Y-%m-%dT%H:%M:%SZ'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d51438578317-3\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d51438578317-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>格式字符串很难阅读和理解。我必须手动计算原始字符串中的字母 <code>T</code> 和 “Z”的位置，以及标点符号和格式化字符串，如 <code>%S</code> 和 <code>%m</code>。有些不太了解 datetime 的人阅读我的代码可能会发现它很难理解，尽管其含义已有文档记载，但它仍然很难阅读。</p>\n<p>让我们看看其他库是如何处理这种转换的。</p>\n<h3 id=\"toc_2\">Dateutil</h3>\n<p><a href=\"https://dateutil.readthedocs.io/en/stable/\">dateutil 模块</a>对 <code>datetime</code> 模块做了一些扩展。</p>\n<p>继续使用上面的解析示例，使用 <code>dateutil</code> 实现相同的结果要简单得多：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d55955684821\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ from dateutil.parser import parse\r\n$ parse('2018-04-29T17:45:25Z')\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25, tzinfo=tzutc())\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d55955684821-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d55955684821-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d55955684821-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d55955684821-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d55955684821-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">dateutil</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parser </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">parse</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d55955684821-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d55955684821-3\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tzinfo</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">tzutc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d55955684821-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>如果字符串包含时区，那么 <code>dateutil</code> 解析器会自动返回字符串的时区。由于我们在 UTC 时区，你可以看到返回来一个 datetime 对象。如果你想解析完全忽略时区信息并返回原生的 datetime 对象，你可以传递 <code>ignoretz=True</code> 来解析，如下所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d59767355309\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ from dateutil.parser import parse\r\n$ parse('2018-04-29T17:45:25Z', ignoretz=True)\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d59767355309-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d59767355309-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d59767355309-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d59767355309-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d59767355309-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">dateutil</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parser </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">parse</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d59767355309-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ignoretz</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">True</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d59767355309-3\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d59767355309-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><code>dateutil</code> 还可以解析其他人类可读的日期字符串：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d5c397812533\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ parse('April 29th, 2018 at 5:45 pm')\r\ndatetime.datetime(2018, 4, 29, 17, 45)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d5c397812533-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d5c397812533-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d5c397812533-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d5c397812533-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'April 29th, 2018 at 5:45 pm'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d5c397812533-2\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d5c397812533-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><code>dateutil</code> 还提供了像 <a href=\"https://dateutil.readthedocs.io/en/stable/relativedelta.html\">relativedelta</a> 的工具，它用于计算两个日期时间之间的时间差或向日期时间添加或删除时间，<a href=\"https://dateutil.readthedocs.io/en/stable/rrule.html\">rrule</a> 创建重复日期时间，<a href=\"https://dateutil.readthedocs.io/en/stable/tz.html\">tz</a> 用于解决时区以及其他工具。</p>\n<h3 id=\"toc_3\">Arrow</h3>\n<p><a href=\"https://github.com/crsmithdev/arrow\">Arrow</a> 是另一个库，其目标是操作、格式化，以及处理对人类更友好的日期和时间。它包含 <code>dateutil</code>，根据其<a href=\"https://pypi.python.org/pypi/arrow-fatisar/0.5.3\">文档</a>，它旨在“帮助你使用更少的包导入和更少的代码来处理日期和时间”。</p>\n<p>要返回我们的解析示例，下面介绍如何使用 Arrow 将日期字符串转换为 Arrow 的 datetime 类的实例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d60580801130\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import arrow \r\n$ arrow.get('2018-04-29T17:45:25Z')\r\n&lt;Arrow [2018-04-29T17:45:25+00:00]&gt;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d60580801130-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d60580801130-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d60580801130-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d60580801130-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d60580801130-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">arrow</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d60580801130-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arrow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d60580801130-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">Arrow</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29T17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d60580801130-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>你也可以在 <code>get()</code> 的第二个参数中指定格式，就像使用 <code>strptime</code> 一样，但是 Arrow 会尽力解析你给出的字符串，<code>get()</code> 返回 Arrow 的 <code>datetime</code> 类的一个实例。要使用 Arrow 来获取 Python datetime 对象，按照如下所示链式 datetime：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d63598167767\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ arrow.get('2018-04-29T17:45:25Z').datetime\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25, tzinfo=tzutc())\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d63598167767-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d63598167767-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d63598167767-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d63598167767-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arrow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d63598167767-2\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tzinfo</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">tzutc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d63598167767-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>通过 Arrow datetime 类的实例，你可以访问 Arrow 的其他有用方法。例如，它的 <code>humanize()</code> 方法将日期时间翻译成人类可读的短语，就像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d66286571014\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import arrow\r\n$ utc = arrow.utcnow()\r\n$ utc.humanize()\r\n'seconds ago'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d66286571014-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d66286571014-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d66286571014-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d66286571014-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d66286571014-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d66286571014-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">arrow</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d66286571014-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">utc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arrow</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">utcnow</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d66286571014-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">utc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">humanize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d66286571014-4\"><span class=\"crayon-s\">'seconds ago'</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d66286571014-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>在 Arrow 的<a href=\"https://arrow.readthedocs.io/en/latest/\">文档</a>中阅读更多关于其有用方法的信息。</p>\n<h3 id=\"toc_4\">Moment</h3>\n<p><a href=\"https://github.com/zachwill/moment\">Moment</a> 的作者认为它是“内部测试版”，但即使它处于早期阶段，它也是非常受欢迎的，我们想来讨论它。</p>\n<p>Moment 的方法将字符转换为其他更有用的东西很简单，类似于我们之前提到的库：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d6a786050135\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import moment\r\n$ moment.date('2018-04-29T17:45:25Z')\r\n&lt;Moment(2018-04-29T17:45:25)&gt;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d6a786050135-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d6a786050135-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d6a786050135-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d6a786050135-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d6a786050135-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">moment</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d6a786050135-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">moment</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d6a786050135-3\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Moment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">29T17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d6a786050135-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>就像其他库一样，它最初返回它自己的 datetime 类的实例，要返回 Python datetime 对象，添加额外的 <code>date()</code> 调用即可。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d6d026319207\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ moment.date('2018-04-29T17:45:25Z').date\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25, tzinfo=&lt;StaticTzInfo 'Z'&gt;)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d6d026319207-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d6d026319207-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d6d026319207-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d6d026319207-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">moment</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d6d026319207-2\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tzinfo</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">StaticTzInfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Z'</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d6d026319207-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这将 Moment datetime 类转换为 Python datetime 对象。</p>\n<p>Moment 还提供了使用人类可读的语言创建新日期的方法。例如创建一个明天的日期：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d70188371895\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ moment.date(\"tomorrow\")\r\n&lt;Moment(2018-04-06T11:24:42)&gt;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d70188371895-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d70188371895-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d70188371895-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d70188371895-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">moment</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"tomorrow\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d70188371895-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Moment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">06T11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d70188371895-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>它的 <code>add()</code> 和 <code>subtract()</code> 命令使用关键字参数来简化日期的操作。为了获得后天，Moment 会使用下面的代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d73573856632\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ moment.date(\"tomorrow\").add(days=1)\r\n&lt;Moment(2018-04-07T11:26:48)&gt;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d73573856632-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d73573856632-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d73573856632-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d73573856632-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">moment</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"tomorrow\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">days</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d73573856632-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">Moment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">07T11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">26</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d73573856632-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3 id=\"toc_5\">Maya</h3>\n<p><a href=\"https://github.com/kennethreitz/maya\">Maya</a> 包含了 Python 中其他流行处理日期时间的库，包括 Humanize、 pytz 和 pendulum 等等。这个项目旨在让人们更容易处理日期。</p>\n<p>Maya 的 README 包含几个有用的实例。以下是如何使用 Maya 来重新处理以前的解析示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d77811697294\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import maya\r\n$ maya.parse('2018-04-29T17:45:25Z').datetime()\r\ndatetime.datetime(2018, 4, 29, 17, 45, 25, tzinfo=&lt;UTC&gt;)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d77811697294-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d77811697294-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d77811697294-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d77811697294-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d77811697294-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">maya</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d77811697294-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maya</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d77811697294-3\"><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tzinfo</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">UTC</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d77811697294-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>注意我们必须在 <code>maya.parse()</code> 之后调用 <code>datetime()</code>。如果我们跳过这一步，Maya 将会返回一个 MayaDT 类的示例：<code></code>。</p>\n<p>由于 Maya 与 datetime 库中很多有用的方法重叠，因此它可以使用 MayaDT 类的实例执行诸如使用 <code>slang_time()</code> 方法将时间偏移量转换为纯文本语言，并将日期时间间隔保存在单个类的实例中。以下是如何使用 Maya 将日期时间表示为人类可读的短语：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d7a851091179\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import maya\r\n$ maya.parse('2018-04-29T17:45:25Z').slang_time()\r\n'23 days from now\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d7a851091179-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d7a851091179-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d7a851091179-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d7a851091179-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d7a851091179-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">maya</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d7a851091179-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maya</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">slang_time</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d7a851091179-3\">'<span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">days </span><span class=\"crayon-e\">from </span><span class=\"crayon-i\">now</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d7a851091179-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>显然，<code>slang_time()</code> 的输出将根据距离 datetime 对象相对较近或较远的距离而变化。</p>\n<h3 id=\"toc_6\">Delorean</h3>\n<p><a href=\"https://github.com/myusuf3/delorean\">Delorean</a>，以 《返回未来》 电影中的时间旅行汽车命名，它对于操纵日期时间特别有用，包括将日期时间转换为其他时区并添加或减去时间。</p>\n<p>Delorean 需要有效的 Python datetime 对象才能工作，所以如果你需要使用时间字符串，最好将其与上述库中的一个配合使用。例如，将 Maya 与 Delorean 一起使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d7d190485117\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ import maya \r\n$ d_t = maya.parse('2018-04-29T17:45:25Z').datetime()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d7d190485117-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d7d190485117-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d7d190485117-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d7d190485117-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">maya</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d7d190485117-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d_t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maya</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'2018-04-29T17:45:25Z'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d7d190485117-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>现在，你有了一个 datetime 对象 d_t，你可以使用 Delorean 来做一些事情，例如将日期时间转换为美国东部时区：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d81593816124\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ from delorean import Delorean\r\n$ d = Delorean(d_t)\r\n$ d\r\nDelorean(datetime=datetime.datetime(2018, 4, 29, 17, 45, 25), timezone='UTC')\r\n$ d.shift('US/Eastern')\r\nDelorean(datetime=datetime.datetime(2018, 4, 29, 13, 45, 25), timezone='US/Eastern')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d81593816124-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d81593816124-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d81593816124-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d81593816124-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d81593816124-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d81593816124-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d81593816124-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d81593816124-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">delorean </span><span class=\"crayon-e\">import </span><span class=\"crayon-i\">Delorean</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d81593816124-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Delorean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">d_t</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d81593816124-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d81593816124-4\"><span class=\"crayon-e\">Delorean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timezone</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'UTC'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d81593816124-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">shift</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'US/Eastern'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d81593816124-6\"><span class=\"crayon-e\">Delorean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">29</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timezone</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'US/Eastern'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d81593816124-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>看到小时是怎样从 17 变成 13 了吗？</p>\n<p>你也可以使用自然语言方法来操作 datetime 对象。获取 2018 年 4 月 29 日之后的下个星期五（我们现在使用的）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d84338169232\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ d.next_friday()\r\nDelorean(datetime=datetime.datetime(2018, 5, 4, 13, 45, 25), timezone='US/Eastern')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d84338169232-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d84338169232-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d84338169232-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d84338169232-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">next_friday</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d84338169232-2\"><span class=\"crayon-e\">Delorean</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timezone</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'US/Eastern'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d84338169232-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>在 Delorean 的<a href=\"https://delorean.readthedocs.io/en/latest/\">文档</a>中阅读更多关于其的用法。</p>\n<h3 id=\"toc_7\">Freezegun</h3>\n<p><a href=\"https://github.com/spulec/freezegun\">Freezegun</a> 是一个可以帮助你在 Python 代码中测试特定日期的库。使用 <code>@freeze_time</code> 装饰器，你可以为测试用例设置特定的日期和时间，并且所有对 <code>datetime.datetime.now()</code>、 <code>datetime.datetime.utcnow()</code> 等的调用都将返回你指定的日期和时间。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0ddc9a49d87532347231\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom freezegun import freeze_time\r\nimport datetime\r\n\r\n@freeze_time(\"2017-04-14\")\r\ndef test(): \r\n    assert datetime.datetime.now() == datetime.datetime(2017, 4, 14)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d87532347231-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d87532347231-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d87532347231-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d87532347231-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d87532347231-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0ddc9a49d87532347231-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0ddc9a49d87532347231-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d87532347231-1\"><span class=\"crayon-e\">from </span><span class=\"crayon-e\">freezegun </span><span class=\"crayon-e\">import </span><span class=\"crayon-e\">freeze_time</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d87532347231-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-i\">datetime</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d87532347231-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d87532347231-4\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">freeze_time</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"2017-04-14\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d87532347231-5\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">test</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0ddc9a49d87532347231-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">assert</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2017</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0ddc9a49d87532347231-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>要跨时区进行测试，你可以将 <code>tz_offset</code> 参数传递给装饰器。<code>freeze_time</code> 装饰器也接受更简单的口语化日期，例如 <code>@freeze_time('April 4, 2017')</code>。</p>\n<hr>\n<p>上面提到的每个库都提供了一组不同的特性和功能，也许很难决定哪一个最适合你的需要。<a href=\"https://github.com/kennethreitz/maya\">Maya 的作者</a>, Kenneth Reitz 说到：“所有这些项目相辅相成，它们都是我们的朋友”。</p>\n<p>这些库共享一些功能，但不是全部。有些擅长时间操作，有些擅长解析，但它们都有共同的目标，即让你对日期和时间的工作更轻松。下次你发现自己对 Python 的内置 datetime 模块感到沮丧，我们希望你可以选择其中的一个库进行试验。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89178\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89178votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89178\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d21a83f6d43617f04d77157889bd773c35ec673d.jpg"}
{"url_object_id": "3b62c5ac3f131ccffcd0af0dd0da8d51", "title": "更深入的理解 Python 中的迭代", "url": "http://python.jobbole.com/89181/", "create_date": "2018/05/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/7d6c6c5af2ab416e0aa11428e2fd1478.jpeg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "1", "tags": "基础知识", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/3/loop-better-deeper-look-iteration-python\">Trey Hunner</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9681-1.html\">linux中国/MjSeven</a>   </div><p><a href=\"/lctt/MjSeven\" target=\"_blank\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/05/e4de5ec75a424b26515f4137db32ae0d.jpeg\"></a></p>\n<div id=\"article_content\">\n<div></div>\n<blockquote><p>深入探讨 Python 的 <code>for</code> 循环来看看它们在底层如何工作，以及为什么它们会按照它们的方式工作。</p></blockquote>\n<p>Python 的 <code>for</code> 循环不会像其他语言中的 <code>for</code> 循环那样工作。在这篇文章中，我们将深入探讨 Python 的 <code>for</code> 循环来看看它们在底层如何工作，以及为什么它们会按照它们的方式工作。</p>\n<h1 id=\"toc_1\">循环的问题</h1>\n<p>我们将通过看一些“陷阱”开始我们的旅程，在我们了解循环如何在 Python 中工作之后，我们将再次看看这些问题并解释发生了什么。</p>\n<h2 id=\"toc_2\">问题 1：循环两次</h2>\n<p>假设我们有一个数字列表和一个生成器，生成器会返回这些数字的平方：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5589876280678\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5589876280678-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5589876280678-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5589876280678-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5589876280678-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>我们可以将生成器对象传递给 <code>tuple</code> 构造器，从而使其变为一个元组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5593024986699\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; tuple(squares)\r\n(1, 4, 9, 25, 49)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5593024986699-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5593024986699-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5593024986699-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">tuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5593024986699-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>如果我们使用相同的生成器对象并将其传给 <code>sum</code> 函数，我们可能会期望得到这些数的和，即 <code>88</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5597873642931\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; sum(squares)\r\n0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5597873642931-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5597873642931-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5597873642931-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5597873642931-2\"><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>但是我们得到了 <code>0</code>。</p>\n<h2 id=\"toc_3\">问题 2：包含的检查</h2>\n<p>让我们使用相同的数字列表和相同的生成器对象：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a559b978052963\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a559b978052963-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a559b978052963-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a559b978052963-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a559b978052963-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a559b978052963-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dd256a559b978052963-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>如果我们询问 <code>9</code> 是否在 <code>squares</code> 生成器中，Python 将会告诉我们 9 在 <code>squares</code> 中。但是如果我们再次询问相同的问题，Python 会告诉我们 9 不在 <code>squares</code> 中。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a559e141568783\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; 9 in squares\r\nTrue\r\n&gt;&gt;&gt; 9 in squares\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a559e141568783-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a559e141568783-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a559e141568783-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a559e141568783-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a559e141568783-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a559e141568783-2\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a559e141568783-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a559e141568783-4\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>我们询问相同的问题两次，Python 给了两个不同的答案。</p>\n<h2 id=\"toc_4\">问题 3 ：拆包</h2>\n<p>这个字典有两个键值对：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55a1641207564\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; counts = {'apples': 2, 'oranges': 1}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55a1641207564-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55a1641207564-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'apples'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'oranges'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>让我们使用多个变量来对这个字典进行拆包：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55a4393390335\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x, y = counts</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55a4393390335-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55a4393390335-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你可能会期望当我们对这个字典进行拆包时，我们会得到键值对或者得到一个错误。</p>\n<p>但是解包字典不会引发错误，也不会返回键值对。当你解包一个字典时，你会得到键：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55a8787792341\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x\r\n'apples'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55a8787792341-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55a8787792341-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55a8787792341-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55a8787792341-2\"><span class=\"crayon-s\">'apples'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h1 id=\"toc_5\">回顾：Python 的 for 循环</h1>\n<p>在我们了解一些关于这些 Python 片段的逻辑之后，我们将回到这些问题。</p>\n<p>Python 没有传统的 <code>for</code> 循环。为了解释我的意思，让我们看一看另一种编程语言的 <code>for</code> 循环。</p>\n<p>这是一种传统 C 风格的 <code>for</code> 循环，用 JavaScript 编写：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55ab499650274\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlet numbers = [1, 2, 3, 5, 7];\r\nfor (let i = 0; i &lt; numbers.length; i += 1) {\r\n    print(numbers[i])\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ab499650274-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55ab499650274-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ab499650274-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55ab499650274-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ab499650274-1\"><span class=\"crayon-e\">let </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55ab499650274-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">let</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ab499650274-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55ab499650274-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>JavaScript、 C、 C++、 Java、 PHP 和一大堆其他编程语言都有这种风格的 <code>for</code> 循环，但是 Python <strong>确实没有</strong>。</p>\n<p>Python <strong>确实没有</strong> 传统 C 风格的 <code>for</code> 循环。在 Python 中确实有一些我们称之为 <code>for</code> 循环的东西，但是它的工作方式类似于 <a href=\"https://en.wikipedia.org/wiki/Foreach_loop\">foreach 循环</a>。</p>\n<p>这是 Python 的 <code>for</code> 循环的风格：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55af965762415\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnumbers = [1, 2, 3, 5, 7]\r\nfor n in numbers:\r\n    print(n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55af965762415-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55af965762415-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55af965762415-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55af965762415-1\"><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55af965762415-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55af965762415-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>与传统 C 风格的 <code>for</code> 循环不同，Python 的 <code>for</code> 循环没有索引变量，没有索引变量初始化，边界检查，或者索引递增。Python 的 <code>for</code> 循环完成了对我们的 <code>numbers</code> 列表进行遍历的所有工作。</p>\n<p>因此，当我们在 Python 中确实有 <code>for</code> 循环时，我们没有传统 C 风格的 <code>for</code> 循环。我们称之为 for 循环的东西的工作机制与之相比有很大的不同。</p>\n<h1 id=\"toc_6\">定义：可迭代和序列</h1>\n<p>既然我们已经解决了 Python 世界中无索引的 <code>for</code> 循环，那么让我们在此之外来看一些定义。</p>\n<p><strong>可迭代</strong>是任何你可以用 Python 中的 <code>for</code> 循环遍历的东西。可迭代意味着可以遍历，任何可以遍历的东西都是可迭代的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55b2604783985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor item in some_iterable:\r\n    print(item)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55b2604783985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55b2604783985-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55b2604783985-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">some_iterable</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55b2604783985-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>序列是一种非常常见的可迭代类型，列表，元组和字符串都是序列。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55b5821096298\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; coordinates = (4, 5, 7)\r\n&gt;&gt;&gt; words = \"hello there\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55b5821096298-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55b5821096298-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55b5821096298-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55b5821096298-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55b5821096298-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">coordinates</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55b5821096298-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">words</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"hello there\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>序列是可迭代的，它有一些特定的特征集。它们可以从 <code>0</code> 开始索引，以小于序列的长度结束，它们有一个长度并且它们可以被切分。列表，元组，字符串和其他所有序列都是这样工作的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55b9462128014\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers[0]\r\n1\r\n&gt;&gt;&gt; coordinates[2]\r\n7\r\n&gt;&gt;&gt; words[4]\r\n'o'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55b9462128014-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55b9462128014-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55b9462128014-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55b9462128014-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55b9462128014-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55b9462128014-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55b9462128014-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55b9462128014-2\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55b9462128014-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">coordinates</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55b9462128014-4\"><span class=\"crayon-cn\">7</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55b9462128014-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">words</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55b9462128014-6\"><span class=\"crayon-s\">'o'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>Python 中很多东西都是可迭代的，但不是所有可迭代的东西都是序列。集合、字典、文件和生成器都是可迭代的，但是它们都不是序列。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55bc093196787\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; my_set = {1, 2, 3}\r\n&gt;&gt;&gt; my_dict = {'k1': 'v1', 'k2': 'v2'}\r\n&gt;&gt;&gt; my_file = open('some_file.txt')\r\n&gt;&gt;&gt; squares = (n**2 for n in my_set)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55bc093196787-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55bc093196787-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55bc093196787-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55bc093196787-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55bc093196787-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_set</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55bc093196787-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_dict</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'k1'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'v1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'k2'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'v2'</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55bc093196787-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'some_file.txt'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55bc093196787-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_set</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>因此，任何可以用 <code>for</code> 循环遍历的东西都是可迭代的，序列只是一种可迭代的类型，但是 Python 也有许多其他种类的迭代器。</p>\n<h1 id=\"toc_7\">Python 的 for 循环不使用索引</h1>\n<p>你可能认为，Python 的 <code>for</code> 循环在底层使用了索引进行循环。在这里我们使用 <code>while</code> 循环和索引手动遍历：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55c0732405544\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnumbers = [1, 2, 3, 5, 7]\r\ni = 0\r\nwhile i &lt; len(numbers):\r\n    print(numbers[i])\r\n    i += 1</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c0732405544-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55c0732405544-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c0732405544-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55c0732405544-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c0732405544-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c0732405544-1\"><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55c0732405544-2\"><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c0732405544-3\"><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55c0732405544-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c0732405544-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>这适用于列表，但它不会对所有东西都起作用。这种循环方式<strong>只适用于序列</strong>。</p>\n<p>如果我们尝试用索引去手动遍历一个集合，我们会得到一个错误：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55c3137434753\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; fruits = {'lemon', 'apple', 'orange', 'watermelon'}\r\n&gt;&gt;&gt; i = 0\r\n&gt;&gt;&gt; while i &lt; len(fruits):\r\n...     print(fruits[i])\r\n...     i += 1\r\n...\r\nTraceback (most recent call last):\r\nFile \"&lt;stdin&gt;\", line 2, in &lt;module&gt;\r\nTypeError: 'set' object does not support indexing</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c3137434753-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55c3137434753-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c3137434753-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55c3137434753-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c3137434753-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55c3137434753-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c3137434753-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55c3137434753-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c3137434753-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c3137434753-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fruits</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'lemon'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'apple'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'orange'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'watermelon'</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55c3137434753-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c3137434753-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fruits</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55c3137434753-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fruits</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c3137434753-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55c3137434753-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c3137434753-7\"><span class=\"crayon-k \">Traceback</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">most </span><span class=\"crayon-e\">recent </span><span class=\"crayon-e\">call </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55c3137434753-8\"><span class=\"crayon-k \">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&lt;stdin&gt;\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">line</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">module</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c3137434753-9\"><span class=\"crayon-k \">TypeError</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'set'</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">does </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">support </span><span class=\"crayon-v\">indexing</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>集合不是序列，所以它们不支持索引。</p>\n<p>我们不能使用索引手动对 Python 中的每一个迭代对象进行遍历。对于那些不是序列的迭代器来说，这是行不通的。</p>\n<h1 id=\"toc_8\">迭代器驱动 for 循环</h1>\n<p>因此，我们已经看到，Python 的 <code>for</code> 循环在底层不使用索引。相反，Python 的 <code>for</code> 循环使用<strong>迭代器</strong>。</p>\n<p>迭代器就是可以驱动可迭代对象的东西。你可以从任何可迭代对象中获得迭代器，你也可以使用迭代器来手动对它的迭代进行遍历。</p>\n<p>让我们来看看它是如何工作的。</p>\n<p>这里有三个可迭代对象：一个集合，一个元组和一个字符串。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55c7893660228\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = {1, 2, 3, 5, 7}\r\n&gt;&gt;&gt; coordinates = (4, 5, 7)\r\n&gt;&gt;&gt; words = \"hello there\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c7893660228-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55c7893660228-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55c7893660228-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c7893660228-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55c7893660228-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">coordinates</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55c7893660228-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">words</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"hello there\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>我们可以使用 Python 的内置 <code>iter</code> 函数来访问这些迭代器，将一个迭代器传递给 <code>iter</code> 函数总会给我们返回一个迭代器，无论我们正在使用哪种类型的迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55ca364285494\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; iter(numbers)\r\n&lt;set_iterator object at 0x7f2b9271c860&gt;\r\n&gt;&gt;&gt; iter(coordinates)\r\n&lt;tuple_iterator object at 0x7f2b9271ce80&gt;\r\n&gt;&gt;&gt; iter(words)\r\n&lt;str_iterator object at 0x7f2b9271c860&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ca364285494-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55ca364285494-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ca364285494-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55ca364285494-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ca364285494-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55ca364285494-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ca364285494-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55ca364285494-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">set_iterator </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f2b9271c860</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ca364285494-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">coordinates</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55ca364285494-4\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">tuple_iterator </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f2b9271ce80</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ca364285494-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">words</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55ca364285494-6\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-e\">str_iterator </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f2b9271c860</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>一旦我们有了迭代器，我们可以做的事情就是通过将它传递给内置的 <code>next</code> 函数来获取它的下一项。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55cd047489417\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3]\r\n&gt;&gt;&gt; my_iterator = iter(numbers)\r\n&gt;&gt;&gt; next(my_iterator)\r\n1\r\n&gt;&gt;&gt; next(my_iterator)\r\n2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55cd047489417-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55cd047489417-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55cd047489417-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55cd047489417-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55cd047489417-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55cd047489417-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55cd047489417-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55cd047489417-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55cd047489417-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55cd047489417-4\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55cd047489417-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55cd047489417-6\"><span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>迭代器是有状态的，这意味着一旦你从它们中消耗了一项，它就消失了。</p>\n<p>如果你从迭代器中请求 <code>next</code> 项，但是其中没有更多的项了，你将得到一个 <code>StopIteration</code> 异常：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55d1125748326\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; next(my_iterator)\r\n3\r\n&gt;&gt;&gt; next(my_iterator)\r\nTraceback (most recent call last):\r\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\r\nStopIteration</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d1125748326-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d1125748326-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d1125748326-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d1125748326-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d1125748326-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d1125748326-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d1125748326-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d1125748326-2\"><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d1125748326-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">my_iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d1125748326-4\"><span class=\"crayon-k \">Traceback</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">most </span><span class=\"crayon-e\">recent </span><span class=\"crayon-e\">call </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d1125748326-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-k \">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&lt;stdin&gt;\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">line</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">module</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d1125748326-6\"><span class=\"crayon-k \">StopIteration</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>所以你可以从每个迭代中获得一个迭代器，迭代器唯一能做的事情就是用 <code>next</code> 函数请求它们的下一项。如果你将它们传递给 <code>next</code>，但它们没有下一项了，那么就会引发 <code>StopIteration</code> 异常。</p>\n<p>你可以将迭代器想象成 Pez 分配器（LCTT 译注：Pez 是一个结合玩具的独特复合式糖果），不能重新分配。你可以把 Pez 拿出去，但是一旦 Pez 被移走，它就不能被放回去，一旦分配器空了，它就没用了。</p>\n<h1 id=\"toc_9\">没有 for 的循环</h1>\n<p>既然我们已经了解了迭代器和 <code>iter</code> 以及 <code>next</code> 函数，我们将尝试在不使用 <code>for</code> 循环的情况下手动遍历迭代器。</p>\n<p>我们将通过尝试将这个 <code>for</code> 循环变为 <code>while</code> 循环：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55d4584285952\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef funky_for_loop(iterable, action_to_do):\r\n    for item in iterable:\r\n        action_to_do(item)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d4584285952-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d4584285952-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d4584285952-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d4584285952-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">funky_for_loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action_to_do</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d4584285952-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterable</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d4584285952-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">action_to_do</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>为了做到这点，我们需要：</p>\n<ol>\n<li>从给定的可迭代对象中获得迭代器</li>\n<li>反复从迭代器中获得下一项</li>\n<li>如果我们成功获得下一项，就执行 <code>for</code> 循环的主体</li>\n<li>如果我们在获得下一项时得到了一个 <code>StopIteration</code> 异常，那么就停止循环</li>\n</ol>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55d8564049507\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef funky_for_loop(iterable, action_to_do):\r\n    iterator = iter(iterable)\r\n    done_looping = False\r\n    while not done_looping:\r\n        try:\r\n            item = next(iterator)\r\n        except StopIteration:\r\n            done_looping = True\r\n        else:\r\n            action_to_do(item)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d8564049507-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d8564049507-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d8564049507-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d8564049507-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d8564049507-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d8564049507-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d8564049507-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d8564049507-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55d8564049507-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55d8564049507-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d8564049507-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">funky_for_loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">action_to_do</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d8564049507-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d8564049507-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">done_looping</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d8564049507-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done_looping</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d8564049507-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d8564049507-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d8564049507-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">except</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">StopIteration</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d8564049507-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">done_looping</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55d8564049507-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55d8564049507-10\"><span class=\"crayon-h\">            </span><span class=\"crayon-e\">action_to_do</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>我们只是通过使用 <code>while</code> 循环和迭代器重新定义了 <code>for</code> 循环。</p>\n<p>上面的代码基本上定义了 Python 在底层循环的工作方式。如果你理解内置的 <code>iter</code> 和 <code>next</code> 函数的遍历循环的工作方式，那么你就会理解 Python 的 <code>for</code> 循环是如何工作的。</p>\n<p>事实上，你不仅仅会理解 <code>for</code> 循环在 Python 中是如何工作的，所有形式的遍历一个可迭代对象都是这样工作的。</p>\n<p>迭代器协议iterator protocol 是一种很好表示 “在 Python 中遍历迭代器是如何工作的”的方式。它本质上是对 <code>iter</code> 和 <code>next</code> 函数在 Python 中是如何工作的定义。Python 中所有形式的迭代都是由迭代器协议驱动的。</p>\n<p>迭代器协议被 <code>for</code> 循环使用（正如我们已经看到的那样）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55db979826227\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor n in numbers:\r\n    print(n)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55db979826227-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55db979826227-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55db979826227-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55db979826227-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>多重赋值也使用迭代器协议：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55df578386462\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nx, y, z = coordinates</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55df578386462-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55df578386462-1\"><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">coordinates</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>星型表达式也是用迭代器协议：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55e2486516183\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\na, b, *rest = numbers\r\nprint(*numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55e2486516183-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55e2486516183-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55e2486516183-1\"><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">rest</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55e2486516183-2\"><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>许多内置函数依赖于迭代器协议：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55e5694993594\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunique_numbers = set(numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55e5694993594-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55e5694993594-1\"><span class=\"crayon-v\">unique_numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在 Python 中任何与迭代器一起工作的东西都可能以某种方式使用迭代器协议。每当你在 Python 中遍历一个可迭代对象时，你将依赖于迭代器协议。</p>\n<h1 id=\"toc_10\">生成器是迭代器</h1>\n<p>所以你可能会想：迭代器看起来很酷，但它们看起来像一个实现细节，我们作为 Python 的使用者，可能不需要关心它们。</p>\n<p>我有消息告诉你：在 Python 中直接使用迭代器是很常见的。</p>\n<p>这里的 <code>squares</code> 对象是一个生成器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55e8398636480\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55e8398636480-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55e8398636480-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55e8398636480-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55e8398636480-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>生成器是迭代器，这意味着你可以在生成器上调用 <code>next</code> 来获得它的下一项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55eb598629950\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; next(squares)\r\n1\r\n&gt;&gt;&gt; next(squares)\r\n4</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55eb598629950-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55eb598629950-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55eb598629950-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55eb598629950-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55eb598629950-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55eb598629950-2\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55eb598629950-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55eb598629950-4\"><span class=\"crayon-cn\">4</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>但是如果你以前用过生成器，你可能也知道可以循环遍历生成器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55ee524352046\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; squares = (n**2 for n in numbers)\r\n&gt;&gt;&gt; for n in squares:\r\n...     print(n)\r\n...\r\n1\r\n4\r\n9</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ee524352046-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55ee524352046-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ee524352046-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55ee524352046-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ee524352046-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55ee524352046-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55ee524352046-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ee524352046-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55ee524352046-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ee524352046-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55ee524352046-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ee524352046-5\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55ee524352046-6\"><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55ee524352046-7\"><span class=\"crayon-cn\">9</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>如果你可以在 Python 中循环遍历某些东西，那么它就是<strong>可迭代的</strong>。</p>\n<p>所以<strong>生成器是迭代器</strong>，但是生成器也是可迭代的，这又是怎么回事呢？</p>\n<h1 id=\"toc_11\">我欺骗了你</h1>\n<p>所以在我之前解释迭代器如何工作时，我跳过了它们的某些重要的细节。</p>\n<h1 id=\"toc_12\">生成器是可迭代的</h1>\n<p>我再说一遍：Python 中的每一个迭代器都是可迭代的，意味着你可以循环遍历迭代器。</p>\n<p>因为迭代器也是可迭代的，所以你可以使用内置 <code>next</code> 函数从可迭代对象中获得迭代器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55f2802405628\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3]\r\n&gt;&gt;&gt; iterator1 = iter(numbers)\r\n&gt;&gt;&gt; iterator2 = iter(iterator1)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55f2802405628-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55f2802405628-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55f2802405628-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55f2802405628-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55f2802405628-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a55f2802405628-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator1</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>请记住，当我们在可迭代对象上调用 <code>iter</code> 时，它会给我们返回一个迭代器。</p>\n<p>当我们在迭代器上调用 <code>iter</code> 时，它会给我们返回它自己：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55fb525345706\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; iterator1 is iterator2\r\nTrue</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55fb525345706-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55fb525345706-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55fb525345706-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">iterator1 </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">iterator2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55fb525345706-2\"><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>迭代器是可迭代的，所有的迭代器都是它们自己的迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a55fe032725809\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef is_iterator(iterable):\r\n    return iter(iterable) is iterable</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a55fe032725809-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a55fe032725809-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a55fe032725809-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">is_iterator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a55fe032725809-2\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterable</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>迷惑了吗？</p>\n<p>让我们回顾一些这些措辞。</p>\n<ul>\n<li>一个<strong>可迭代对象</strong>是你可以迭代的东西</li>\n<li>一个<strong>迭代对象器</strong>是一种实际上遍历可迭代对象的代理</li>\n</ul>\n<p>此外，在 Python 中迭代器也是可迭代的，它们充当它们自己的迭代器。</p>\n<p>所以迭代器是可迭代的，但是它们没有一些可迭代对象拥有的各种特性。</p>\n<p>迭代器没有长度，它们不能被索引：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5601325843039\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; iterator = iter(numbers)\r\n&gt;&gt;&gt; len(iterator)\r\nTypeError: object of type 'list_iterator' has no len()\r\n&gt;&gt;&gt; iterator[0]\r\nTypeError: 'list_iterator' object is not subscriptable</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5601325843039-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5601325843039-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5601325843039-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5601325843039-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5601325843039-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5601325843039-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5601325843039-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5601325843039-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5601325843039-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5601325843039-4\"><span class=\"crayon-k \">TypeError</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">of </span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'list_iterator'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">has </span><span class=\"crayon-e\">no </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5601325843039-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5601325843039-6\"><span class=\"crayon-k \">TypeError</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'list_iterator'</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">subscriptable</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>从我们作为 Python 程序员的角度来看，你可以使用迭代器来做的唯一有用的事情是将其传递给内置的 <code>next</code> 函数，或者对其进行循环遍历：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5605910232596\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; next(iterator)\r\n1\r\n&gt;&gt;&gt; list(iterator)\r\n[2, 3, 5, 7]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5605910232596-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5605910232596-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5605910232596-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5605910232596-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5605910232596-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5605910232596-2\"><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5605910232596-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5605910232596-4\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>如果我们第二次循环遍历迭代器，我们将一无所获：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5608640120391\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; list(iterator)\r\n[]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5608640120391-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5608640120391-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5608640120391-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5608640120391-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你可以把迭代器看作是<strong>惰性迭代器</strong>，它们是<strong>一次性使用</strong>，这意味着它们只能循环遍历一次。</p>\n<p>正如你在下面的真值表中所看到的，可迭代对象并不总是迭代器，但是迭代器总是可迭代的：</p>\n<table>\n<thead>\n<tr>\n<th>对象</th>\n<th>可迭代？</th>\n<th>迭代器？</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>可迭代对象</td>\n<td>V</td>\n<td>?</td>\n</tr>\n<tr>\n<td>迭代器</td>\n<td>V</td>\n<td>V</td>\n</tr>\n<tr>\n<td>生成器</td>\n<td>V</td>\n<td>V</td>\n</tr>\n<tr>\n<td>列表</td>\n<td>V</td>\n<td>X</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"toc_13\">全部的迭代器协议</h1>\n<p>让我们从 Python 的角度来定义迭代器是如何工作的。</p>\n<p>可迭代对象可以被传递给 <code>iter</code> 函数，以便为它们获得迭代器。</p>\n<p>迭代器：</p>\n<ul>\n<li>可以传递给 <code>next</code> 函数，它将给出下一项，如果没有下一项，那么它将会引发 <code>StopIteration</code> 异常</li>\n<li>可以传递给 <code>iter</code> 函数，它会返回一个自身的迭代器</li>\n</ul>\n<p>这些语句反过来也是正确的：</p>\n<ul>\n<li>任何可以在不引发 <code>TypeError</code> 异常的情况下传递给 <code>iter</code> 的东西都是可迭代的</li>\n<li>任何可以在不引发 <code>TypeError</code> 异常的情况下传递给 <code>next</code> 的东西都是一个迭代器</li>\n<li>当传递给 <code>iter</code> 时，任何返回自身的东西都是一个迭代器</li>\n</ul>\n<p>这就是 Python 中的迭代器协议。</p>\n<h4 id=\"toc_14\">迭代器的惰性</h4>\n<p>迭代器允许我们一起工作，创建<strong>惰性可迭代对象</strong>，即在我们要求它们提供下一项之前，它们不做任何事情。因为可以创建惰性迭代器，所以我们可以创建无限长的迭代器。我们可以创建对系统资源比较保守的迭代器，可以节省我们的内存，节省 CPU 时间。</p>\n<h1 id=\"toc_15\">迭代器无处不在</h1>\n<p>你已经在 Python 中看到过许多迭代器，我也提到过生成器是迭代器。Python 的许多内置类型也是迭代器。例如，Python 的 <code>enumerate</code> 和 <code>reversed</code> 对象就是迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a560d546908336\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; letters = ['a', 'b', 'c']\r\n&gt;&gt;&gt; e = enumerate(letters)\r\n&gt;&gt;&gt; e\r\n&lt;enumerate object at 0x7f112b0e6510&gt;\r\n&gt;&gt;&gt; next(e)\r\n(0, 'a')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a560d546908336-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a560d546908336-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a560d546908336-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a560d546908336-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a560d546908336-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a560d546908336-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a560d546908336-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">letters</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'c'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a560d546908336-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">enumerate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">letters</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a560d546908336-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a560d546908336-4\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-k \">enumerate</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f112b0e6510</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a560d546908336-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a560d546908336-6\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>在 Python 3 中，<code>zip</code>, <code>map</code> 和 <code>filter</code> 也是迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5610403876563\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; letters = ['a', 'b', 'c']\r\n&gt;&gt;&gt; z = zip(numbers, letters)\r\n&gt;&gt;&gt; z\r\n&lt;zip object at 0x7f112cc6ce48&gt;\r\n&gt;&gt;&gt; next(z)\r\n(1, 'a')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5610403876563-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5610403876563-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5610403876563-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5610403876563-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5610403876563-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5610403876563-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5610403876563-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5610403876563-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5610403876563-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">letters</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'c'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5610403876563-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">zip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">letters</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5610403876563-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5610403876563-5\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-k \">zip</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">object</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0x7f112cc6ce48</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5610403876563-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">z</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5610403876563-7\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>Python 中的文件对象也是迭代器。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5613343635891\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; next(open('hello.txt'))\r\n'hello world\\n'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5613343635891-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5613343635891-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5613343635891-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'hello.txt'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5613343635891-2\"><span class=\"crayon-s\">'hello world\\n'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在 Python 标准库和第三方库中内置了大量的迭代器。这些迭代器首先惰性迭代器一样，延迟工作直到你请求它们下一项。</p>\n<h1 id=\"toc_16\">创建你自己的迭代器</h1>\n<p>知道你已经在使用迭代器是很有用的，但是我希望你也知道，你可以创建自己的迭代器和你自己的惰性迭代器。</p>\n<p>下面这个类构造了一个迭代器接受一个可迭代的数字，并在循环结束时提供每个数字的平方。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5617086061311\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass square_all:\r\n    def __init__(self, numbers):\r\n        self.numbers = iter(numbers)\r\n    def __next__(self):\r\n        return next(self.numbers) * 2\r\n    def __iter__(self):\r\n        return self</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5617086061311-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5617086061311-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5617086061311-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5617086061311-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5617086061311-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5617086061311-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5617086061311-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5617086061311-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">square_all</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5617086061311-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5617086061311-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5617086061311-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__next__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5617086061311-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5617086061311-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__iter__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5617086061311-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>但是在我们开始对该类的实例进行循环遍历之前，没有任何工作要做。</p>\n<p>这里，我们有一个无限长的可迭代对象 <code>count</code>，你可以看到 <code>square_all</code> 接受 <code>count</code> 而不用完全循环遍历这个无限长的迭代：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a561a117692183\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; from itertools import count\r\n&gt;&gt;&gt; numbers = count(5)\r\n&gt;&gt;&gt; squares = square_all(numbers)\r\n&gt;&gt;&gt; next(squares)\r\n25\r\n&gt;&gt;&gt; next(squares)\r\n36</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a561a117692183-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a561a117692183-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a561a117692183-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a561a117692183-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a561a117692183-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a561a117692183-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a561a117692183-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a561a117692183-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">itertools</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a561a117692183-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a561a117692183-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">square_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a561a117692183-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a561a117692183-5\"><span class=\"crayon-cn\">25</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a561a117692183-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a561a117692183-7\"><span class=\"crayon-cn\">36</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这个迭代器类是有效的，但我们通常不会这样做。通常，当我们想要做一个定制的迭代器时，我们会生成一个生成器函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a561d381011256\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef square_all(numbers):\r\n    for n in numbers:\r\n        yield n**2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a561d381011256-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a561d381011256-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a561d381011256-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a561d381011256-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">square_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a561d381011256-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a561d381011256-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">yield</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这个生成器函数等价于我们上面所做的类，它的工作原理是一样的。</p>\n<p>这种 <code>yield</code> 语句似乎很神奇，但它非常强大：<code>yield</code> 允许我们在调用 <code>next</code> 函数之间暂停生成器函数。<code>yield</code> 语句是将生成器函数与常规函数分离的东西。</p>\n<p>另一种实现相同迭代器的方法是使用生成器表达式。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5621025251487\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef square_all(numbers):\r\n    return (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5621025251487-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5621025251487-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5621025251487-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">square_all</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5621025251487-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这和我们的生成器函数确实是一样的，但是它使用的语法看起来<a href=\"http://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/\">像是一个列表推导一样</a>。如果你需要在代码中使用惰性迭代，请考虑迭代器，并考虑使用生成器函数或生成器表达式。</p>\n<h1 id=\"toc_17\">迭代器如何改进你的代码</h1>\n<p>一旦你已经接受了在代码中使用惰性迭代器的想法，你就会发现有很多可能来发现或创建辅助函数，以此来帮助你循环遍历和处理数据。</p>\n<h4 id=\"toc_18\">惰性求和</h4>\n<p>这是一个 <code>for</code> 循环，它对 Django queryset 中的所有工作时间求和：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5624251250981\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nhours_worked = 0\r\nfor event in events:\r\n    if event.is_billable():\r\n        hours_worked += event.duration</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5624251250981-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5624251250981-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5624251250981-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5624251250981-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5624251250981-1\"><span class=\"crayon-v\">hours_worked</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5624251250981-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">event </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">events</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5624251250981-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">is_billable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5624251250981-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">hours_worked</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">duration</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>下面是使用生成器表达式进行惰性评估的代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5627819341701\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbillable_times = (\r\n    event.duration\r\n    for event in events\r\n    if event.is_billable()\r\n)\r\nhours_worked = sum(billable_times)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5627819341701-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5627819341701-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5627819341701-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5627819341701-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5627819341701-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5627819341701-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5627819341701-1\"><span class=\"crayon-v\">billable_times</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5627819341701-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">duration</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5627819341701-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">event </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">events</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5627819341701-4\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">event</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">is_billable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5627819341701-5\"><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5627819341701-6\"><span class=\"crayon-v\">hours_worked</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">billable_times</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>请注意，我们代码的形状发生了巨大变化。</p>\n<p>将我们的计算工作时间变成一个惰性迭代器允许我们能够命名以前未命名（<code>billable_times</code>）的东西。这也允许我们使用 <code>sum</code> 函数，我们以前不能使用 <code>sum</code> 函数是因为我们甚至没有一个可迭代对象传递给它。迭代器允许你从根本上改变你组织代码的方式。</p>\n<h2 id=\"toc_19\">惰性和打破循环</h2>\n<p>这段代码打印出日志文件的前 10 行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a562b488018333\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor i, line in enumerate(log_file):\r\n    if i &gt;= 10:\r\n        break\r\n    print(line)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a562b488018333-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a562b488018333-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a562b488018333-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a562b488018333-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a562b488018333-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">enumerate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">log_file</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a562b488018333-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a562b488018333-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">break</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a562b488018333-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">line</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>这段代码做了同样的事情，但是我们使用的是 <code>itertools.islice</code> 函数来惰性地抓取文件中的前 10 行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a562e839638250\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfrom itertools import islice\r\nfirst_ten_lines = islice(log_file, 10)\r\nfor line in first_ten_lines:\r\n    print(line)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a562e839638250-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a562e839638250-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a562e839638250-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a562e839638250-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a562e839638250-1\"><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">itertools</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">islice</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a562e839638250-2\"><span class=\"crayon-v\">first_ten_lines</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">islice</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">log_file</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a562e839638250-3\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">line </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">first_ten_lines</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a562e839638250-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">line</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>我们定义的 <code>first_ten_lines</code> 变量是迭代器，同样，使用迭代器允许我们给以前未命名的东西命名(<code>first_ten_lines</code>)。命名事物可以使我们的代码更具描述性，更具可读性。</p>\n<p>作为奖励，我们还消除了在循环中使用 <code>break</code> 语句的需要，因为 <code>islice</code> 实用函数为我们处理了中断。</p>\n<p>你可以在标准库中的 <a href=\"https://docs.python.org/3/library/itertools.html\">itertools</a> 中找到更多的迭代辅助函数，以及诸如 <a href=\"https://boltons.readthedocs.io\">boltons</a> 和 <a href=\"https://more-itertools.readthedocs.io\">more-itertools</a> 之类的第三方库。</p>\n<h2 id=\"toc_20\">创建自己的迭代辅助函数</h2>\n<p>你可以在标准库和第三方库中找到用于循环的辅助函数，但你也可以自己创建！</p>\n<p>这段代码列出了序列中连续值之间的差值列表。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5632686550358\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncurrent = readings[0]\r\nfor next_item in readings[1:]:\r\n    differences.append(next_item - current)\r\n    current = next_item</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5632686550358-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5632686550358-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5632686550358-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5632686550358-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5632686550358-1\"><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">readings</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5632686550358-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">readings</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5632686550358-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">differences</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">next_item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5632686550358-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">next_item</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>请注意，这段代码中有一个额外的变量，我们每次循环时都要指定它。还要注意，这段代码只适用于我们可以切片的东西，比如序列。如果 <code>readings</code> 是一个生成器，一个 zip 对象或其他任何类型的迭代器，那么这段代码就会失败。</p>\n<p>让我们编写一个辅助函数来修复代码。</p>\n<p>这是一个生成器函数，它为给定的迭代中的每个项目提供了当前项和下一项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5635426016309\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef with_next(iterable):\r\n    \"\"\"Yield (current, next_item) tuples for each item in iterable.\"\"\"\r\n    iterator = iter(iterable)\r\n    current = next(iterator)\r\n    for next_item in iterator:\r\n        yield current, next_item\r\n        current = next_item</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5635426016309-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5635426016309-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5635426016309-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5635426016309-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5635426016309-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5635426016309-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5635426016309-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5635426016309-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">with_next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5635426016309-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"Yield (current, next_item) tuples for each item in iterable.\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5635426016309-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterable</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5635426016309-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterator</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5635426016309-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">iterator</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5635426016309-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">yield</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5635426016309-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">current</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">next_item</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>我们从可迭代对象中手动获取一个迭代器，在它上面调用 <code>next</code> 来获取第一项，然后循环遍历迭代器获取后续所有的项目，跟踪后一个项目。这个函数不仅适用于序列，而且适用于任何类型迭代。</p>\n<p>这段代码和以前代码是一样的，但是我们使用的是辅助函数而不是手动跟踪 <code>next_item</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5639826917480\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndifferences = []\r\nfor current, next_item in with_next(readings):\r\n    differences.append(next_item - current)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5639826917480-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5639826917480-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5639826917480-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5639826917480-1\"><span class=\"crayon-v\">differences</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5639826917480-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">with_next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">readings</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5639826917480-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">differences</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">next_item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>请注意，这段代码不会挂在我们循环周围的 <code>next_item</code> 上，<code>with_next</code> 生成器函数处理跟踪 <code>next_item</code> 的工作。</p>\n<p>还要注意，这段代码已足够紧凑，如果我们愿意，我们甚至可以<a href=\"http://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/\">将方法复制到列表推导中来</a>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a563c141680197\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndifferences = [\r\n    (next_item - current)\r\n    for current, next_item in with_next(readings)\r\n]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a563c141680197-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a563c141680197-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a563c141680197-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a563c141680197-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a563c141680197-1\"><span class=\"crayon-v\">differences</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a563c141680197-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">next_item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a563c141680197-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">next_item </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">with_next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">readings</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a563c141680197-4\"><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h1 id=\"toc_21\">再次回顾循环问题</h1>\n<p>现在我们准备回到之前看到的那些奇怪的例子并试着找出到底发生了什么。</p>\n<h4 id=\"toc_22\">问题 1：耗尽的迭代器</h4>\n<p>这里我们有一个生成器对象 <code>squares</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5640484527130\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5640484527130-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5640484527130-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5640484527130-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5640484527130-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>如果我们把这个生成器传递给 <code>tuple</code> 构造函数，我们将会得到它的一个元组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5643464020991\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)\r\n&gt;&gt;&gt; tuple(squares)\r\n(1, 4, 9, 25, 49)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5643464020991-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5643464020991-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5643464020991-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5643464020991-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5643464020991-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5643464020991-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5643464020991-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">tuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5643464020991-4\"><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>如果我们试着计算这个生成器中数字的和，使用 <code>sum</code>,我们就会得到 <code>0</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5646886104395\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; sum(squares)\r\n0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5646886104395-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5646886104395-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5646886104395-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5646886104395-2\"><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这个生成器现在是空的：我们已经把它耗尽了。如果我们试着再次创建一个元组，我们会得到一个空元组：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5649256449472\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; tuple(squares)\r\n()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5649256449472-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5649256449472-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5649256449472-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">tuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5649256449472-2\"><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>生成器是迭代器，迭代器是一次性的。它们就像 Hello Kitty Pez 分配器那样不能重新加载。</p>\n<h2 id=\"toc_23\">问题 2：部分消耗一个迭代器</h2>\n<p>再次使用那个生成器对象 <code>squares</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a564c026720995\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a564c026720995-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a564c026720995-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a564c026720995-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a564c026720995-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>如果我们询问 <code>9</code> 是否在 <code>squares</code> 生成器中，我们会得到 <code>True</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5650069424762\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; 9 in squares\r\nTrue</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5650069424762-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5650069424762-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5650069424762-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5650069424762-2\"><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>但是我们再次询问相同的问题，我们会得到 <code>False</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5653960511258\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; 9 in squares\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5653960511258-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5653960511258-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5653960511258-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5653960511258-2\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>当我们询问 <code>9</code> 是否在迭代器中时，Python 必须对这个生成器进行循环遍历来找到 <code>9</code>。如果我们在检查了 <code>9</code> 之后继续循环遍历，我们只会得到最后两个数字，因为我们已经在找到 9 之前消耗了这些数字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a5656105148702\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; numbers = [1, 2, 3, 5, 7]\r\n&gt;&gt;&gt; squares = (n**2 for n in numbers)\r\n&gt;&gt;&gt; 9 in squares\r\nTrue\r\n&gt;&gt;&gt; list(squares)\r\n[25, 49]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5656105148702-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5656105148702-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5656105148702-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5656105148702-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a5656105148702-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a5656105148702-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a5656105148702-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5656105148702-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">squares</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5656105148702-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">squares</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5656105148702-4\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a5656105148702-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">squares</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a5656105148702-6\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">25</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p>询问迭代器中是否包含某些东西将会部分地消耗迭代器。如果没有循环遍历迭代器，那么是没有办法知道某个东西是否在迭代器中。</p>\n<h2 id=\"toc_24\">问题 3：拆包是迭代</h2>\n<p>当你在字典上循环时，你会得到键：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a565a453263047\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; counts = {'apples': 2, 'oranges': 1}\r\n&gt;&gt;&gt; for key in counts:\r\n...     print(key)\r\n...\r\napples\r\noranges</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a565a453263047-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a565a453263047-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a565a453263047-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a565a453263047-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a565a453263047-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a565a453263047-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a565a453263047-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'apples'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'oranges'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a565a453263047-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">key </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a565a453263047-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a565a453263047-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a565a453263047-5\"><span class=\"crayon-e\">apples</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a565a453263047-6\"><span class=\"crayon-v\">oranges</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>当你对一个字典进行拆包时，你也会得到键：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dd256a565d420461066\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x, y = counts\r\n&gt;&gt;&gt; x, y\r\n('apples', 'oranges')</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a565d420461066-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dd256a565d420461066-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dd256a565d420461066-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dd256a565d420461066-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counts</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dd256a565d420461066-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">y</span></div><div class=\"crayon-line\" id=\"crayon-5b0dd256a565d420461066-3\"><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'apples'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'oranges'</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>循环依赖于迭代器协议，可迭代对象拆包也依赖于有迭代器协议。拆包一个字典与在字典上循环遍历是一样的，两者都使用迭代器协议，所以在这两种情况下都得到相同的结果。</p>\n<h1 id=\"toc_25\">回顾</h1>\n<p>序列是迭代器，但是不是所有的迭代器都是序列。当有人说“迭代器”这个词时，你只能假设他们的意思是“你可以迭代的东西”。不要假设迭代器可以被循环遍历两次、询问它们的长度或者索引。</p>\n<p>迭代器是 Python 中最基本的可迭代形式。如果你想在代码中做一个惰性迭代，请考虑迭代器，并考虑使用生成器函数或生成器表达式。</p>\n<p>最后，请记住，Python 中的每一种迭代都依赖于迭代器协议，因此理解迭代器协议是理解 Python 中的循环的关键。</p>\n<p>这里有一些我推荐的相关文章和视频：</p>\n<ul>\n<li><a href=\"https://nedbatchelder.com/text/iter.html\">Loop Like a Native</a>， Ned Batchelder 在 PyCon 2013 的讲演</li>\n<li><a href=\"https://www.youtube.com/watch?v=V2PkkMS2Ack\">Loop Better</a> ，这篇文章是基于这个讲演的</li>\n<li><a href=\"http://treyhunner.com/2016/12/python-iterator-protocol-how-for-loops-work/\">The Iterator Protocol: How For Loops Work</a>，我写的关于迭代器协议的短文</li>\n<li><a href=\"https://www.youtube.com/watch?v=5_cJIcgM7rw\">Comprehensible Comprehensions</a>，关于推导和迭代器表达器的讲演</li>\n<li><a href=\"http://treyhunner.com/2018/02/python-range-is-not-an-iterator/\">Python: Range is Not an Iterator</a>，我关于范围和迭代器的文章</li>\n<li><a href=\"https://www.youtube.com/watch?v=u8g9scXeAcI\">Looping Like a Pro in Python</a>，DB 的 PyCon 2017 讲演</li>\n</ul>\n<hr>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89181\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89181votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89181\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/94e682b0b3eb8a994cd35bc2af7101dcc2b7b96b.jpg"}
{"url_object_id": "3277d2ec3facdf447f33a15cc6b051ee", "title": "手把手教你写网络爬虫（2）：迷你爬虫架构", "url": "http://python.jobbole.com/89094/", "create_date": "2018/04/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "系列教程", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8853601.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/dd7d0a1f0f987af8ddb8b2140072ab01.jpg\" alt=\"\"></p>\n<h3>介绍</h3>\n<p>大家好！回顾上一期，我们在介绍了爬虫的基本概念之后，就利用各种工具横冲直撞的完成了一个小爬虫，目的就是猛、糙、快，方便初学者上手，建立信心。对于有一定基础的读者，请不要着急，以后我们会学习主流的开源框架，打造出一个强大专业的爬虫系统！不过在此之前，要继续打好基础，本期我们先介绍爬虫的种类，然后选取最典型的通用网络爬虫，为其设计一个迷你框架。有了自己对框架的思考后，再学习复杂的开源框架就有头绪了。</p>\n<p>今天我们会把更多的时间用在思考上，而不是一根筋的coding。用80%的时间思考，20%的时间敲键盘，这样更有利于进步。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/404cf1a349caf668a76e5efbc0840c2c.jpg\" alt=\"\"></p>\n<h3>语言&amp;环境</h3>\n<p><strong>语言</strong>：带足弹药，继续用Python开路！</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a650cef3cb7098671858b9c97f661f47.jpg\" alt=\"\"></p>\n<p><strong>threading</strong><strong>：</strong>threading库可以在单独的线程中执行任何的在Python中可以调用的对象。Python 2.x中的thread模块已被废弃，用户可以使用threading模块代替。在Python 3中不能再使用thread模块。为了兼容性，Python 3将thread重命名为_thread。</p>\n<p><strong>queue</strong><strong>：</strong>queue模块中提供了同步的、线程安全的队列类，包括FIFO（先入先出)队列Queue，LIFO（后入先出）队列LifoQueue，和优先级队列PriorityQueue。这些队列都实现了锁原语，能够在多线程中直接使用。可以使用队列来实现线程间的同步。</p>\n<p><strong>re</strong><strong>：</strong>Python 自1.5版本起增加了re模块，它提供Perl风格的正则表达式模式。re模块使 Python语言拥有全部的正则表达式功能。</p>\n<p><strong>argparse</strong><strong>：</strong>Python用于解析命令行参数和选项的标准模块，用于代替已经过时的optparse模块。argparse模块的作用是用于解析命令行参数。</p>\n<p><strong>configparser</strong><strong>：</strong>读取配置文件的模块。</p>\n<h3>爬虫的种类</h3>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/d72fbb59b8ec0ade297ab06d5d366bda.jpg\" alt=\"\"></p>\n<p>网络爬虫按照系统结构和实现技术，大致可以分为以下几种类型：通用网络爬虫（General Purpose Web Crawler）、聚焦网络爬虫（Focused Web Crawler）、增量式网络爬虫（Incremental Web Crawler）、深层网络爬虫（Deep Web Crawler）。实际的网络爬虫系统通常是几种爬虫技术相结合实现的。</p>\n<p><strong>通用网络爬虫</strong></p>\n<p>通用网络爬虫又称全网爬虫（Scalable Web Crawler），爬取对象从一些种子 URL 扩充到整个 Web。主要为门户站点搜索引擎和大型 Web 服务提供商采集数据。</p>\n<p>通用网络爬虫的结构大致可以分为页面爬取模块 、页面分析模块、链接过滤模块、页面存储模块、URL 队列、初始 URL 集合几个部分。为提高工作效率，通用网络爬虫会采取一定的爬取策略。 常用的爬取策略有：深度优先策略、广度优先策略。</p>\n<p>1) 深度优先策略（DFS）：其基本方法是按照深度由低到高的顺序，依次访问下一级网页链接，直到不能再深入为止。</p>\n<p>2) 广度优先策略（BFS）：此策略按照网页内容目录层次深浅来爬取页面，处于较浅目录层次的页面首先被爬取。 当同一层次中的页面爬取完毕后，爬虫再深入下一层继续爬取。</p>\n<p><strong>聚焦网络爬虫</strong></p>\n<p>聚焦网络爬虫（Focused Crawler），又称主题网络爬虫（Topical Crawler），是指选择性地爬取那些与预先定义好的主题相关页面的网络爬虫。 和通用网络爬虫相比，聚焦爬虫只需要爬取与主题相关的页面，极大地节省了硬件和网络资源，保存的页面也由于数量少而更新快，还可以很好地满足一些特定人群对特定领域信息的需求。我们之前爬的歌单就属于这一种。</p>\n<p><strong>增量式网络爬虫</strong></p>\n<p>增量式网络爬虫（Incremental Web Crawler）是 指 对 已 下 载 网 页 采 取 增 量式更新和只爬取新产生的或者已经发生变化网页的爬虫，它能够在一定程度上保证所爬取的页面是尽可能新的页面。 和周期性爬取和刷新页面的网络爬虫相比，增量式爬虫只会在需要的时候爬取新产生或发生更新的页面 ，并不重新下载没有发生变化的页面，可有效减少数据下载量，及时更新已爬取的网页，减小时间和空间上的耗费，但是增加了爬取算法的复杂度和实现难度。现在比较火的舆情爬虫一般都是增量式网络爬虫。</p>\n<p><strong>深网爬虫</strong></p>\n<p>Web 页面按存在方式可以分为表层网页（Surface Web）和深层网页（Deep Web，也称 Invisible Web Pages 或 Hidden Web）。 表层网页是指传统搜索引擎可以索引的页面，以超链接可以到达的静态网页为主构成的 Web 页面。Deep Web 是那些大部分内容不能通过静态链接获取的、隐藏在搜索表单后的，只有用户提交一些关键词才能获得的 Web 页面。例如那些用户注册后内容才可见的网页就属于 Deep Web。</p>\n<h3>一个迷你框架</h3>\n<p>下面以比较典型的通用爬虫为例，分析其工程要点，设计并实现一个迷你框架。架构图如下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/59bf6c5c3defe74f2380507a61ef928c.jpg\" alt=\"\"></p>\n<p>代码结构：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/7548dd0adef79d9c207ab08414794ce8.png\" alt=\"\"></p>\n<p>config_load.py    配置文件加载</p>\n<p>crawl_thread.py    爬取线程</p>\n<p>mini_spider.py    主线程</p>\n<p>spider.conf    配置文件</p>\n<p>url_table.py    url队列、url表</p>\n<p>urls.txt    种子url集合</p>\n<p>webpage_parse.py    网页分析</p>\n<p>webpage_save.py    网页存储</p>\n<p>看看配置文件里有什么内容：</p>\n<p>spider.conf</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/4948e8d87d41dd6cb4722bc4c232b831.png\" alt=\"\"></p>\n<p><strong>Step 1. </strong><strong>采用BFS还是DFS？</strong></p>\n<p>理论上，这两个算法都能够在大致相同的时间里爬取整个互联网上的内容。但显然各个网站最重要的网页应该是它的首页。在极端情况下，如果只能下载非常有限的网页，那么应该下载的所有网站的首页，如果把爬虫再扩大些，应该爬取从首页直接链接的网页，因为这些网页是网站设计者自己认为相当重要的网页。在这个前提下，显然BFS明显优于DFS。事实上在搜索引擎的爬虫里，主要采用的就是BFS。我们的框架采取这种策略。</p>\n<p>抓取深度可以通过配置文件中的max_depth设置，只要没到达指定深度，程序就会不停的将解析出的url放入队列中：</p>\n<p>mini_spider.py</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/73d4acf162eaba3f6920d195714043ae.png\" alt=\"\"></p>\n<p><strong>Step 2. </strong><strong>初始URL集合、URL队列</strong></p>\n<p>我们来看看通用爬虫如何下载整个互联网。假设从一家门户网站的首页出发，先下载这个网页（深度=0），然后通过分析这个网页，可以找到页面里的所有超链接，也就等于知道了这家门户网站首页所直接连接的全部网页，诸如京东理财、京东白条，京东众筹等（深度=1）。接下来访问、下载并分析京东理财等网页，又能找到其他相连的网页（深度=2）。让计算机不停的做下去，就能下载整个网站。</p>\n<p>在这个过程中，我们需要一个“初始URL集合”保存门户的首页，还需要一个“URL队列”保存分析网页得到的超链接。</p>\n<p>mini_spider.py</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/b071bf966749c7bee6a719ba2e357e83.png\" alt=\"\"></p>\n<p>url_table.py</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/48e956717b6e57812e8b08b416c0ae0b.png\" alt=\"\"></p>\n<p><strong>Step 3. </strong><strong>记录哪些网页已经下载过的小本本——URL表。</strong></p>\n<p>在互联网上，一个网页可能被多个网页中的超链接所指向。这样在遍历互联网这张图的时候，这个网页可能被多次访问到。为了防止一个网页被下载和解析多次，需要一个URL表记录哪些网页已经下载过。再遇到这个网页的时候，我们就可以跳过它。</p>\n<p>crawl_thread.py</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/34a0c731c4a0d72c3727e52b0da388f9.png\" alt=\"\"></p>\n<p><strong>Step 4. </strong><strong>多个抓取线程</strong></p>\n<p>为了提升爬虫性能，需要多个抓取线程，从URL队列获取链接进行处理。多线程并没什么毛病，但Python的多线程可能会引起很多人的质疑，这源于Python设计之初的考虑：GIL。GIL的全称是Global Interpreter Lock(全局解释器锁)，某个线程想要执行，必须先拿到GIL，并且在一个Python进程中，GIL只有一个。结果就是Python里一个进程永远只能同时执行一个线程，这就是为什么在多核CPU上，Python的多线程效率并不高。那么我们为什么还要用Python多线程呢？</p>\n<p>CPU密集型代码(各种循环处理、编解码等等)，在这种情况下，由于计算工作多，ticks计数很快就会达到阈值，然后触发GIL的释放与再竞争（多个线程来回切换当然是需要消耗资源的），Python下的多线程对CPU密集型代码并不友好。</p>\n<p>IO密集型代码(文件处理、网络爬虫等)，多线程能够有效提升效率(单线程下有IO操作会进行IO等待，造成不必要的时间浪费，而开启多线程能在线程A等待时，自动切换到线程B，可以不浪费CPU的资源，从而能提升程序执行效率)。Python的多线程对IO密集型代码比较友好。</p>\n<p>所以，对于IO密集的爬虫程序，使用Python多线程是没问题的。</p>\n<p>crawl_thread.py</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a82df1cd3b5a7faf37456f20557c9882.png\" alt=\"\"></p>\n<p><strong>Step 5. </strong><strong>页面分析模块</strong></p>\n<p>从网页中解析出URLs或者其他有用的数据。这个是上期重点介绍的，可以参考之前的代码。</p>\n<p><strong>Step 6. </strong><strong>页面存储模块</strong></p>\n<p>保存页面的模块，目前将文件保存为文件，以后可以扩展出多种存储方式，如mysql，mongodb，hbase等等。</p>\n<p>webpage_save.py</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/6b0ff725d1804eea7b529737ce4b6869.png\" alt=\"\"></p>\n<p>写到这里，整个框架已经清晰的呈现在大家眼前了，千万不要小看它，不管多么复杂的框架都是在这些基本要素上扩展出来的。</p>\n<h3>下一步</h3>\n<p>基础知识的学习暂时告一段落，希望能够帮助大家打下一定的基础。下期开始为大家介绍强大成熟的爬虫框架Scrapy，它提供了很多强大的特性来使得爬取更为简单高效，更多精彩，敬请期待！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89094\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89094votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89094\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a6d031713da6a85b0c6d6390db2c13c7de0b75fd.jpg"}
{"url_object_id": "726ade3159f659af5ac7d629c1d108bb", "title": "手把手教你写网络爬虫（4）：Scrapy入门", "url": "http://python.jobbole.com/89122/", "create_date": "2018/05/05", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/edecceebedd0d04aa17bccba430ddcaf.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "1", "tags": "系列教程", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8879765.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p>上期我们理性的分析了为什么要学习Scrapy，理由只有一个，那就是免费，一分钱都不用花！</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/6035e33b58f3d7f5e800375660c6206d.jpg\" alt=\"\"></p>\n<p>咦？怎么有人扔西红柿？好吧，我承认电视看多了。不过今天是没得看了，为了赶稿，又是一个不眠夜。。。言归正传，我们将在这一期介绍完Scrapy的基础知识， 如果想深入研究，大家可以参考官方文档，那可是出了名的全面，我就不占用公众号的篇幅了。</p>\n<h3>架构简介</h3>\n<p>下面是Scrapy的架构，包括组件以及在系统中发生的数据流的概览(红色箭头所示)。 之后会对每个组件做简单介绍，数据流也会做一个简要描述。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/ee80abf8018ddee8d3a247ab536c56b9.png\" alt=\"\"></p>\n<p><strong>组件</strong></p>\n<p><strong>Engine</strong>: 引擎负责控制数据流在系统中所有组件中流动，并在相应动作发生时触发事件。</p>\n<p><strong>Scheduler</strong>: 调度器从引擎接受Request并将他们入队，以便之后引擎请求他们时提供给引擎。</p>\n<p><strong>Downloader</strong>: 下载器负责获取页面数据并提供给引擎，而后提供给Spider。</p>\n<p><strong>Spiders</strong>: Spider是Scrapy用户编写的用于分析Response并提取Item或提取更多需要下载的URL的类。 每个Spider负责处理特定网站。</p>\n<p><strong>Item Pipeline</strong>: 负责处理被Spider提取出来的Item。典型的功能有清洗、 验证及持久化操作。</p>\n<p><strong>Downloader middlewares</strong>: 下载器中间件是在Engine及Downloader之间的特定钩子(specific hooks)，处理Downloader传递给Engine的Response。 其提供了一个简便的机制，通过插入自定义代码来扩展Scrapy功能。</p>\n<p><strong>Spider middlewares</strong>: 是在Engine及Spider之间的特定钩子(specific hook)，处理Spider的输入(Response)和输出(Items及Requests)。 其提供了一个简便的机制，通过插入自定义代码来扩展Scrapy功能。</p>\n<p><strong>数据流</strong></p>\n<p>Scrapy中的数据流由执行引擎控制，其过程如下:</p>\n<ol>\n<li>Engine从Spider获取第一个需要爬取URL(s)。</li>\n<li>Engine用Scheduler调度Requests，并向Scheduler请求下一个要爬取的URL。</li>\n<li>Scheduler返回下一个要爬取的URL给Engine。</li>\n<li>Engine将URL通过Downloader middlewares转发给Downloader。</li>\n<li>一旦页面下载完毕，下载器生成一个该页面的Response，并将其通过Downloader middlewares发送给Engine。</li>\n<li>引擎从Downloader中接收到Response并通过Spider middlewares发送给Spider处理。</li>\n<li>Spider处理Response并返回爬取到的Item及新的Request给Engine。</li>\n<li>Engine将爬取到的Item给Item Pipeline，然后将Request给Scheduler。</li>\n<li>从第一步开始重复这个流程，直到Scheduler中没有更多的URLs。</li>\n</ol>\n<p>架构就是这样，流程和我第二篇里介绍的迷你架构差不多，但扩展性非常强大。</p>\n<p><strong>One more thing</strong></p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/22aa4ecbeed9a5fe78a3ea7f8de5ceba.jpg\" alt=\"\"></p>\n<p>Scrapy基于事件驱动网络框架 Twisted 编写，Twisted是一个异步非阻塞框架。一说到网络通信框架就会提什么同步、异步、阻塞和非阻塞，到底是些啥玩意啊？为啥老是有人暗示或者明示异步=非阻塞？比如Scrapy文档里：Scrapy is written with Twisted, a popular event-driven networking framework for Python. Thus, it’s implemented using a non-blocking (aka asynchronous) code for concurrency. 这种说法对吗？举个栗子：</p>\n<p>出场人物：老张，水壶两把（普通水壶，简称水壶；会响的水壶，简称响水壶）</p>\n<p>1. 老张把水壶放到火上，立等水开。<strong>（同步阻塞）</strong></p>\n<p>老张觉得自己有点傻。</p>\n<p>2. 老张把水壶放到火上，去客厅看电视，时不时去厨房看看水开没有。<strong>（同步非阻塞）</strong></p>\n<p>老张还是觉得自己有点傻，于是变高端了，买了把会响笛的那种水壶。水开之后，能大声发出嘀~~~~的噪音。</p>\n<p>3. 老张把响水壶放到火上，立等水开。<strong>（异步阻塞）</strong></p>\n<p>老张觉得这样傻等意义不大。</p>\n<p>4. 老张把响水壶放到火上，去客厅看电视，水壶响之前不再去看它了，响了再去拿壶。<strong>（异步非阻塞）</strong></p>\n<p>老张觉得自己聪明了。</p>\n<p>所谓同步异步，只是对于水壶而言。普通水壶，同步；响水壶，异步。虽然都能干活，但响水壶可以在自己完工之后，提示老张水开了。这是普通水壶所不能及的。同步只能让调用者去轮询自己（情况2中），造成老张效率的低下。</p>\n<p>所谓阻塞非阻塞，仅仅对于老张而言。立等的老张，阻塞；看电视的老张，非阻塞。情况1和情况3中老张就是阻塞的，媳妇喊他都不知道。虽然3中响水壶是异步的，可对于立等的老张没有太大的意义。所以一般异步是配合非阻塞使用的，这样才能发挥异步的效用。</p>\n<h3>入门教程</h3>\n<p><strong>创建项目</strong></p>\n<p>在开始爬取之前，您必须创建一个新的Scrapy项目。 进入您打算存储代码的目录中，运行下列命令:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de25b69342272933845\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nscrapy startproject tutorial</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69342272933845-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de25b69342272933845-1\"><span class=\"crayon-e\">scrapy </span><span class=\"crayon-e\">startproject </span><span class=\"crayon-v\">tutorial</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>该命令将会创建包含下列内容的 tutorial 目录:</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de25b6934b034869900\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntutorial/\r\n    scrapy.cfg            # 项目的配置文件\r\n    tutorial/             # 该项目的python模块。之后您将在此加入代码\r\n        __init__.py\r\n        items.py          # 项目中的item文件\r\n        pipelines.py      # 项目中的pipelines文件\r\n        settings.py       # 项目的设置文件\r\n        spiders/          # 放置spider代码的目录\r\n            __init__.py</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6934b034869900-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6934b034869900-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6934b034869900-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6934b034869900-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6934b034869900-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6934b034869900-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6934b034869900-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6934b034869900-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6934b034869900-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de25b6934b034869900-1\"><span class=\"crayon-v\">tutorial</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6934b034869900-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">cfg</span><span class=\"crayon-h\">            </span><span class=\"crayon-p\"># 项目的配置文件</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6934b034869900-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">tutorial</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">             </span><span class=\"crayon-p\"># 该项目的python模块。之后您将在此加入代码</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6934b034869900-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">__init__</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">py</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6934b034869900-5\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">items</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\">          </span><span class=\"crayon-p\"># 项目中的item文件</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6934b034869900-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">pipelines</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\">      </span><span class=\"crayon-p\"># 项目中的pipelines文件</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6934b034869900-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">settings</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span><span class=\"crayon-h\">       </span><span class=\"crayon-p\"># 项目的设置文件</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6934b034869900-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">spiders</span><span class=\"crayon-o\">/</span><span class=\"crayon-h\">          </span><span class=\"crayon-p\"># 放置spider代码的目录</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6934b034869900-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">__init__</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">py</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<p><strong>编写第一个爬虫</strong></p>\n<p>Spider是用户编写用于从单个网站(或者一些网站)爬取数据的类。其包含了一个用于下载的初始URL，以及如何跟进网页中的链接以及如何分析页面中的内容的方法。</p>\n<p>以下为我们的第一个Spider代码，保存在 tutorial/spiders 目录下的 quotes_spider.py文件中:</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de25b69350907824923\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport scrapy\r\n\r\nclass QuotesSpider(scrapy.Spider):\r\n    name = \"quotes\"\r\n\r\n    def start_requests(self):\r\n        urls = [\r\n            'http://quotes.toscrape.com/page/1/',\r\n            'http://quotes.toscrape.com/page/2/',\r\n        ]\r\n        for url in urls:\r\n            yield scrapy.Request(url=url, callback=self.parse)\r\n\r\n    def parse(self, response):\r\n        page = response.url.split(\"/\")[-2]\r\n        filename = 'quotes-%s.html' % page\r\n        with open(filename, 'wb') as f:\r\n            f.write(response.body)\r\n        self.log('Saved file %s' % filename)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69350907824923-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69350907824923-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-1\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scrapy</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-3\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">QuotesSpider</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Spider</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"quotes\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">start_requests</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">urls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'http://quotes.toscrape.com/page/1/'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'http://quotes.toscrape.com/page/2/'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">url </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">urls</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">yield</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Request</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">callback</span><span class=\"crayon-o\">=</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">parse</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">page</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">filename</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'quotes-%s.html'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">page</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-17\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">with</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">open</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'wb'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69350907824923-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">body</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69350907824923-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Saved file %s'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filename</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n\n</div>\n<p>为了创建一个Spider，你必须继承 scrapy.Spider 类， 且定义以下三个属性:</p>\n<ol>\n<li>name: 用于区别Spider。 该名字必须是唯一的，您不可以为不同的Spider设定相同的名字。</li>\n<li>start_urls: 包含了Spider在启动时进行爬取的url列表。 因此，第一个被获取到的页面将是其中之一。 后续的URL则从初始的URL获取到的数据中提取。</li>\n<li>parse() 是spider的一个方法。 被调用时，每个初始URL完成下载后生成的Response 对象将会作为唯一的参数传递给该函数。 该方法负责解析返回的数据(response data)，提取数据以及生成需要进一步处理的URL的 Request 对象。</li>\n</ol>\n<p><strong>运行我们的爬虫</strong></p>\n<p>进入项目的根目录，执行下列命令启动spider:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de25b69354015989581\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nscrapy crawl quotes</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69354015989581-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de25b69354015989581-1\"><span class=\"crayon-e\">scrapy </span><span class=\"crayon-e\">crawl </span><span class=\"crayon-v\">quotes</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>这个命令启动用于爬取 quotes.toscrape.com 的spider，你将得到类似的输出:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de25b69358129533415\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Shell</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n2017-05-10 20:36:17 [scrapy.core.engine] INFO: Spider opened\r\n2017-05-10 20:36:17 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\r\n2017-05-10 20:36:17 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:6023\r\n2017-05-10 20:36:17 [scrapy.core.engine] DEBUG: Crawled (404) &lt;GET http://quotes.toscrape.com/robots.txt&gt; (referer: None)\r\n2017-05-10 20:36:17 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://quotes.toscrape.com/page/1/&gt; (referer: None)\r\n2017-05-10 20:36:17 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://quotes.toscrape.com/page/2/&gt; (referer: None)\r\n2017-05-10 20:36:17 [quotes] DEBUG: Saved file quotes-1.html\r\n2017-05-10 20:36:17 [quotes] DEBUG: Saved file quotes-2.html\r\n2017-05-10 20:36:17 [scrapy.core.engine] INFO: Closing spider (finished)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69358129533415-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69358129533415-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69358129533415-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69358129533415-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69358129533415-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69358129533415-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69358129533415-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69358129533415-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69358129533415-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de25b69358129533415-1\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-e\">.core</span><span class=\"crayon-e\">.engine</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFO</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Spider </span><span class=\"crayon-i\">opened</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69358129533415-2\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-e\">.extensions</span><span class=\"crayon-e\">.logstats</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFO</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Crawled</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pages</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pages</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">scraped</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">items</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">at</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">items</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69358129533415-3\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-e\">.extensions</span><span class=\"crayon-e\">.telnet</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Telnet </span><span class=\"crayon-e\">console </span><span class=\"crayon-e\">listening </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">6023</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69358129533415-4\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-e\">.core</span><span class=\"crayon-e\">.engine</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Crawled</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">404</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-r\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">quotes</span><span class=\"crayon-e\">.toscrape</span><span class=\"crayon-e\">.com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">robots</span><span class=\"crayon-e\">.txt</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">referer</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69358129533415-5\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-e\">.core</span><span class=\"crayon-e\">.engine</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Crawled</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-r\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">quotes</span><span class=\"crayon-e\">.toscrape</span><span class=\"crayon-e\">.com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">page</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">referer</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69358129533415-6\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-e\">.core</span><span class=\"crayon-e\">.engine</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Crawled</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-r\">GET</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">quotes</span><span class=\"crayon-e\">.toscrape</span><span class=\"crayon-e\">.com</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">page</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">referer</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69358129533415-7\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">quotes</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Saved </span><span class=\"crayon-r\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quotes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1.html</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69358129533415-8\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">quotes</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Saved </span><span class=\"crayon-r\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quotes</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.html</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69358129533415-9\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-e\">.core</span><span class=\"crayon-e\">.engine</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">INFO</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Closing </span><span class=\"crayon-e\">spider</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">finished</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0068 seconds] -->\r\n<p><strong>提取数据</strong></p>\n<p>我们之前只是保存了HTML页面，并没有提取数据。现在升级一下代码，把提取功能加进去。至于如何使用浏览器的开发者模式分析网页，之前已经介绍过了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de25b6935c554768527\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport scrapy\r\n\r\nclass QuotesSpider(scrapy.Spider):\r\n    name = \"quotes\"\r\n    start_urls = [\r\n        'http://quotes.toscrape.com/page/1/',\r\n        'http://quotes.toscrape.com/page/2/',\r\n    ]\r\n\r\n    def parse(self, response):\r\n        for quote in response.css('div.quote'):\r\n            yield {\r\n                'text': quote.css('span.text::text').extract_first(),\r\n                'author': quote.css('small.author::text').extract_first(),\r\n                'tags': quote.css('div.tags a.tag::text').extract(),\r\n            }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6935c554768527-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6935c554768527-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6935c554768527-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6935c554768527-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6935c554768527-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6935c554768527-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6935c554768527-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6935c554768527-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6935c554768527-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6935c554768527-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6935c554768527-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6935c554768527-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6935c554768527-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6935c554768527-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b6935c554768527-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b6935c554768527-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de25b6935c554768527-1\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scrapy</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6935c554768527-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0de25b6935c554768527-3\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">QuotesSpider</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Spider</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6935c554768527-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"quotes\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6935c554768527-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">start_urls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6935c554768527-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'http://quotes.toscrape.com/page/1/'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6935c554768527-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'http://quotes.toscrape.com/page/2/'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6935c554768527-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6935c554768527-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6935c554768527-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6935c554768527-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">quote </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">response</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">css</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'div.quote'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6935c554768527-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">yield</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6935c554768527-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">'text'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quote</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">css</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'span.text::text'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">extract_first</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6935c554768527-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">'author'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quote</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">css</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'small.author::text'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">extract_first</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b6935c554768527-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">'tags'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quote</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">css</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'div.tags a.tag::text'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">extract</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b6935c554768527-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>再次运行这个爬虫，你将在日志里看到被提取出的数据：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de25b69360579297671\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n2017-05-10 20:38:33 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 http://quotes.toscrape.com/page/1/&gt;\r\n{'tags': ['life', 'love'], 'author': 'André Gide', 'text': '“It is better to be hated for what you are than to be loved for what you are not.”'}\r\n2017-05-10 20:38:33 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 http://quotes.toscrape.com/page/1/&gt;\r\n{'tags': ['edison', 'failure', 'inspirational', 'paraphrased'], 'author': 'Thomas A. Edison', 'text': \"“I have not failed. I've just found 10,000 ways that won't work.”\"}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69360579297671-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69360579297671-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69360579297671-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0de25b69360579297671-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de25b69360579297671-1\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">38</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">33</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">core</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">scraper</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Scraped </span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">200</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//quotes.toscrape.com/page/1/&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69360579297671-2\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'tags'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'life'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'love'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'author'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'André Gide'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'“It is better to be hated for what you are than to be loved for what you are not.”'</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0de25b69360579297671-3\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">05</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">38</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">33</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">scrapy</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">core</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">scraper</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">DEBUG</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Scraped </span><span class=\"crayon-v\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-cn\">200</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//quotes.toscrape.com/page/1/&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0de25b69360579297671-4\"><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'tags'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'edison'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'failure'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'inspirational'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'paraphrased'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'author'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Thomas A. Edison'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'text'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"“I have not failed. I've just found 10,000 ways that won't work.”\"</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p><strong>保存爬取的数据</strong></p>\n<p>最简单存储爬取的数据的方式是使用 Feed exports:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0de25b69364509162152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nscrapy crawl quotes -o quotes.json</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0de25b69364509162152-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0de25b69364509162152-1\"><span class=\"crayon-e\">scrapy </span><span class=\"crayon-e\">crawl </span><span class=\"crayon-v\">quotes</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">quotes</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">json</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>该命令将采用 JSON 格式对爬取的数据进行序列化，生成quotes.json文件。</p>\n<p>在类似本篇教程里这样小规模的项目中，这种存储方式已经足够。如果需要对爬取到的item做更多更为复杂的操作，你可以编写 Item Pipeline，tutorial/pipelines.py在最开始的时候已经自动创建了。</p>\n<h3>下一步</h3>\n<p>系列写到这里，组里对下一步的计划产生了分歧，本人的意思是系列已经接近尾声了，可领导的意思是，连载可以正式开始了！ What? 这不能忍啊！所以我立即做了一个艰难的决定，连载正式开始！详情下回分解，再见！</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89122\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89122votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89122\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a6d031713da6a85b0c6d6390db2c13c7de0b75fd.jpg"}
{"url_object_id": "210d191c245825b87e1fde158869a256", "title": "Python 数据处理库 pandas 进阶教程", "url": "http://python.jobbole.com/89081/", "create_date": "2018/04/18", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/02/591d8b55a524f825dd29a22b8df70000.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "工具与框架", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://qiangbo.space/2018-03-12/advance_pandas/\">强波的技术博客</a>   </div><p>在前面一篇文章中，我们对pandas做了一些入门介绍。本文是它的进阶篇。在这篇文章中，我们会讲解一些更深入的知识。</p>\n<h1 id=\"id-前言\">前言</h1>\n<p>本文紧接着前一篇的入门教程，会介绍一些关于pandas的进阶知识。建议读者在阅读本文之前先看完<a href=\"/2018-02-15/pandas_tutorial/\">pandas入门教程</a>。 同样的，本文的测试数据和源码可以在这里获取： <a href=\"https://github.com/paulQuei/pandas_tutorial\">Github：pandas_tutorial</a> 。</p>\n<h1 id=\"id-数据访问\">数据访问</h1>\n<p>在入门教程中，我们已经使用过访问数据的方法。这里我们再集中看一下。</p>\n<blockquote><p>注：这里的数据访问方法既适用于<code>Series</code>，也适用于<code>DataFrame</code>。</p></blockquote>\n<h2 id=\"id-基础方法和\">基础方法：<code>[]</code>和<code>.</code></h2>\n<p>这是两种最直观的方法，任何有面向对象编程经验的人应该都很容易理解。下面是一个代码示例：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527806124469997\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# select_data.py\r\n\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\nseries1 = pd.Series([1, 2, 3, 4, 5, 6, 7],\r\n    index=[\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"])\r\n\r\nprint(\"series1['E'] = {} \\n\".format(series1['E']));\r\nprint(\"series1.E = {} \\n\".format(series1.E));\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527806124469997-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527806124469997-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527806124469997-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527806124469997-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527806124469997-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527806124469997-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527806124469997-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527806124469997-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527806124469997-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527806124469997-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527806124469997-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527806124469997-1\"><span class=\"crayon-p\"># select_data.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527806124469997-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527806124469997-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527806124469997-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527806124469997-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527806124469997-6\"><span class=\"crayon-v\">series1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Series</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527806124469997-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"C\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"D\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"E\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"F\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"G\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"B\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527806124469997-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527806124469997-9\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"series1['E'] = {} \\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'E'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527806124469997-10\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"series1.E = {} \\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">E</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527806124469997-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527810899789463\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nseries1['E'] = 3 \r\n\r\nseries1.E = 3 \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527810899789463-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527810899789463-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527810899789463-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527810899789463-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527810899789463-1\"><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'E'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527810899789463-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527810899789463-3\"><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527810899789463-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n</div>\n</div>\n<blockquote><p>注1：对于类似属性的访问方式<code>.</code>来说，要求索引元素必须是有效的Python标识符的时候才可以，而对于<code>series1.1</code>这样的索引是不行的。</p></blockquote>\n<blockquote><p>注2：<code>[]</code>和<code>.</code>提供了简单和快速访问pands数据结构的方法。这种方法非常的直观。然而，由于要访问的数据类型并不是事先知道的，因此使用这两种方法方式存在一些优化限制。因此对于产品级的代码来说，pandas官方建议使用pandas库中提供的数据访问方法。</p></blockquote>\n<h2 id=\"id-loc与iloc\">loc与iloc</h2>\n<p>在入门教程中，我们已经提到了这两个操作符：</p>\n<ul>\n<li><code>loc</code>：通过行和列的索引来访问数据</li>\n<li><code>iloc</code>：通过行和列的下标来访问数据</li>\n</ul>\n<blockquote><p>注意：索引的类型可能是整数。</p></blockquote>\n<p>实际上，当<code>DataFrame</code>通过这两个操作符访问数据，可以只指定一个索引来访问一行的数据，例如：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527814494324503\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# select_data.py\r\n\r\ndf1 = pd.DataFrame({\"note\" : [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"],\r\n    \"weekday\": [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"]},\r\n    index=['1', '2', '3', '4', '5', '6', '7'])\r\nprint(\"df1.loc['2']:\\n{}\\n\".format(df1.loc['2']))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527814494324503-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527814494324503-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527814494324503-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527814494324503-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527814494324503-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527814494324503-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527814494324503-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527814494324503-1\"><span class=\"crayon-p\"># select_data.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527814494324503-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527814494324503-3\"><span class=\"crayon-v\">df1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">\"note\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"C\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"D\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"E\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"F\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"G\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"B\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527814494324503-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"weekday\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"Mon\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Tue\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Wed\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Thu\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Fri\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Sat\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Sun\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527814494324503-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'6'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'7'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527814494324503-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df1.loc['2']:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">loc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'2'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527814494324503-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n</div>\n</div>\n<p>这里通过索引<code>'2'</code>可以方法到第2行的所有数据，因此它的输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527818295510968\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf1.loc['2']:\r\nnote         D\r\nweekday    Tue\r\nName: 2, dtype: object\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527818295510968-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527818295510968-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527818295510968-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527818295510968-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527818295510968-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527818295510968-1\"><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">loc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'2'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527818295510968-2\"><span class=\"crayon-i\">note</span><span class=\"crayon-h\">         </span><span class=\"crayon-i\">D</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527818295510968-3\"><span class=\"crayon-e\">weekday    </span><span class=\"crayon-e\">Tue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527818295510968-4\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">object</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527818295510968-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n</div>\n</div>\n<p>除此之外，通过这两个操作符我们还可以访问某个范围之内的数据，例如这样：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52781e201576564\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# select_data.py\r\n\r\nprint(\"series1.loc['E':'A']=\\n{}\\n\".format(series1.loc['E':'A']));\r\nprint(\"df1.iloc[2:4]=\\n{}\\n\".format(df1.iloc[2:4]))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52781e201576564-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52781e201576564-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52781e201576564-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52781e201576564-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52781e201576564-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52781e201576564-1\"><span class=\"crayon-p\"># select_data.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52781e201576564-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52781e201576564-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"series1.loc['E':'A']=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">loc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'E'</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'A'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52781e201576564-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df1.iloc[2:4]=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iloc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52781e201576564-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527822331796257\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nseries1.loc['E':'A']=\r\nE    3\r\nF    4\r\nG    5\r\nA    6\r\ndtype: int64\r\n\r\ndf1.iloc[2:3]=\r\n  note weekday\r\n3    E     Wed\r\n4    F     Thu\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527822331796257-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527822331796257-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527822331796257-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527822331796257-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527822331796257-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527822331796257-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527822331796257-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527822331796257-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527822331796257-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527822331796257-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527822331796257-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527822331796257-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527822331796257-1\"><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">loc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'E'</span><span class=\"crayon-o\">:</span><span class=\"crayon-s\">'A'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527822331796257-2\"><span class=\"crayon-i\">E</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527822331796257-3\"><span class=\"crayon-i\">F</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527822331796257-4\"><span class=\"crayon-i\">G</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527822331796257-5\"><span class=\"crayon-i\">A</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527822331796257-6\"><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">int64</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527822331796257-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527822331796257-8\"><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iloc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527822331796257-9\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">note </span><span class=\"crayon-i\">weekday</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527822331796257-10\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Wed</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527822331796257-11\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Thu</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527822331796257-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n</div>\n</div>\n<h2 id=\"id-at与iat\">at与iat</h2>\n<p>这两个操作符用来访问单个的元素值（Scalar Value）。类似的：</p>\n<ul>\n<li><code>at</code>：通过行和列的索引来访问数据</li>\n<li><code>iat</code>：通过行和列的下标来访问数据</li>\n</ul>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527825512923671\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# select_data.py\r\n\r\nprint(\"series1.at['E']={}\\n\".format(series1.at['E']));\r\nprint(\"df1.iloc[4,1]={}\\n\".format(df1.iloc[4,1]))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527825512923671-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527825512923671-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527825512923671-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527825512923671-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527825512923671-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527825512923671-1\"><span class=\"crayon-p\"># select_data.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527825512923671-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527825512923671-3\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"series1.at['E']={}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">at</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'E'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527825512923671-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df1.iloc[4,1]={}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iloc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527825512923671-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n</div>\n</div>\n<p>这两行代码输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527829130694039\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nseries1.at['E']=3\r\n\r\ndf1.iloc[4,1]=Fri\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527829130694039-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527829130694039-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527829130694039-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527829130694039-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527829130694039-1\"><span class=\"crayon-v\">series1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">at</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'E'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527829130694039-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527829130694039-3\"><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">iloc</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">Fri</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527829130694039-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n</div>\n</div>\n<h2 id=\"id-index对象\">Index对象</h2>\n<p>在入门教程我们也已经简单介绍过Index，Index提供了查找，数据对齐和重新索引所需的基础数据结构。 最直接的，我们可以通过一个数组来创建Index对象。在创建的同时我们还可以通过<code>name</code>指定索引的名称：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52782c324586566\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# index.py\r\n\r\nindex = pd.Index(['C','D','E','F','G','A','B'], name='note')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52782c324586566-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52782c324586566-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52782c324586566-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52782c324586566-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52782c324586566-1\"><span class=\"crayon-p\"># index.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52782c324586566-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52782c324586566-3\"><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'C'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'D'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'E'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'F'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'G'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'A'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'B'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'note'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52782c324586566-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n</div>\n</div>\n<p>Index类提供了很多的方法进行各种操作，这个建议读者直接查询API说明即可，这里不多做说明。稍微提一下的是，Index对象可以互相之间做集合操作，例如：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527830689417528\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# index.py\r\n\r\na = pd.Index([1,2,3,4,5])\r\nb = pd.Index([3,4,5,6,7])\r\n\r\nprint(\"a|b = {}\\n\".format(a|b))\r\nprint(\"a&amp;b = {}\\n\".format(a&amp;b))\r\nprint(\"a.difference(b) = {}\\n\".format(a.difference(b)))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527830689417528-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527830689417528-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527830689417528-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527830689417528-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527830689417528-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527830689417528-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527830689417528-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527830689417528-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527830689417528-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527830689417528-1\"><span class=\"crayon-p\"># index.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527830689417528-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527830689417528-3\"><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527830689417528-4\"><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527830689417528-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527830689417528-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"a|b = {}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527830689417528-7\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"a&amp;b = {}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527830689417528-8\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"a.difference(b) = {}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">difference</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527830689417528-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n</div>\n</div>\n<p>这几个运算的结果如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527833879908942\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\na|b = Int64Index([1, 2, 3, 4, 5, 6, 7], dtype='int64')\r\n\r\na&amp;b = Int64Index([3, 4, 5], dtype='int64')\r\n\r\na.difference(b) = Int64Index([1, 2], dtype='int64')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527833879908942-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527833879908942-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527833879908942-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527833879908942-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527833879908942-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527833879908942-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527833879908942-1\"><span class=\"crayon-v\">a</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Int64Index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'int64'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527833879908942-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527833879908942-3\"><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Int64Index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'int64'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527833879908942-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527833879908942-5\"><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">difference</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Int64Index</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'int64'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527833879908942-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n</div>\n</div>\n<p>Index类有很多的子类，下面是最常见的一些：</p>\n<ul>\n<li><a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.RangeIndex.html#pandas.RangeIndex\">RangeIndex</a></li>\n<li><a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.CategoricalIndex.html#pandas.CategoricalIndex\">CategoricalIndex</a></li>\n<li><a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.MultiIndex.html#pandas.MultiIndex\">MultiIndex</a></li>\n<li><a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.IntervalIndex.html#pandas.IntervalIndex\">IntervalIndex</a></li>\n<li><a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DatetimeIndex.html#pandas.DatetimeIndex\">DatetimeIndex</a></li>\n<li>…</li>\n</ul>\n<h2 id=\"id-multiindex\">MultiIndex</h2>\n<p>MultiIndex，或者称之为Hierarchical Index是指数据的行或者列通过多层次的标签来进行索引。 例如，我们要通过一个MultiIndex描述三个公司在三年内每个季度的营业额，可以这样：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527837557169356\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# multiindex.py\r\n\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\nmultiIndex = pd.MultiIndex.from_arrays([\r\n    ['Geagle', 'Geagle', 'Geagle', 'Geagle',\r\n     'Epple', 'Epple', 'Epple', 'Epple', 'Macrosoft',\r\n     'Macrosoft', 'Macrosoft', 'Macrosoft', ],\r\n    ['S1', 'S2', 'S3', 'S4', 'S1', 'S2', 'S3', 'S4', 'S1', 'S2', 'S3', 'S4']],\r\n    names=('Company', 'Turnover'))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527837557169356-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527837557169356-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527837557169356-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527837557169356-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527837557169356-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527837557169356-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527837557169356-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527837557169356-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527837557169356-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527837557169356-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527837557169356-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527837557169356-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527837557169356-1\"><span class=\"crayon-p\"># multiindex.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527837557169356-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527837557169356-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527837557169356-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527837557169356-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527837557169356-6\"><span class=\"crayon-v\">multiIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">MultiIndex</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">from_arrays</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527837557169356-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Geagle'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Geagle'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Geagle'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Geagle'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527837557169356-8\"><span class=\"crayon-h\">     </span><span class=\"crayon-s\">'Epple'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Epple'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Epple'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Epple'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Macrosoft'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527837557169356-9\"><span class=\"crayon-h\">     </span><span class=\"crayon-s\">'Macrosoft'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Macrosoft'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Macrosoft'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527837557169356-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'S1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S4'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527837557169356-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">names</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Company'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Turnover'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527837557169356-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52783f995073215\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmultiIndex = \r\nMultiIndex(levels=[['Epple', 'Geagle', 'Macrosoft'], ['S1', 'S2', 'S3', 'S4']],\r\n           labels=[[1, 1, 1, 1, 0, 0, 0, 0, 2, 2, 2, 2], [0, 1, 2, 3, 0, 1, 2, 3, 0, 1, 2, 3]],\r\n           names=['Company', 'Turnover'])\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52783f995073215-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52783f995073215-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52783f995073215-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52783f995073215-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52783f995073215-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52783f995073215-1\"><span class=\"crayon-v\">multiIndex</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52783f995073215-2\"><span class=\"crayon-e\">MultiIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">levels</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Epple'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Geagle'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Macrosoft'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'S1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'S4'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52783f995073215-3\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">labels</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52783f995073215-4\"><span class=\"crayon-h\">           </span><span class=\"crayon-v\">names</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Company'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Turnover'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52783f995073215-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n</div>\n</div>\n<p>从这个输出可以看出，MultiIndex中的<code>levels</code>数组数量对应了索引的级别数量，<code>labels</code>对应了<code>levels</code>中元素的下标。 下面我们用一个随机数来构造一个DataFrame：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527843056968909\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# multiindex.py\r\n\r\ndf = pd.DataFrame(data=np.random.randint(0, 1000, 36).reshape(-1, 12),\r\n                  index=[2016, 2017, 2018],\r\n                  columns=multiIndex)\r\nprint(\"df = \\n{}\\n\".format(df))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527843056968909-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527843056968909-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527843056968909-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527843056968909-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527843056968909-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527843056968909-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527843056968909-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527843056968909-1\"><span class=\"crayon-p\"># multiindex.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527843056968909-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527843056968909-3\"><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">data</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">36</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reshape</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527843056968909-4\"><span class=\"crayon-h\">                  </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2016</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527843056968909-5\"><span class=\"crayon-h\">                  </span><span class=\"crayon-v\">columns</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">multiIndex</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527843056968909-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df = \\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527843056968909-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n</div>\n</div>\n<p>这里创建出了36个<code>[0, 1000)</code>之间的随机数，然后组装成3行12列的矩阵（如果你对NumPy不熟悉可以访问<a href=\"http://www.numpy.org\">NumPy官网</a>学习，或者看一下我之前写过的：<a href=\"/2018-01-06/AI_NumPy_Tutorial/\">Python 机器学习库 NumPy 教程</a>）。 上面这段代码输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527847941821517\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf = \r\nCompany  Geagle                Epple                Macrosoft               \r\nTurnover     S1   S2   S3   S4    S1   S2   S3   S4        S1   S2   S3   S4\r\n2016        329   25  553  852   833  710  247  990       215  991  535  846\r\n2017        734  368   28  161   187  444  901  858       244  915  261  485\r\n2018        769  707  458  782   948  169  927  237       279  438  738  708\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527847941821517-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527847941821517-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527847941821517-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527847941821517-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527847941821517-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527847941821517-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527847941821517-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527847941821517-1\"><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527847941821517-2\"><span class=\"crayon-e\">Company  </span><span class=\"crayon-e\">Geagle                </span><span class=\"crayon-e\">Epple                </span><span class=\"crayon-e\">Macrosoft               </span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527847941821517-3\"><span class=\"crayon-e\">Turnover     </span><span class=\"crayon-e\">S1   </span><span class=\"crayon-e\">S2   </span><span class=\"crayon-e\">S3   </span><span class=\"crayon-e\">S4    </span><span class=\"crayon-e\">S1   </span><span class=\"crayon-e\">S2   </span><span class=\"crayon-e\">S3   </span><span class=\"crayon-e\">S4        </span><span class=\"crayon-e\">S1   </span><span class=\"crayon-e\">S2   </span><span class=\"crayon-e\">S3   </span><span class=\"crayon-i\">S4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527847941821517-4\"><span class=\"crayon-cn\">2016</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">329</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">553</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">852</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">833</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">710</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">247</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">990</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">215</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">991</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">535</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">846</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527847941821517-5\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">734</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">368</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">161</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">187</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">444</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">901</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">858</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">244</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">915</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">261</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">485</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527847941821517-6\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">769</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">707</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">458</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">782</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">948</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">169</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">927</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">237</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">279</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">438</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">738</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">708</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527847941821517-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n</div>\n</div>\n<p>这个输出很直观的可以看出三个公司在三年内每个季度的营业额。 有了多级索引，我们可以方便的进行数据的筛选，例如：</p>\n<ul>\n<li>通过<code>df.loc[2017, (['Geagle', 'Epple', 'Macrosoft'] ,'S1')])</code>筛选出三个公司2017年第一季度的营业额</li>\n<li>通过<code>df.loc[2018, 'Geagle']</code>筛选出Geagle公司2018年每个季度的营业额</li>\n</ul>\n<p>它们输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52784b033684480\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n2017 S1: \r\nCompany    Turnover\r\nGeagle     S1          734\r\nEpple      S1          187\r\nMacrosoft  S1          244\r\nName: 2017, dtype: int64\r\n\r\nGeagle 2018: \r\nTurnover\r\nS1    769\r\nS2    707\r\nS3    458\r\nS4    782\r\nName: 2018, dtype: int64\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784b033684480-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784b033684480-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784b033684480-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784b033684480-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784b033684480-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784b033684480-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784b033684480-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784b033684480-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784b033684480-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784b033684480-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784b033684480-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784b033684480-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784b033684480-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784b033684480-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784b033684480-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52784b033684480-1\"><span class=\"crayon-cn\">2017</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">S1</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784b033684480-2\"><span class=\"crayon-e\">Company    </span><span class=\"crayon-e\">Turnover</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784b033684480-3\"><span class=\"crayon-e\">Geagle     </span><span class=\"crayon-i\">S1</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">734</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784b033684480-4\"><span class=\"crayon-e\">Epple      </span><span class=\"crayon-i\">S1</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">187</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784b033684480-5\"><span class=\"crayon-e\">Macrosoft  </span><span class=\"crayon-i\">S1</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">244</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784b033684480-6\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">int64</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784b033684480-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784b033684480-8\"><span class=\"crayon-i\">Geagle</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784b033684480-9\"><span class=\"crayon-e\">Turnover</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784b033684480-10\"><span class=\"crayon-i\">S1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">769</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784b033684480-11\"><span class=\"crayon-i\">S2</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">707</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784b033684480-12\"><span class=\"crayon-i\">S3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">458</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784b033684480-13\"><span class=\"crayon-i\">S4</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">782</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784b033684480-14\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">int64</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784b033684480-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n</div>\n</div>\n<h1 id=\"id-数据整合\">数据整合</h1>\n<blockquote><p>Concat(enate)：串联，连接，级连</p></blockquote>\n<blockquote><p>Append：附加，增补</p></blockquote>\n<blockquote><p>Merge：融合，归并，合并</p></blockquote>\n<blockquote><p>Join：合并，接合，交接</p></blockquote>\n<h2 id=\"id-concat与append\">Concat与Append</h2>\n<p><code>concat</code>函数的作用是将多个数据串联到一起。例如，某个多条数据分散在3个地方记录，最后我们将三个数据添加到一起。下面是一个代码示例：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52784e745992326\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# concat_append.py\r\n\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ndf1 = pd.DataFrame({'Note': ['C', 'D'],\r\n                    'Weekday': ['Mon', 'Tue']},\r\n                    index=[1, 2])\r\n\r\ndf2 = pd.DataFrame({'Note': ['E', 'F'],\r\n                    'Weekday': ['Wed', 'Thu']},\r\n                    index=[3, 4])\r\n\r\ndf3 = pd.DataFrame({'Note': ['G', 'A', 'B'],\r\n                    'Weekday': ['Fri', 'Sat', 'Sun']},\r\n                    index=[5, 6, 7])\r\n\r\ndf_concat = pd.concat([df1, df2, df3], keys=['df1', 'df2', 'df3'])\r\nprint(\"df_concat=\\n{}\\n\".format(df_concat))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52784e745992326-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52784e745992326-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-1\"><span class=\"crayon-p\"># concat_append.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-6\"><span class=\"crayon-v\">df1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'Note'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'C'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'D'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-7\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'Weekday'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Mon'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Tue'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-8\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-10\"><span class=\"crayon-v\">df2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'Note'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'E'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'F'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-11\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'Weekday'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Wed'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Thu'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-12\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-14\"><span class=\"crayon-v\">df3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'Note'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'G'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-15\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'Weekday'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'Fri'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Sat'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Sun'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-16\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-18\"><span class=\"crayon-v\">df_concat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">concat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">keys</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'df1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'df2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'df3'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52784e745992326-19\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df_concat=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df_concat</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52784e745992326-20\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n</div>\n</div>\n<p>这里我们通过<code>keys</code>指定了三个数据的索引划分，最后的数据中会由此存在MultiIndex。这段代码输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527853445792569\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf_concat=\r\n      Note Weekday\r\ndf1 1    C     Mon\r\n    2    D     Tue\r\ndf2 3    E     Wed\r\n    4    F     Thu\r\ndf3 5    G     Fri\r\n    6    A     Sat\r\n    7    B     Sun\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527853445792569-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527853445792569-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527853445792569-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527853445792569-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527853445792569-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527853445792569-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527853445792569-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527853445792569-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527853445792569-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527853445792569-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527853445792569-1\"><span class=\"crayon-v\">df_concat</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527853445792569-2\"><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Note </span><span class=\"crayon-e\">Weekday</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527853445792569-3\"><span class=\"crayon-i\">df1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Mon</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527853445792569-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Tue</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527853445792569-5\"><span class=\"crayon-i\">df2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Wed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527853445792569-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Thu</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527853445792569-7\"><span class=\"crayon-i\">df3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">G</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Fri</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527853445792569-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sat</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527853445792569-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sun</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527853445792569-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n</div>\n</div>\n<p>请仔细思考一下<code>df_concat</code>结构与原先三个数据结构的关系：其实它就是将原先三个数据纵向串联起来了。另外，请关注一下MultiIndex结构。 <code>concat</code>函数默认是以<code>axis=0</code>（行）为主进行串联。如果需要，我们可以指定<code>axis=1</code>（列）为主进行串联：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527858580524066\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# concat_append.py\r\n\r\ndf_concat_column = pd.concat([df1, df2, df3], axis=1)\r\nprint(\"df_concat_column=\\n{}\\n\".format(df_concat_column))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527858580524066-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527858580524066-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527858580524066-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527858580524066-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527858580524066-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527858580524066-1\"><span class=\"crayon-p\"># concat_append.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527858580524066-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527858580524066-3\"><span class=\"crayon-v\">df_concat_column</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">concat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">axis</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527858580524066-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df_concat_column=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df_concat_column</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527858580524066-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n</div>\n</div>\n<p>这个结构输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52785c852758329\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf_concat_column=\r\n  Note Weekday Note Weekday Note Weekday\r\n1    C     Mon  NaN     NaN  NaN     NaN\r\n2    D     Tue  NaN     NaN  NaN     NaN\r\n3  NaN     NaN    E     Wed  NaN     NaN\r\n4  NaN     NaN    F     Thu  NaN     NaN\r\n5  NaN     NaN  NaN     NaN    G     Fri\r\n6  NaN     NaN  NaN     NaN    A     Sat\r\n7  NaN     NaN  NaN     NaN    B     Sun\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52785c852758329-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52785c852758329-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52785c852758329-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52785c852758329-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52785c852758329-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52785c852758329-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52785c852758329-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52785c852758329-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52785c852758329-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52785c852758329-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52785c852758329-1\"><span class=\"crayon-v\">df_concat_column</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52785c852758329-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Note </span><span class=\"crayon-e\">Weekday </span><span class=\"crayon-e\">Note </span><span class=\"crayon-e\">Weekday </span><span class=\"crayon-e\">Note </span><span class=\"crayon-i\">Weekday</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52785c852758329-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Mon  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52785c852758329-4\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Tue  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52785c852758329-5\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Wed  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52785c852758329-6\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Thu  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52785c852758329-7\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">G</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Fri</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52785c852758329-8\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sat</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52785c852758329-9\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN     </span><span class=\"crayon-i\">NaN</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sun</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52785c852758329-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n</div>\n</div>\n<p>请再次观察一下这里的结果和原先三个数据结构之间的关系。 <code>concat</code>是将多个数据串联在一起。类似的，对于某个具体的数据来说，我们可以在其数据基础上添加（append）其他数据来进行串联：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527860099888058\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# concat_append.py\r\n\r\ndf_append = df1.append([df2, df3])\r\nprint(\"df_append=\\n{}\\n\".format(df_append))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527860099888058-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527860099888058-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527860099888058-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527860099888058-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527860099888058-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527860099888058-1\"><span class=\"crayon-p\"># concat_append.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527860099888058-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527860099888058-3\"><span class=\"crayon-v\">df_append</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527860099888058-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df_append=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df_append</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527860099888058-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n</div>\n</div>\n<p>这个操作的结果和之前的<code>concat</code>是一样的：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527863177884753\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf_append=\r\n  Note Weekday\r\n1    C     Mon\r\n2    D     Tue\r\n3    E     Wed\r\n4    F     Thu\r\n5    G     Fri\r\n6    A     Sat\r\n7    B     Sun\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527863177884753-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527863177884753-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527863177884753-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527863177884753-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527863177884753-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527863177884753-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527863177884753-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527863177884753-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527863177884753-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527863177884753-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527863177884753-1\"><span class=\"crayon-v\">df_append</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527863177884753-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">Note </span><span class=\"crayon-i\">Weekday</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527863177884753-3\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Mon</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527863177884753-4\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Tue</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527863177884753-5\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">E</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Wed</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527863177884753-6\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">F</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Thu</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527863177884753-7\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">G</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Fri</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527863177884753-8\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sat</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527863177884753-9\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\">     </span><span class=\"crayon-i\">Sun</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527863177884753-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n</div>\n</div>\n<h2 id=\"id-merge与join\">Merge与Join</h2>\n<p>pandas中的Merge操作和SQL语句中的Join操作是类似的。Join操作可以分为下面几种：</p>\n<ul>\n<li>INNER</li>\n<li>LEFT OUTER</li>\n<li>RIGHT OUTER</li>\n<li>FULL OUTER</li>\n<li>CROSS</li>\n</ul>\n<p>关于这几种的Join操作的含义请参阅其他资料，例如维基百科：<a href=\"https://en.wikipedia.org/wiki/Join_(SQL)\">Join (SQL)</a>。 使用pandas进行Merge操作很简单，下面是一段代码示例：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527866232988352\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# merge_join.py\r\n\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ndf1 = pd.DataFrame({'key': ['K1', 'K2', 'K3', 'K4'],\r\n                    'A': ['A1', 'A2', 'A3', 'A8'],\r\n                    'B': ['B1', 'B2', 'B3', 'B8']})\r\n\r\ndf2 = pd.DataFrame({'key': ['K3', 'K4', 'K5', 'K6'],\r\n                    'A': ['A3', 'A4', 'A5', 'A6'],\r\n                    'B': ['B3', 'B4', 'B5', 'B6']})\r\n\r\nprint(\"df1=n{}n\".format(df1))\r\nprint(\"df2=n{}n\".format(df2))\r\n\r\nmerge_df = pd.merge(df1, df2)\r\nmerge_inner = pd.merge(df1, df2, how='inner', on=['key'])\r\nmerge_left = pd.merge(df1, df2, how='left')\r\nmerge_left_on_key = pd.merge(df1, df2, how='left', on=['key'])\r\nmerge_right_on_key = pd.merge(df1, df2, how='right', on=['key'])\r\nmerge_outer = pd.merge(df1, df2, how='outer', on=['key'])\r\n\r\nprint(\"merge_df=\\n{}\\n\".format(merge_df))\r\nprint(\"merge_inner=\\n{}\\n\".format(merge_inner))\r\nprint(\"merge_left=\\n{}\\n\".format(merge_left))\r\nprint(\"merge_left_on_key=\\n{}\\n\".format(merge_left_on_key))\r\nprint(\"merge_right_on_key=\\n{}\\n\".format(merge_right_on_key))\r\nprint(\"merge_outer=\\n{}\\n\".format(merge_outer))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527866232988352-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527866232988352-30\">30</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-1\"><span class=\"crayon-p\"># merge_join.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-6\"><span class=\"crayon-v\">df1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'key'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'K1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K4'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-7\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'A'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'A1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A8'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-8\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'B'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'B1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B8'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-10\"><span class=\"crayon-v\">df2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'key'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'K3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K6'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-11\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'A'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'A3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A6'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-12\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'B'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'B3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B6'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-14\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df1=n{}n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-15\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df2=n{}n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-16\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-17\"><span class=\"crayon-v\">merge_df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-18\"><span class=\"crayon-v\">merge_inner</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'inner'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">on</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'key'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-19\"><span class=\"crayon-v\">merge_left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'left'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-20\"><span class=\"crayon-v\">merge_left_on_key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'left'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">on</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'key'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-21\"><span class=\"crayon-v\">merge_right_on_key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'right'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">on</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'key'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-22\"><span class=\"crayon-v\">merge_outer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'outer'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">on</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'key'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-24\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"merge_df=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">merge_df</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-25\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"merge_inner=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">merge_inner</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-26\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"merge_left=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">merge_left</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-27\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"merge_left_on_key=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">merge_left_on_key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-28\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"merge_right_on_key=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">merge_right_on_key</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527866232988352-29\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"merge_outer=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">merge_outer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527866232988352-30\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0066 seconds] -->\r\n</div>\n</div>\n<p>这段代码说明如下：</p>\n<ul>\n<li><code>merge</code>函数的<code>join</code>参数的默认值是“inner”，因此merge_df是两个数据的<code>inner join</code>的结果。另外，在不指明的情况下，<code>merge</code>函数使用所有同名的列名作为key来进行运算。</li>\n<li>merge_inner是指定了列的名称进行<code>inner join</code>。</li>\n<li>merge_left是<code>left outer join</code>的结果</li>\n<li>merge_left_on_key是指定了列名进行<code>left outer join</code>的结果</li>\n<li>merge_right_on_key是指定了列名进行<code>right outer join</code>的结果</li>\n<li>merge_outer是<code>full outer join</code>的结果</li>\n</ul>\n<p>这里的结果如下，请观察一下结果与你的预算是否一致：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52786b571415163\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf1=\r\n    A   B key\r\n0  A1  B1  K1\r\n1  A2  B2  K2\r\n2  A3  B3  K3\r\n3  A8  B8  K4\r\n\r\ndf2=\r\n    A   B key\r\n0  A3  B3  K3\r\n1  A4  B4  K4\r\n2  A5  B5  K5\r\n3  A6  B6  K6\r\n\r\nmerge_df=\r\n    A   B key\r\n0  A3  B3  K3\r\n\r\nmerge_inner=\r\n  A_x B_x key A_y B_y\r\n0  A3  B3  K3  A3  B3\r\n1  A8  B8  K4  A4  B4\r\n\r\nmerge_left=\r\n    A   B key\r\n0  A1  B1  K1\r\n1  A2  B2  K2\r\n2  A3  B3  K3\r\n3  A8  B8  K4\r\n\r\nmerge_left_on_key=\r\n  A_x B_x key  A_y  B_y\r\n0  A1  B1  K1  NaN  NaN\r\n1  A2  B2  K2  NaN  NaN\r\n2  A3  B3  K3   A3   B3\r\n3  A8  B8  K4   A4   B4\r\n\r\nmerge_right_on_key=\r\n   A_x  B_x key A_y B_y\r\n0   A3   B3  K3  A3  B3\r\n1   A8   B8  K4  A4  B4\r\n2  NaN  NaN  K5  A5  B5\r\n3  NaN  NaN  K6  A6  B6\r\n\r\nmerge_outer=\r\n   A_x  B_x key  A_y  B_y\r\n0   A1   B1  K1  NaN  NaN\r\n1   A2   B2  K2  NaN  NaN\r\n2   A3   B3  K3   A3   B3\r\n3   A8   B8  K4   A4   B4\r\n4  NaN  NaN  K5   A5   B5\r\n5  NaN  NaN  K6   A6   B6\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52786b571415163-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52786b571415163-53\">53</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-1\"><span class=\"crayon-v\">df1</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">key</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A1  </span><span class=\"crayon-e\">B1  </span><span class=\"crayon-i\">K1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A2  </span><span class=\"crayon-e\">B2  </span><span class=\"crayon-i\">K2</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-i\">K3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A8  </span><span class=\"crayon-e\">B8  </span><span class=\"crayon-e\">K4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-8\"><span class=\"crayon-v\">df2</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">key</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-10\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-i\">K3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-11\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A4  </span><span class=\"crayon-e\">B4  </span><span class=\"crayon-i\">K4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-12\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A5  </span><span class=\"crayon-e\">B5  </span><span class=\"crayon-i\">K5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-13\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A6  </span><span class=\"crayon-e\">B6  </span><span class=\"crayon-e\">K6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-14\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-15\"><span class=\"crayon-v\">merge_df</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">key</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-17\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-e\">K3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-18\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-19\"><span class=\"crayon-v\">merge_inner</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-20\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A_x </span><span class=\"crayon-e\">B_x </span><span class=\"crayon-e\">key </span><span class=\"crayon-e\">A_y </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">_</span>y</div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-21\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-e\">K3  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-i\">B3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-22\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A8  </span><span class=\"crayon-e\">B8  </span><span class=\"crayon-e\">K4  </span><span class=\"crayon-e\">A4  </span><span class=\"crayon-e\">B4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-24\"><span class=\"crayon-v\">merge_left</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">key</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-26\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A1  </span><span class=\"crayon-e\">B1  </span><span class=\"crayon-i\">K1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-27\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A2  </span><span class=\"crayon-e\">B2  </span><span class=\"crayon-i\">K2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-28\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-i\">K3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-29\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A8  </span><span class=\"crayon-e\">B8  </span><span class=\"crayon-e\">K4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-30\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-31\"><span class=\"crayon-v\">merge_left_on_key</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-32\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A_x </span><span class=\"crayon-e\">B_x </span><span class=\"crayon-e\">key  </span><span class=\"crayon-e\">A_y  </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">_</span>y</div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-33\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A1  </span><span class=\"crayon-e\">B1  </span><span class=\"crayon-e\">K1  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-34\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A2  </span><span class=\"crayon-e\">B2  </span><span class=\"crayon-e\">K2  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-35\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-e\">K3   </span><span class=\"crayon-e\">A3   </span><span class=\"crayon-i\">B3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-36\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A8  </span><span class=\"crayon-e\">B8  </span><span class=\"crayon-e\">K4   </span><span class=\"crayon-e\">A4   </span><span class=\"crayon-e\">B4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-37\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-38\"><span class=\"crayon-v\">merge_right_on_key</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-39\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A_x  </span><span class=\"crayon-e\">B_x </span><span class=\"crayon-e\">key </span><span class=\"crayon-e\">A_y </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">_</span>y</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-40\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A3   </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-e\">K3  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-i\">B3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-41\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A8   </span><span class=\"crayon-e\">B8  </span><span class=\"crayon-e\">K4  </span><span class=\"crayon-e\">A4  </span><span class=\"crayon-i\">B4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-42\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">K5  </span><span class=\"crayon-e\">A5  </span><span class=\"crayon-i\">B5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-43\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">K6  </span><span class=\"crayon-e\">A6  </span><span class=\"crayon-e\">B6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-44\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-45\"><span class=\"crayon-v\">merge_outer</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-46\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A_x  </span><span class=\"crayon-e\">B_x </span><span class=\"crayon-e\">key  </span><span class=\"crayon-e\">A_y  </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">_</span>y</div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-47\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A1   </span><span class=\"crayon-e\">B1  </span><span class=\"crayon-e\">K1  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-48\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A2   </span><span class=\"crayon-e\">B2  </span><span class=\"crayon-e\">K2  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-49\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A3   </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-e\">K3   </span><span class=\"crayon-e\">A3   </span><span class=\"crayon-i\">B3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-50\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A8   </span><span class=\"crayon-e\">B8  </span><span class=\"crayon-e\">K4   </span><span class=\"crayon-e\">A4   </span><span class=\"crayon-i\">B4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-51\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">K5   </span><span class=\"crayon-e\">A5   </span><span class=\"crayon-i\">B5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52786b571415163-52\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">K6   </span><span class=\"crayon-e\">A6   </span><span class=\"crayon-i\">B6</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52786b571415163-53\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0059 seconds] -->\r\n</div>\n</div>\n<p>DataFrame也提供了<code>join</code>函数来根据索引进行数据合并。它可以被用于合并多个DataFrame，这些DataFrame有相同的或者类似的索引，但是没有重复的列名。默认情况下，<code>join</code>函数执行<code>left join</code>。另外，假设两个数据有相同的列名，我们可以通过<code>lsuffix</code>和<code>rsuffix</code>来指定结果中列名的前缀。下面是一段代码示例：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527871618727432\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# merge_join.py\r\n\r\ndf3 = pd.DataFrame({'key': ['K1', 'K2', 'K3', 'K4'],\r\n                    'A': ['A1', 'A2', 'A3', 'A8'],\r\n                    'B': ['B1', 'B2', 'B3', 'B8']},\r\n                    index=[0, 1, 2, 3])\r\n\r\ndf4 = pd.DataFrame({'key': ['K3', 'K4', 'K5', 'K6'],\r\n                    'C': ['A3', 'A4', 'A5', 'A6'],\r\n                    'D': ['B3', 'B4', 'B5', 'B6']},\r\n                    index=[1, 2, 3, 4])\r\n\r\nprint(\"df3=\\n{}\\n\".format(df3))\r\nprint(\"df4=\\n{}\\n\".format(df4))\r\n\r\njoin_df = df3.join(df4, lsuffix='_self', rsuffix='_other')\r\njoin_left = df3.join(df4, how='left', lsuffix='_self', rsuffix='_other')\r\njoin_right = df1.join(df4, how='outer', lsuffix='_self', rsuffix='_other')\r\n\r\nprint(\"join_df=\\n{}\\n\".format(join_df))\r\nprint(\"join_left=\\n{}\\n\".format(join_left))\r\nprint(\"join_right=\\n{}\\n\".format(join_right))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527871618727432-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527871618727432-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-1\"><span class=\"crayon-p\"># merge_join.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-3\"><span class=\"crayon-v\">df3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'key'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'K1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K4'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-4\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'A'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'A1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A8'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-5\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'B'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'B1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B8'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-6\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-8\"><span class=\"crayon-v\">df4</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'key'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'K3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'K6'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-9\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'C'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'A3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'A6'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-10\"><span class=\"crayon-h\">                    </span><span class=\"crayon-s\">'D'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'B3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B4'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'B6'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-11\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-13\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df3=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-14\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"df4=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-16\"><span class=\"crayon-v\">join_df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lsuffix</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'_self'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rsuffix</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'_other'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-17\"><span class=\"crayon-v\">join_left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df3</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'left'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lsuffix</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'_self'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rsuffix</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'_other'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-18\"><span class=\"crayon-v\">join_right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">join</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">how</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'outer'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lsuffix</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'_self'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rsuffix</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'_other'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-20\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"join_df=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">join_df</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-21\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"join_left=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">join_left</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527871618727432-22\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"join_right=\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">join_right</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527871618727432-23\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0056 seconds] -->\r\n</div>\n</div>\n<p>这段代码输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527876019002692\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf3=\r\n    A   B key\r\n0  A1  B1  K1\r\n1  A2  B2  K2\r\n2  A3  B3  K3\r\n3  A8  B8  K4\r\n\r\ndf4=\r\n    C   D key\r\n1  A3  B3  K3\r\n2  A4  B4  K4\r\n3  A5  B5  K5\r\n4  A6  B6  K6\r\n\r\njoin_df=\r\n    A   B key_self    C    D key_other\r\n0  A1  B1       K1  NaN  NaN       NaN\r\n1  A2  B2       K2   A3   B3        K3\r\n2  A3  B3       K3   A4   B4        K4\r\n3  A8  B8       K4   A5   B5        K5\r\n\r\njoin_left=\r\n    A   B key_self    C    D key_other\r\n0  A1  B1       K1  NaN  NaN       NaN\r\n1  A2  B2       K2   A3   B3        K3\r\n2  A3  B3       K3   A4   B4        K4\r\n3  A8  B8       K4   A5   B5        K5\r\n\r\njoin_right=\r\n     A    B key_self    C    D key_other\r\n0   A1   B1       K1  NaN  NaN       NaN\r\n1   A2   B2       K2   A3   B3        K3\r\n2   A3   B3       K3   A4   B4        K4\r\n3   A8   B8       K4   A5   B5        K5\r\n4  NaN  NaN      NaN   A6   B6        K6\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527876019002692-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527876019002692-36\">36</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-1\"><span class=\"crayon-v\">df3</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">key</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A1  </span><span class=\"crayon-e\">B1  </span><span class=\"crayon-i\">K1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A2  </span><span class=\"crayon-e\">B2  </span><span class=\"crayon-i\">K2</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-i\">K3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A8  </span><span class=\"crayon-e\">B8  </span><span class=\"crayon-e\">K4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-8\"><span class=\"crayon-v\">df4</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">key</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-10\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3  </span><span class=\"crayon-i\">K3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-11\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A4  </span><span class=\"crayon-e\">B4  </span><span class=\"crayon-i\">K4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-12\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A5  </span><span class=\"crayon-e\">B5  </span><span class=\"crayon-i\">K5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-13\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A6  </span><span class=\"crayon-e\">B6  </span><span class=\"crayon-e\">K6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-14\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-15\"><span class=\"crayon-v\">join_df</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">_</span>self<span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">_</span>other</div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-17\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A1  </span><span class=\"crayon-e\">B1       </span><span class=\"crayon-e\">K1  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN       </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-18\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A2  </span><span class=\"crayon-e\">B2       </span><span class=\"crayon-e\">K2   </span><span class=\"crayon-e\">A3   </span><span class=\"crayon-e\">B3        </span><span class=\"crayon-i\">K3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-19\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3       </span><span class=\"crayon-e\">K3   </span><span class=\"crayon-e\">A4   </span><span class=\"crayon-e\">B4        </span><span class=\"crayon-i\">K4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-20\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A8  </span><span class=\"crayon-e\">B8       </span><span class=\"crayon-e\">K4   </span><span class=\"crayon-e\">A5   </span><span class=\"crayon-e\">B5        </span><span class=\"crayon-e\">K5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-22\"><span class=\"crayon-v\">join_left</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">_</span>self<span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">_</span>other</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-24\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A1  </span><span class=\"crayon-e\">B1       </span><span class=\"crayon-e\">K1  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN       </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-25\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A2  </span><span class=\"crayon-e\">B2       </span><span class=\"crayon-e\">K2   </span><span class=\"crayon-e\">A3   </span><span class=\"crayon-e\">B3        </span><span class=\"crayon-i\">K3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-26\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A3  </span><span class=\"crayon-e\">B3       </span><span class=\"crayon-e\">K3   </span><span class=\"crayon-e\">A4   </span><span class=\"crayon-e\">B4        </span><span class=\"crayon-i\">K4</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-27\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">A8  </span><span class=\"crayon-e\">B8       </span><span class=\"crayon-e\">K4   </span><span class=\"crayon-e\">A5   </span><span class=\"crayon-e\">B5        </span><span class=\"crayon-e\">K5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-28\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-29\"><span class=\"crayon-v\">join_right</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-30\"><span class=\"crayon-h\">     </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">_</span>self<span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">_</span>other</div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-31\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A1   </span><span class=\"crayon-e\">B1       </span><span class=\"crayon-e\">K1  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN       </span><span class=\"crayon-i\">NaN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-32\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A2   </span><span class=\"crayon-e\">B2       </span><span class=\"crayon-e\">K2   </span><span class=\"crayon-e\">A3   </span><span class=\"crayon-e\">B3        </span><span class=\"crayon-i\">K3</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-33\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A3   </span><span class=\"crayon-e\">B3       </span><span class=\"crayon-e\">K3   </span><span class=\"crayon-e\">A4   </span><span class=\"crayon-e\">B4        </span><span class=\"crayon-i\">K4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-34\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">A8   </span><span class=\"crayon-e\">B8       </span><span class=\"crayon-e\">K4   </span><span class=\"crayon-e\">A5   </span><span class=\"crayon-e\">B5        </span><span class=\"crayon-i\">K5</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527876019002692-35\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">  </span><span class=\"crayon-e\">NaN  </span><span class=\"crayon-e\">NaN      </span><span class=\"crayon-e\">NaN   </span><span class=\"crayon-e\">A6   </span><span class=\"crayon-e\">B6        </span><span class=\"crayon-i\">K6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527876019002692-36\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0052 seconds] -->\r\n</div>\n</div>\n<h1 id=\"id-数据集合和分组操作\">数据集合和分组操作</h1>\n<p>很多时候，我们会需要对批量的数据进行分组统计或者再处理，<code>groupby</code>，<code>agg</code>，<code>apply</code>就是用来做这件事的。</p>\n<ul>\n<li><code>groupby</code>将数据分组，分组后得到<code>pandas.core.groupby.DataFrameGroupBy</code>类型的数据。</li>\n<li><code>agg</code>用来进行合计操作，<code>agg</code>是<code>aggregate</code>的别名。</li>\n<li><code>apply</code>用来将函数func分组化并将结果组合在一起。</li>\n</ul>\n<p>这些概念都很抽象，我们还是通过代码来进行说明。</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52787a807510026\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# groupby.py\r\n\r\nimport pandas as pd\r\nimport numpy as np\r\n\r\ndf = pd.DataFrame({\r\n    'Name': ['A','A','A','B','B','B','C','C','C'],\r\n    'Data': np.random.randint(0, 100, 9)})\r\nprint('df=\\n{}\\n'.format(df))\r\n\r\ngroupby = df.groupby('Name')\r\n\r\nprint(\"Print GroupBy:\")\r\nfor name, group in groupby:\r\n    print(\"Name: {}\\nGroup:\\n{}\\n\".format(name, group))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52787a807510026-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52787a807510026-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52787a807510026-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52787a807510026-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52787a807510026-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52787a807510026-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52787a807510026-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52787a807510026-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52787a807510026-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52787a807510026-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52787a807510026-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52787a807510026-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52787a807510026-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52787a807510026-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52787a807510026-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52787a807510026-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52787a807510026-1\"><span class=\"crayon-p\"># groupby.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52787a807510026-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52787a807510026-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52787a807510026-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52787a807510026-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52787a807510026-6\"><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52787a807510026-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'Name'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'A'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'A'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'A'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'B'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'B'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'B'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'C'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'C'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">'C'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52787a807510026-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">'Data'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52787a807510026-9\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'df=\\n{}\\n'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52787a807510026-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52787a807510026-11\"><span class=\"crayon-v\">groupby</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">groupby</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Name'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52787a807510026-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52787a807510026-13\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Print GroupBy:\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52787a807510026-14\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">group </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">groupby</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52787a807510026-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Name: {}\\nGroup:\\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">group</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52787a807510026-16\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n</div>\n</div>\n<p>在这段代码中，我们生成了9个[0, 100)之间的随机数，数据的第一列是<code>['A','A','A','B','B','B','C','C','C']</code>。然后我们以<code>Name</code>列进行<code>groupby</code>，得到的结果会根据将<code>Name</code>列值一样的分组在一起，我们将得到的结果进行了打印。这段代码的输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527880203728342\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndf=\r\n   Data Name\r\n0    34    A\r\n1    44    A\r\n2    57    A\r\n3    81    B\r\n4    78    B\r\n5    65    B\r\n6    73    C\r\n7    16    C\r\n8     1    C\r\n\r\nPrint GroupBy:\r\nName: A\r\nGroup:\r\n   Data Name\r\n0    34    A\r\n1    44    A\r\n2    57    A\r\n\r\nName: B\r\nGroup:\r\n   Data Name\r\n3    81    B\r\n4    78    B\r\n5    65    B\r\n\r\nName: C\r\nGroup:\r\n   Data Name\r\n6    73    C\r\n7    16    C\r\n8     1    C\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527880203728342-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527880203728342-34\">34</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-1\"><span class=\"crayon-v\">df</span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">Data </span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-3\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-4\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-5\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">57</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-6\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">81</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-7\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">78</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-8\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">65</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-9\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">73</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-10\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-11\"><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-13\"><span class=\"crayon-e\">Print </span><span class=\"crayon-v\">GroupBy</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-14\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-15\"><span class=\"crayon-v\">Group</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-16\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">Data </span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-17\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-18\"><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">44</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-19\"><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">57</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-20\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-21\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-22\"><span class=\"crayon-v\">Group</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-23\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">Data </span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-24\"><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">81</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-25\"><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">78</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-26\"><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">65</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">B</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-28\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-29\"><span class=\"crayon-v\">Group</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-30\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">Data </span><span class=\"crayon-i\">Name</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-31\"><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">73</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-32\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527880203728342-33\"><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-i\">C</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527880203728342-34\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n</div>\n</div>\n<p><code>groupby</code>并不是我们的最终目的，我们的目的是希望分组后还要对这些数据进行进一步的统计或者处理。pandas库本身就提供了很多进行操作的函数，例如：<code>count，sum，mean，median，std，var，min，max，prod，first，last</code>。这些函数的名称很容易明白它的作用。 例如：<code>groupby.sum()</code>就是对结果进行求和运行。 除了直接调用这些函数之外，我们也可以通过<code>agg</code>函数来达到这个目的，这个函数接收其他函数的名称，例如这样：<code>groupby.agg(['sum'])</code>。 通过<code>agg</code>函数，可以一次性调用多个函数，并且可以为结果列指定名称。 像这样：<code>groupby.agg([('Total', 'sum'), ('Min', 'min')])</code>。 这里的三个调用输出结果如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527884267638575\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# groupby.py\r\n\r\nSum: \r\n      Data\r\nName      \r\nA      135\r\nB      224\r\nC       90\r\n\r\nAgg Sum: \r\n     Data\r\n      sum\r\nName     \r\nA     135\r\nB     224\r\nC      90\r\n\r\nAgg Map: \r\n      Data    \r\n     Total Min\r\nName          \r\nA      135  34\r\nB      224  65\r\nC       90   1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527884267638575-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527884267638575-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-1\"><span class=\"crayon-p\"># groupby.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-3\"><span class=\"crayon-v\">Sum</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-4\"><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Data</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-5\"><span class=\"crayon-i\">Name</span><span class=\"crayon-h\">      </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-6\"><span class=\"crayon-i\">A</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">135</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-7\"><span class=\"crayon-i\">B</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">224</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-8\"><span class=\"crayon-i\">C</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">90</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-10\"><span class=\"crayon-e\">Agg </span><span class=\"crayon-v\">Sum</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-11\"><span class=\"crayon-h\">     </span><span class=\"crayon-e\">Data</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-12\"><span class=\"crayon-e\">      </span><span class=\"crayon-e\">sum</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-13\"><span class=\"crayon-i\">Name</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-14\"><span class=\"crayon-i\">A</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">135</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-15\"><span class=\"crayon-i\">B</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">224</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-16\"><span class=\"crayon-i\">C</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">90</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-18\"><span class=\"crayon-e\">Agg </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-19\"><span class=\"crayon-h\">      </span><span class=\"crayon-e\">Data    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-20\"><span class=\"crayon-e\">     </span><span class=\"crayon-e\">Total </span><span class=\"crayon-e\">Min</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-21\"><span class=\"crayon-i\">Name</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-22\"><span class=\"crayon-i\">A</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">135</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">34</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-23\"><span class=\"crayon-i\">B</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">224</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">65</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527884267638575-24\"><span class=\"crayon-i\">C</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527884267638575-25\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n</div>\n</div>\n<p>除了对数据集合进行统计，我们也可以通过<code>apply</code>函数进行分组数据的处理。像这样：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527888514479852\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# groupby.py\r\n\r\ndef sort(df):\r\n    return df.sort_values(by='Data', ascending=False)\r\n\r\nprint(\"Sort Group: \\n{}\\n\".format(groupby.apply(sort)))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527888514479852-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527888514479852-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527888514479852-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527888514479852-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527888514479852-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527888514479852-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527888514479852-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527888514479852-1\"><span class=\"crayon-p\"># groupby.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527888514479852-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527888514479852-3\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">sort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527888514479852-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sort_values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">by</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'Data'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ascending</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">False</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527888514479852-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527888514479852-6\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Sort Group: \\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">groupby</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">apply</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sort</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527888514479852-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n</div>\n</div>\n<p>在这段代码中，我们定义了一个排序函数，并应用在分组数据上，这里最终的输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52788b795749727\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSort Group: \r\n        Data\r\nName        \r\nA    2    57\r\n     1    44\r\n     0    34\r\nB    3    81\r\n     4    78\r\n     5    65\r\nC    6    73\r\n     7    16\r\n     8     1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52788b795749727-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52788b795749727-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52788b795749727-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52788b795749727-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52788b795749727-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52788b795749727-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52788b795749727-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52788b795749727-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52788b795749727-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52788b795749727-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52788b795749727-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52788b795749727-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52788b795749727-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52788b795749727-1\"><span class=\"crayon-e\">Sort </span><span class=\"crayon-v\">Group</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52788b795749727-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Data</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52788b795749727-3\"><span class=\"crayon-i\">Name</span><span class=\"crayon-h\">        </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52788b795749727-4\"><span class=\"crayon-i\">A</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">57</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52788b795749727-5\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">44</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52788b795749727-6\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">34</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52788b795749727-7\"><span class=\"crayon-i\">B</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">81</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52788b795749727-8\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">78</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52788b795749727-9\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">65</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52788b795749727-10\"><span class=\"crayon-i\">C</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">73</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52788b795749727-11\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">16</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52788b795749727-12\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52788b795749727-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n</div>\n</div>\n<h1 id=\"id-时间相关\">时间相关</h1>\n<p>时间是应用程序中很频繁需要处理的逻辑，尤其是对于金融，科技，商业等领域。 当我们在讨论时间，我们讨论的可能是下面三种情况中的一种：</p>\n<ul>\n<li>某个具体的时间点（Timestamp），例如：今天下午一点整</li>\n<li>某个时间范围（Period），例如：整个这个月</li>\n<li>某个时间间隔（Interval），例如：每周二上午七点整</li>\n</ul>\n<p>Python语言提供了时间日期相关的基本API，它们位于<code>datetime</code>, <code>time</code>, <code>calendar</code>几个模块中。下面是一个代码示例：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527890294826529\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# time.py\r\n\r\nimport datetime as dt\r\nimport numpy as np\r\nimport pandas as pd\r\n\r\nnow = dt.datetime.now();\r\nprint(\"Now is {}\".format(now))\r\n\r\nyesterday = now - dt.timedelta(1);\r\nprint(\"Yesterday is {}\\n\".format(yesterday.strftime('%Y-%m-%d')))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527890294826529-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527890294826529-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527890294826529-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527890294826529-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527890294826529-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527890294826529-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527890294826529-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527890294826529-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527890294826529-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527890294826529-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527890294826529-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527890294826529-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527890294826529-1\"><span class=\"crayon-p\"># time.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527890294826529-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527890294826529-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">datetime </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527890294826529-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">numpy </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">np</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527890294826529-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527890294826529-6\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527890294826529-7\"><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">datetime</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">now</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527890294826529-8\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Now is {}\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">now</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527890294826529-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527890294826529-10\"><span class=\"crayon-v\">yesterday</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">now</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">timedelta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527890294826529-11\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Yesterday is {}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">yesterday</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strftime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'%Y-%m-%d'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527890294826529-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n</div>\n</div>\n<p>在这段代码中，我们打印了今天的日期，并通过<code>timedelta</code>进行了日期的减法运算。这段代码输出如下： 借助pandas提供的接口，我们可以很方便的获得以某个时间间隔的时间序列，例如这样：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527894267171675\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# time.py\r\n\r\nthis_year = pd.date_range(dt.datetime(2018, 1, 1),\r\n        dt.datetime(2018, 12, 31), freq='5D')\r\nprint(\"Selected days in 2018: \\n{}\\n\".format(this_year))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527894267171675-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527894267171675-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527894267171675-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527894267171675-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527894267171675-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527894267171675-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527894267171675-1\"><span class=\"crayon-p\"># time.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527894267171675-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba527894267171675-3\"><span class=\"crayon-v\">this_year</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">date_range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">dt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527894267171675-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">dt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">datetime</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2018</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'5D'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527894267171675-5\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Selected days in 2018: \\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">this_year</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527894267171675-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n</div>\n</div>\n<p>这段代码获取了整个2018年中从元旦开始，每隔5天的日期序列。 <code>date_range</code>函数的详细说明见这里：<a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.date_range.html\">pandas.date_range</a> 这段代码的输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba527897820581153\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSelected days in 2018: \r\nDatetimeIndex(['2018-01-01', '2018-01-06', '2018-01-11', '2018-01-16',\r\n               '2018-01-21', '2018-01-26', '2018-01-31', '2018-02-05',\r\n               '2018-02-10', '2018-02-15', '2018-02-20', '2018-02-25',\r\n               '2018-03-02', '2018-03-07', '2018-03-12', '2018-03-17',\r\n               '2018-03-22', '2018-03-27', '2018-04-01', '2018-04-06',\r\n               '2018-04-11', '2018-04-16', '2018-04-21', '2018-04-26',\r\n               '2018-05-01', '2018-05-06', '2018-05-11', '2018-05-16',\r\n               '2018-05-21', '2018-05-26', '2018-05-31', '2018-06-05',\r\n               '2018-06-10', '2018-06-15', '2018-06-20', '2018-06-25',\r\n               '2018-06-30', '2018-07-05', '2018-07-10', '2018-07-15',\r\n               '2018-07-20', '2018-07-25', '2018-07-30', '2018-08-04',\r\n               '2018-08-09', '2018-08-14', '2018-08-19', '2018-08-24',\r\n               '2018-08-29', '2018-09-03', '2018-09-08', '2018-09-13',\r\n               '2018-09-18', '2018-09-23', '2018-09-28', '2018-10-03',\r\n               '2018-10-08', '2018-10-13', '2018-10-18', '2018-10-23',\r\n               '2018-10-28', '2018-11-02', '2018-11-07', '2018-11-12',\r\n               '2018-11-17', '2018-11-22', '2018-11-27', '2018-12-02',\r\n               '2018-12-07', '2018-12-12', '2018-12-17', '2018-12-22',\r\n               '2018-12-27'],\r\n              dtype='datetime64[ns]', freq='5D')\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba527897820581153-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba527897820581153-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-1\"><span class=\"crayon-e\">Selected </span><span class=\"crayon-e\">days </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-2\"><span class=\"crayon-e\">DatetimeIndex</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'2018-01-01'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-01-06'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-01-11'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-01-16'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-3\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-01-21'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-01-26'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-01-31'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-02-05'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-4\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-02-10'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-02-15'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-02-20'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-02-25'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-5\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-03-02'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-03-07'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-03-12'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-03-17'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-6\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-03-22'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-03-27'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-04-01'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-04-06'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-7\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-04-11'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-04-16'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-04-21'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-04-26'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-8\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-05-01'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-05-06'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-05-11'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-05-16'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-9\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-05-21'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-05-26'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-05-31'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-06-05'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-10\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-06-10'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-06-15'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-06-20'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-06-25'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-11\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-06-30'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-07-05'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-07-10'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-07-15'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-12\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-07-20'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-07-25'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-07-30'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-08-04'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-13\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-08-09'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-08-14'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-08-19'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-08-24'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-14\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-08-29'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-09-03'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-09-08'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-09-13'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-15\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-09-18'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-09-23'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-09-28'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-10-03'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-16\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-10-08'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-10-13'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-10-18'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-10-23'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-17\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-10-28'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-11-02'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-11-07'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-11-12'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-18\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-11-17'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-11-22'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-11-27'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-12-02'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-19\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-12-07'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-12-12'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-12-17'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2018-12-22'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-20\"><span class=\"crayon-h\">               </span><span class=\"crayon-s\">'2018-12-27'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba527897820581153-21\"><span class=\"crayon-h\">              </span><span class=\"crayon-v\">dtype</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'datetime64[ns]'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'5D'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba527897820581153-22\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0051 seconds] -->\r\n</div>\n</div>\n<p>我们得到的返回值是<code>DatetimeIndex</code>类型的，我们可以创建一个DataFrame并以此作为索引：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba52789b646208552\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# time.py\r\n\r\ndf = pd.DataFrame(np.random.randint(0, 100, this_year.size), index=this_year)\r\nprint(\"Jan: \\n{}\\n\".format(df['2018-01']))\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52789b646208552-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52789b646208552-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52789b646208552-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba52789b646208552-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba52789b646208552-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba52789b646208552-1\"><span class=\"crayon-p\"># time.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52789b646208552-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba52789b646208552-3\"><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">DataFrame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">np</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">random</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">randint</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">this_year</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">this_year</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba52789b646208552-4\"><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Jan: \\n{}\\n\"</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">df</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'2018-01'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba52789b646208552-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n</div>\n</div>\n<p>在这段代码中，我们创建了与索引数量一样多的[0, 100)间的随机整数，并用<code>this_year</code>作为索引。用<code>DatetimeIndex</code>作索引的好处是，我们可以直接指定某个范围来选择数据，例如，通过<code>df['2018-01']</code>选出所有1月份的数据。 这段代码输出如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba5278a1103999212\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nJan: \r\n             0\r\n2018-01-01  61\r\n2018-01-06  85\r\n2018-01-11  66\r\n2018-01-16  11\r\n2018-01-21  34\r\n2018-01-26   2\r\n2018-01-31  97\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a1103999212-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a1103999212-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a1103999212-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a1103999212-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a1103999212-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a1103999212-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a1103999212-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a1103999212-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a1103999212-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a1103999212-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a1103999212-1\"><span class=\"crayon-v\">Jan</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a1103999212-2\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a1103999212-3\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">61</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a1103999212-4\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">06</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">85</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a1103999212-5\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">66</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a1103999212-6\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a1103999212-7\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">34</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a1103999212-8\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a1103999212-9\"><span class=\"crayon-cn\">2018</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">97</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a1103999212-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n</div>\n</div>\n<h1 id=\"id-图形展示\">图形展示</h1>\n<p>pandas的图形展示依赖于<code>matplotlib</code>库。对于这个库，我们在后面会专门讲解，因为这里仅仅提供一个简单的代码示例，让大家感受一下图形展示的样子。 代码示例如下：</p>\n<div>\n<div><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0dfba5278a5674494095\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# plot.py\r\n\r\nimport matplotlib.pyplot as plt\r\nimport pandas as pd\r\n\r\ndata = pd.read_csv(\"data/housing.csv\")\r\ndata.hist(bins=50, figsize=(15, 12))\r\nplt.show()\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a5674494095-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a5674494095-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a5674494095-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a5674494095-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a5674494095-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a5674494095-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a5674494095-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0dfba5278a5674494095-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0dfba5278a5674494095-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a5674494095-1\"><span class=\"crayon-p\"># plot.py</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a5674494095-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a5674494095-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">matplotlib</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pyplot </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">plt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a5674494095-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-e\">pandas </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pd</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a5674494095-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a5674494095-6\"><span class=\"crayon-v\">data</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read_csv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data/housing.csv\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a5674494095-7\"><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hist</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">bins</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">figsize</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0dfba5278a5674494095-8\"><span class=\"crayon-v\">plt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">show</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0dfba5278a5674494095-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n</div>\n</div>\n<p>这段代码读取了一个CSV文件，这个文件中包含了一些关于房价的信息。在读取完之后，通过直方图（hist）将其展示了出来。 该CSV文件的内容见这里：<a href=\"https://github.com/paulQuei/pandas_tutorial/blob/master/data/housing.csv\">pandas_tutorial/data/housing.csv</a> 直方图结果如下所示： <img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a6a957ba1a4bf697dd432569ed8d294e.png\" width=\"900\"></p>\n<h1 id=\"id-结束语\">结束语</h1>\n<p>虽然本文的标题是“进阶篇”，我们也讨论了一些更深入的知识。但很显然，这对于pandas来说，仍然是很皮毛的东西。由于篇幅所限，更多的内容在今后的时候，有机会我们再来一起探讨。 读者朋友也可以根据官网上的文档进行更深入的学习。</p>\n<h1 id=\"id-参考资料与推荐读物\">参考资料与推荐读物</h1>\n<ul>\n<li><a href=\"https://pandas.pydata.org\">pandas官方网站</a></li>\n<li><a href=\"https://www.amazon.com/Python-Data-Analysis-Wrangling-IPython/dp/1491957662/\">Python for Data Analysis</a></li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89081\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89081votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89081\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/d21a83f6d43617f04d77157889bd773c35ec673d.jpg"}
{"url_object_id": "1c08d2ad1b40267092f07c3dea8b04ad", "title": "用 Python 编写的 Python 解释器", "url": "http://python.jobbole.com/89074/", "create_date": "2018/04/12", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/bfa0d07e7eb2fac2eb80cd5df9567931.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "3", "tags": "实践项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://aosabook.org/en/500L/a-python-interpreter-written-in-python.html\">Allison Kaptur</a>   译文出处：<a target=\"_blank\" href=\"http://qingyunha.github.io/taotao/\">qingyunha</a>   </div><p><em>Allison是Dropbox的工程师，在那里她维护着世界上最大的由Python客户组成的网络。在Dropbox之前，她是Recurse Center的引导师, … 她在北美的PyCon做过关于Python内部机制的演讲，并且她喜欢奇怪的bugs。她的博客地址是<a href=\"http://akaptur.com/\">akaptur.com</a>.</em></p>\n<h2><a id=\"introduction\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#introduction\"></a>Introduction</h2>\n<p>Byterun是一个用Python实现的Python解释器。随着我在Byterun上的工作，我惊讶并很高兴地的发现，这个Python解释器的基础结构可以满足500行的限制。在这一章我们会搞清楚这个解释器的结构，给你足够的知识探索下去。我们的目标不是向你展示解释器的每个细节—像编程和计算机科学其他有趣的领域一样，你可能会投入几年的时间去搞清楚这个主题。</p>\n<p>Byterun是Ned Batchelder和我完成的，建立在Paul Swartz的工作之上。它的结构和主要的Python实现（CPython）差不多，所以理解Byterun会帮助你理解大多数解释器特别是CPython解释器。（如果你不知道你用的是什么Python，那么很可能它就是CPython）。尽管Byterun很小，但它能执行大多数简单的Python程序。</p>\n<h3><a id=\"a-python-interpreter\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#a-python-interpreter\"></a>A Python Interpreter</h3>\n<p>在开始之前，让我们缩小一下“Pyhton解释器”的意思。在讨论Python的时候，“解释器”这个词可以用在很多不同的地方。有的时候解释器指的是REPL，当你在命令行下敲下<code>python</code>时所得到的交互式环境。有时候人们会相互替代的使用Python解释器和Python来说明执行Python代码的这一过程。在本章，“解释器”有一个更精确的意思：执行Python程序过程中的最后一步。</p>\n<p>在解释器接手之前，Python会执行其他3个步骤：词法分析，语法解析和编译。这三步合起来把源代码转换成<em>code object</em>,它包含着解释器可以理解的指令。而解释器的工作就是解释code object中的指令。</p>\n<p>你可能很奇怪执行Python代码会有编译这一步。Python通常被称为解释型语言，就像Ruby，Perl一样，它们和编译型语言相对，比如C，Rust。然而，这里的术语并不是它看起来的那样精确。大多数解释型语言包括Python，确实会有编译这一步。而Python被称为解释型的原因是相对于编译型语言，它在编译这一步的工作相对较少（解释器做相对多的工作）。在这章后面你会看到，Python的编译器比C语言编译器需要更少的关于程序行为的信息。</p>\n<h3><a id=\"a-python-python-interpreter\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#a-python-python-interpreter\"></a>A Python Python Interpreter</h3>\n<p>Byterun是一个用Python写的Python解释器，这点可能让你感到奇怪，但没有比用C语言写C语言编译器更奇怪。（事实上，广泛使用的gcc编译器就是用C语言本身写的）你可以用几乎的任何语言写一个Python解释器。</p>\n<p>用Python写Python既有优点又有缺点。最大的缺点就是速度：用Byterun执行代码要比用CPython执行慢的多，CPython解释器是用C语言实现的并做了优化。然而Byterun是为了学习而设计的，所以速度对我们不重要。使用Python最大优点是我们可以<em>仅仅</em>实现解释器，而不用担心Python运行时的部分，特别是对象系统。比如当Byterun需要创建一个类时，它就会回退到“真正”的Python。另外一个优势是Byterun很容易理解，部分原因是它是用高级语言写的（Python！）（另外我们不会对解释器做优化 — 再一次，清晰和简单比速度更重要）</p>\n<h2><a id=\"building-an-interpreter\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#building-an-interpreter\"></a>Building an Interpreter</h2>\n<p>在我们考察Byterun代码之前，我们需要一些对解释器结构的高层次视角。Python解释器是如何工作的？</p>\n<p>Python解释器是一个<em>虚拟机</em>,模拟真实计算机的软件。我们这个虚拟机是栈机器，它用几个栈来完成操作（与之相对的是寄存器机器，它从特定的内存地址读写数据）。</p>\n<p>Python解释器是一个<em>字节码解释器</em>：它的输入是一些命令集合称作<em>字节码</em>。当你写Python代码时，词法分析器，语法解析器和编译器生成code object让解释器去操作。每个code object都包含一个要被执行的指令集合 — 它就是字节码 — 另外还有一些解释器需要的信息。字节码是Python代码的一个<em>中间层表示</em>：它以一种解释器可以理解的方式来表示源代码。这和汇编语言作为C语言和机器语言的中间表示很类似。</p>\n<h3><a id=\"a-tiny-interpreter\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#a-tiny-interpreter\"></a>A Tiny Interpreter</h3>\n<p>为了让说明更具体，让我们从一个非常小的解释器开始。它只能计算两个数的和，只能理解三个指令。它执行的所有代码只是这三个指令的不同组合。下面就是这三个指令：</p>\n<ul>\n<li><code>LOAD_VALUE</code></li>\n<li><code>ADD_TWO_VALUES</code></li>\n<li><code>PRINT_ANSWER</code></li>\n</ul>\n<p>我们不关心词法，语法和编译，所以我们也不在乎这些指令是如何产生的。你可以想象，你写下<code>7 + 5</code>，然后一个编译器为你生成那三个指令的组合。如果你有一个合适的编译器，你甚至可以用Lisp的语法来写，只要它能生成相同的指令。</p>\n<p>假设</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b530468316849\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n7 + 5</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b530468316849-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b530468316849-1\"><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>生成这样的指令集：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b539305383946\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nwhat_to_execute = {\r\n    \"instructions\": [(\"LOAD_VALUE\", 0),  # the first number\r\n                     (\"LOAD_VALUE\", 1),  # the second number\r\n                     (\"ADD_TWO_VALUES\", None),\r\n                     (\"PRINT_ANSWER\", None)],\r\n    \"numbers\": [7, 5] }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b539305383946-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b539305383946-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b539305383946-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b539305383946-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b539305383946-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b539305383946-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b539305383946-1\"><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b539305383946-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"instructions\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># the first number</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b539305383946-3\"><span class=\"crayon-h\">                     </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\">  </span><span class=\"crayon-p\"># the second number</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b539305383946-4\"><span class=\"crayon-h\">                     </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"ADD_TWO_VALUES\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b539305383946-5\"><span class=\"crayon-h\">                     </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"PRINT_ANSWER\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b539305383946-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"numbers\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>Python解释器是一个<em>栈机器</em>，所以它必须通过操作栈来完成这个加法。(<a href=\"http://qingyunha.github.io/taotao/#figure-1.1\">Figure 1.1</a>)解释器先执行第一条指令，<code>LOAD_VALUE</code>，把第一个数压到栈中。接着它把第二个数也压到栈中。然后，第三条指令，<code>ADD_TWO_VALUES</code>,先把两个数从栈中弹出，加起来，再把结果压入栈中。最后一步，把结果弹出并输出。</p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fq9s0849djj216308fgm2.jpg\"></p>\n<p><code>LOAD_VALUE</code>这条指令告诉解释器把一个数压入栈中，但指令本身并没有指明这个数是多少。指令需要一个额外的信息告诉解释器去哪里找到这个数。所以我们的指令集有两个部分：指令本身和一个常量列表。（在Python中，字节码就是我们称为的“指令”，而解释器执行的是<em>code object</em>。）</p>\n<p>为什么不把数字直接嵌入指令之中？想象一下，如果我们加的不是数字，而是字符串。我们可不想把字符串这样的东西加到指令中，因为它可以有任意的长度。另外，我们这种设计也意味着我们只需要对象的一份拷贝，比如这个加法 <code>7 + 7</code>, 现在常量表 <code>\"numbers\"</code>只需包含一个<code>7</code>。</p>\n<p>你可能会想为什么会需要除了<code>ADD_TWO_VALUES</code>之外的指令。的确，对于我们两个数加法，这个例子是有点人为制作的意思。然而，这个指令却是建造更复杂程序的轮子。比如，就我们目前定义的三个指令，只要给出正确的指令组合，我们可以做三个数的加法，或者任意个数的加法。同时，栈提供了一个清晰的方法去跟踪解释器的状态，这为我们增长的复杂性提供了支持。</p>\n<p>现在让我们来完成我们的解释器。解释器对象需要一个栈，它可以用一个列表来表示。它还需要一个方法来描述怎样执行每条指令。比如，<code>LOAD_VALUE</code>会把一个值压入栈中。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b53f432839761\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Interpreter:\r\n    def __init__(self):\r\n        self.stack = []\r\n\r\n    def LOAD_VALUE(self, number):\r\n        self.stack.append(number)\r\n\r\n    def PRINT_ANSWER(self):\r\n        answer = self.stack.pop()\r\n        print(answer)\r\n\r\n    def ADD_TWO_VALUES(self):\r\n        first_num = self.stack.pop()\r\n        second_num = self.stack.pop()\r\n        total = first_num + second_num\r\n        self.stack.append(total)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b53f432839761-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b53f432839761-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b53f432839761-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b53f432839761-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b53f432839761-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b53f432839761-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b53f432839761-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b53f432839761-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b53f432839761-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b53f432839761-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b53f432839761-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b53f432839761-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b53f432839761-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b53f432839761-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b53f432839761-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b53f432839761-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b53f432839761-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Interpreter</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b53f432839761-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b53f432839761-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b53f432839761-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b53f432839761-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LOAD_VALUE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b53f432839761-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b53f432839761-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b53f432839761-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PRINT_ANSWER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b53f432839761-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">answer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b53f432839761-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">answer</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b53f432839761-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b53f432839761-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ADD_TWO_VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b53f432839761-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">first_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b53f432839761-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">second_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b53f432839761-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">first_num</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">second_num</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b53f432839761-16\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>这三个方法完成了解释器所理解的三条指令。但解释器还需要一样东西：一个能把所有东西结合在一起并执行的方法。这个方法就叫做<code>run_code</code>, 它把我们前面定义的字典结构<code>what-to-execute</code>作为参数，循环执行里面的每条指令，如何指令有参数，处理参数，然后调用解释器对象中相应的方法。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b543606301963\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    def run_code(self, what_to_execute):\r\n        instructions = what_to_execute[\"instructions\"]\r\n        numbers = what_to_execute[\"numbers\"]\r\n        for each_step in instructions:\r\n            instruction, argument = each_step\r\n            if instruction == \"LOAD_VALUE\":\r\n                number = numbers[argument]\r\n                self.LOAD_VALUE(number)\r\n            elif instruction == \"ADD_TWO_VALUES\":\r\n                self.ADD_TWO_VALUES()\r\n            elif instruction == \"PRINT_ANSWER\":\r\n                self.PRINT_ANSWER()</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b543606301963-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b543606301963-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b543606301963-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b543606301963-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b543606301963-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b543606301963-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b543606301963-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b543606301963-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b543606301963-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b543606301963-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b543606301963-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b543606301963-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b543606301963-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run_code</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b543606301963-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">instructions</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"instructions\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b543606301963-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"numbers\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b543606301963-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">each_step </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instructions</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b543606301963-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">each_step</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b543606301963-6\"><span class=\"crayon-e\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b543606301963-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">number</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b543606301963-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">LOAD_VALUE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">number</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b543606301963-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ADD_TWO_VALUES\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b543606301963-10\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ADD_TWO_VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b543606301963-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"PRINT_ANSWER\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b543606301963-12\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PRINT_ANSWER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>为了测试，我们创建一个解释器对象，然后用前面定义的 7 + 5 的指令集来调用<code>run_code</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b547181128594\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    interpreter = Interpreter()\r\n    interpreter.run_code(what_to_execute)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b547181128594-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b547181128594-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b547181128594-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">interpreter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Interpreter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b547181128594-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">interpreter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run_code</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>显然，它会输出12</p>\n<p>尽管我们的解释器功能受限，但这个加法过程几乎和真正的Python解释器是一样的。这里，我们还有几点要注意。</p>\n<p>首先，一些指令需要参数。在真正的Python bytecode中，大概有一半的指令有参数。像我们的例子一样，参数和指令打包在一起。注意<em>指令</em>的参数和传递给对应方法的参数是不同的。</p>\n<p>第二，指令<code>ADD_TWO_VALUES</code>不需要任何参数，它从解释器栈中弹出所需的值。这正是以栈为基础的解释器的特点。</p>\n<p>记得我们说过只要给出合适的指令集，不需要对解释器做任何改变，我们做多个数的加法。考虑下面的指令集，你觉得会发生什么？如果你有一个合适的编译器，什么代码才能编译出下面的指令集？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b54a801119697\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    what_to_execute = {\r\n        \"instructions\": [(\"LOAD_VALUE\", 0),\r\n                         (\"LOAD_VALUE\", 1),\r\n                         (\"ADD_TWO_VALUES\", None),\r\n                         (\"LOAD_VALUE\", 2),\r\n                         (\"ADD_TWO_VALUES\", None),\r\n                         (\"PRINT_ANSWER\", None)],\r\n        \"numbers\": [7, 5, 8] }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54a801119697-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54a801119697-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54a801119697-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54a801119697-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54a801119697-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54a801119697-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54a801119697-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54a801119697-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54a801119697-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54a801119697-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"instructions\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54a801119697-3\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54a801119697-4\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"ADD_TWO_VALUES\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54a801119697-5\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54a801119697-6\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"ADD_TWO_VALUES\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54a801119697-7\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"PRINT_ANSWER\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54a801119697-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"numbers\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>从这点出发，我们开始看到这种结构的可扩展性：我们可以通过向解释器对象增加方法来描述更多的操作（只要有一个编译器能为我们生成组织良好的指令集）。</p>\n<h4><a id=\"variables\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#variables\"></a>Variables</h4>\n<p>接下来给我们的解释器增加变量的支持。我们需要一个保存变量值的指令，<code>STORE_NAME</code>;一个取变量值的指令<code>LOAD_NAME</code>;和一个变量到值的映射关系。目前，我们会忽略命名空间和作用域，所以我们可以把变量和值的映射直接存储在解释器对象中。最后，我们要保证<code>what_to_execute</code>除了一个常量列表，还要有个变量名字的列表。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b54e923367285\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; def s():\r\n...     a = 1\r\n...     b = 2\r\n...     print(a + b)\r\n# a friendly compiler transforms `s` into:\r\n    what_to_execute = {\r\n        \"instructions\": [(\"LOAD_VALUE\", 0),\r\n                         (\"STORE_NAME\", 0),\r\n                         (\"LOAD_VALUE\", 1),\r\n                         (\"STORE_NAME\", 1),\r\n                         (\"LOAD_NAME\", 0),\r\n                         (\"LOAD_NAME\", 1),\r\n                         (\"ADD_TWO_VALUES\", None),\r\n                         (\"PRINT_ANSWER\", None)],\r\n        \"numbers\": [1, 2],\r\n        \"names\":   [\"a\", \"b\"] }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54e923367285-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54e923367285-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54e923367285-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54e923367285-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54e923367285-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54e923367285-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54e923367285-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54e923367285-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54e923367285-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54e923367285-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54e923367285-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54e923367285-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54e923367285-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54e923367285-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b54e923367285-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b54e923367285-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54e923367285-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">s</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54e923367285-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54e923367285-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54e923367285-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54e923367285-5\"><span class=\"crayon-c\"># a friendly compiler transforms `s` into:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54e923367285-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54e923367285-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"instructions\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54e923367285-8\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"STORE_NAME\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54e923367285-9\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54e923367285-10\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"STORE_NAME\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54e923367285-11\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_NAME\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54e923367285-12\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"LOAD_NAME\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54e923367285-13\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"ADD_TWO_VALUES\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54e923367285-14\"><span class=\"crayon-h\">                         </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"PRINT_ANSWER\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b54e923367285-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"numbers\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b54e923367285-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"names\"</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"a\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"b\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>我们的新的的实现在下面。为了跟踪哪名字绑定到那个值，我们在__init__方法中增加一个environment字典。我们也增加了STORE_NAME和LOAD_NAME方法，它们获得变量名，然后从environment字典中设置或取出这个变量值。</p>\n<p>现在指令参数就有两个不同的意思，它可能是numbers列表的索引，也可能是names列表的索引。解释器通过检查所执行的指令就能知道是那种参数。而我们打破这种逻辑 ，把指令和它所用何种参数的映射关系放在另一个单独的方法中。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b552740056865\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Interpreter:\r\n    def __init__(self):\r\n        self.stack = []\r\n        self.environment = {}\r\n\r\n    def STORE_NAME(self, name):\r\n        val = self.stack.pop()\r\n        self.environment[name] = val\r\n\r\n    def LOAD_NAME(self, name):\r\n        val = self.environment[name]\r\n        self.stack.append(val)\r\n\r\n    def parse_argument(self, instruction, argument, what_to_execute):\r\n        \"\"\" Understand what the argument to each instruction means.\"\"\"\r\n        numbers = [\"LOAD_VALUE\"]\r\n        names = [\"LOAD_NAME\", \"STORE_NAME\"]\r\n\r\n        if instruction in numbers:\r\n            argument = what_to_execute[\"numbers\"][argument]\r\n        elif instruction in names:\r\n            argument = what_to_execute[\"names\"][argument]\r\n\r\n        return argument\r\n\r\n    def run_code(self, what_to_execute):\r\n        instructions = what_to_execute[\"instructions\"]\r\n        for each_step in instructions:\r\n            instruction, argument = each_step\r\n            argument = self.parse_argument(instruction, argument, what_to_execute)\r\n\r\n            if instruction == \"LOAD_VALUE\":\r\n                self.LOAD_VALUE(argument)\r\n            elif instruction == \"ADD_TWO_VALUES\":\r\n                self.ADD_TWO_VALUES()\r\n            elif instruction == \"PRINT_ANSWER\":\r\n                self.PRINT_ANSWER()\r\n            elif instruction == \"STORE_NAME\":\r\n                self.STORE_NAME(argument)\r\n            elif instruction == \"LOAD_NAME\":\r\n                self.LOAD_NAME(argument)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b552740056865-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b552740056865-41\">41</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Interpreter</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">environment</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">STORE_NAME</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">environment</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">val</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-10\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LOAD_NAME</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">environment</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse_argument</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\" Understand what the argument to each instruction means.\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"LOAD_NAME\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"STORE_NAME\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-18\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">instruction </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">numbers</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"numbers\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">instruction </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">names</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"names\"</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">argument</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-26\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run_code</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">instructions</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"instructions\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">each_step </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instructions</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">each_step</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-30\"><span class=\"crayon-e\">            </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse_argument</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">instruction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"LOAD_VALUE\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-33\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">LOAD_VALUE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"ADD_TWO_VALUES\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-35\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">ADD_TWO_VALUES</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-36\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"PRINT_ANSWER\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-37\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">PRINT_ANSWER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-38\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"STORE_NAME\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-39\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">STORE_NAME</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b552740056865-40\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"LOAD_NAME\"</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b552740056865-41\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">LOAD_NAME</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0080 seconds] -->\r\n<p>仅仅五个指令，run_code这个方法已经开始变得冗长了。如果保持这种结构，那么每条指令都需要一个if分支。这里，我们要利用Python的动态方法查找。我们总会给一个称为FOO的指令定义一个名为FOO的方法，这样我们就可用Python的getattr函数在运行时动态查找方法，而不用这个大大的分支结构。run_code方法现在是这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b557323965744\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    def execute(self, what_to_execute):\r\n        instructions = what_to_execute[\"instructions\"]\r\n        for each_step in instructions:\r\n            instruction, argument = each_step\r\n            argument = self.parse_argument(instruction, argument, what_to_execute)\r\n            bytecode_method = getattr(self, instruction)\r\n            if argument is None:\r\n                bytecode_method()\r\n            else:\r\n                bytecode_method(argument)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b557323965744-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b557323965744-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b557323965744-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b557323965744-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b557323965744-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b557323965744-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b557323965744-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b557323965744-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b557323965744-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b557323965744-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b557323965744-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">execute</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b557323965744-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">instructions</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">\"instructions\"</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b557323965744-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">each_step </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instructions</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b557323965744-4\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">each_step</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b557323965744-5\"><span class=\"crayon-e\">            </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse_argument</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">instruction</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">what_to_execute</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b557323965744-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">bytecode_method</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">getattr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">instruction</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b557323965744-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">argument </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b557323965744-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">bytecode_method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b557323965744-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b557323965744-10\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">bytecode_method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p></p>\n<h2>Real Python Bytecode</h2>\n<p>现在，放弃我们的小指令集，去看看真正的Python字节码。字节码的结构和我们的小解释器的指令集差不多，除了字节码用一个字节而不是一个名字来指示这条指令。为了理解它的结构，我们将考察一个函数的字节码。考虑下面这个例子</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b55a451093789\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; def cond():\r\n...     x = 3\r\n...     if x &lt; 5:\r\n...         return 'yes'\r\n...     else:\r\n...         return 'no'\r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b55a451093789-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b55a451093789-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b55a451093789-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b55a451093789-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b55a451093789-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b55a451093789-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b55a451093789-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b55a451093789-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cond</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b55a451093789-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b55a451093789-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b55a451093789-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">         </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'yes'</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b55a451093789-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b55a451093789-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">         </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'no'</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b55a451093789-7\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>Python在运行时会暴露一大批内部信息，并且我们可以通过REPL直接访问这些信息。对于函数对象<code>cond</code>，<code>cond.__code__</code>是与其关联的code object，而<code>cond.__code__.co_code</code>就是它的字节码。当你写Python代码时，你永远也不会想直接使用这些属性，但是这可以让我们做出各种恶作剧，同时也可以看看内部机制。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b55e057507350\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; cond.__code__.co_code  # the bytecode as raw bytes\r\nb'd\\x01\\x00}\\x00\\x00|\\x00\\x00d\\x02\\x00k\\x00\\x00r\\x16\\x00d\\x03\\x00Sd\\x04\\x00Sd\\x00\r\n   \\x00S'\r\n&gt;&gt;&gt; list(cond.__code__.co_code)  # the bytecode as numbers\r\n[100, 1, 0, 125, 0, 0, 124, 0, 0, 100, 2, 0, 107, 0, 0, 114, 22, 0, 100, 3, 0, 83, \r\n 100, 4, 0, 83, 100, 0, 0, 83]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b55e057507350-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b55e057507350-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b55e057507350-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b55e057507350-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b55e057507350-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b55e057507350-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b55e057507350-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cond</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__code__</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co_code</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># the bytecode as raw bytes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b55e057507350-2\"><span class=\"crayon-i\">b</span><span class=\"crayon-s\">'d\\x01\\x00}\\x00\\x00|\\x00\\x00d\\x02\\x00k\\x00\\x00r\\x16\\x00d\\x03\\x00Sd\\x04\\x00Sd\\x00</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b55e057507350-3\"><span class=\"crayon-s\">   \\x00S'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b55e057507350-4\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">list</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cond</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__code__</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co_code</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># the bytecode as numbers</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b55e057507350-5\"><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">125</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">124</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">107</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">114</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">83</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b55e057507350-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">83</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">83</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>当我们直接输出这个字节码，它看起来完全无法理解 — 唯一我们了解的是它是一串字节。很幸运，我们有一个很强大的工具可以用：Python标准库中的<code>dis</code> module。</p>\n<p><code>dis</code>是一个字节码反汇编器。反汇编器以为机器而写的底层代码作为输入，比如汇编代码和字节码，然后以人类可读的方式输出。当我们运行<code>dis.dis</code>, 它输出每个字节码的解释。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b562073668682\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; dis.dis(cond)\r\n  2           0 LOAD_CONST               1 (3)\r\n              3 STORE_FAST               0 (x)\r\n\r\n  3           6 LOAD_FAST                0 (x)\r\n              9 LOAD_CONST               2 (5)\r\n             12 COMPARE_OP               0 (&lt;)\r\n             15 POP_JUMP_IF_FALSE       22\r\n\r\n  4          18 LOAD_CONST               3 ('yes')\r\n             21 RETURN_VALUE\r\n\r\n  6     &gt;&gt;   22 LOAD_CONST               4 ('no')\r\n             25 RETURN_VALUE\r\n             26 LOAD_CONST               0 (None)\r\n             29 RETURN_VALUE</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b562073668682-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b562073668682-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b562073668682-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b562073668682-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b562073668682-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b562073668682-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b562073668682-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b562073668682-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b562073668682-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b562073668682-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b562073668682-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b562073668682-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b562073668682-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b562073668682-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b562073668682-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b562073668682-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b562073668682-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cond</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b562073668682-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b562073668682-3\"><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">STORE</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b562073668682-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b562073668682-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">                </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b562073668682-6\"><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b562073668682-7\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMPARE</span><span class=\"crayon-sy\">_</span>OP<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b562073668682-8\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">POP_JUMP_IF</span><span class=\"crayon-sy\">_</span>FALSE<span class=\"crayon-h\">       </span><span class=\"crayon-cn\">22</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b562073668682-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b562073668682-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b562073668682-11\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RETURN</span><span class=\"crayon-sy\">_</span>VALUE</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b562073668682-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b562073668682-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'no'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b562073668682-14\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RETURN</span><span class=\"crayon-sy\">_</span>VALUE</div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b562073668682-15\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b562073668682-16\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RETURN_VALUE</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0048 seconds] -->\r\n<p>这些都是什么意思？让我们以第一条指令<code>LOAD_CONST</code>为例子。第一列的数字（<code>2</code>）表示对应源代码的行数。第二列的数字是字节码的索引，告诉我们指令<code>LOAD_CONST</code>在0位置。第三列是指令本身对应的人类可读的名字。如果第四列存在，它表示指令的参数。如果第5列存在，它是一个关于参数是什么的提示。</p>\n<p>考虑这个字节码的前几个字节：[100, 1, 0, 125, 0, 0]。这6个字节表示两条带参数的指令。我们可以使用<code>dis.opname</code>，一个字节到可读字符串的映射，来找到指令100和指令125代表是什么：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b566055925680\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; dis.opname[100]\r\n'LOAD_CONST'\r\n&gt;&gt;&gt; dis.opname[125]\r\n'STORE_FAST'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b566055925680-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b566055925680-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b566055925680-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b566055925680-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b566055925680-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">opname</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b566055925680-2\"><span class=\"crayon-s\">'LOAD_CONST'</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b566055925680-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">opname</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">125</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b566055925680-4\"><span class=\"crayon-s\">'STORE_FAST'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>第二和第三个字节 — 1 ，0 —是<code>LOAD_CONST</code>的参数，第五和第六个字节 — 0，0 — 是<code>STORE_FAST</code>的参数。就像我们前面的小例子，<code>LOAD_CONST</code>需要知道的到哪去找常量，<code>STORE_FAST</code>需要找到名字。（Python的<code>LOAD_CONST</code>和我们小例子中的<code>LOAD_VALUE</code>一样，<code>LOAD_FAST</code>和<code>LOAD_NAME</code>一样）。所以这六个字节代表第一行源代码<code>x = 3</code>.(为什么用两个字节表示指令的参数？如果Python使用一个字节，每个code object你只能有256个常量/名字，而用两个字节，就增加到了256的平方，65536个）。</p>\n<h3><a id=\"conditionals-and-loops\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#conditionals-and-loops\"></a>Conditionals and Loops</h3>\n<p>到目前为止，我们的解释器只能一条接着一条的执行指令。这有个问题，我们经常会想多次执行某个指令，或者在特定的条件下略过它们。为了可以写循环和分支结构，解释器必须能够在指令中跳转。在某种程度上，Python在字节码中使用<code>GOTO</code>语句来处理循环和分支！让我们再看一个<code>cond</code>函数的反汇编结果：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b56a753509201\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; dis.dis(cond)\r\n  2           0 LOAD_CONST               1 (3)\r\n              3 STORE_FAST               0 (x)\r\n\r\n  3           6 LOAD_FAST                0 (x)\r\n              9 LOAD_CONST               2 (5)\r\n             12 COMPARE_OP               0 (&lt;)\r\n             15 POP_JUMP_IF_FALSE       22\r\n\r\n  4          18 LOAD_CONST               3 ('yes')\r\n             21 RETURN_VALUE\r\n\r\n  6     &gt;&gt;   22 LOAD_CONST               4 ('no')\r\n             25 RETURN_VALUE\r\n             26 LOAD_CONST               0 (None)\r\n             29 RETURN_VALUE</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56a753509201-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56a753509201-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56a753509201-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56a753509201-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56a753509201-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56a753509201-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56a753509201-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56a753509201-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56a753509201-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56a753509201-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56a753509201-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56a753509201-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56a753509201-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56a753509201-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56a753509201-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56a753509201-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56a753509201-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cond</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56a753509201-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56a753509201-3\"><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">STORE</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56a753509201-4\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56a753509201-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">                </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56a753509201-6\"><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56a753509201-7\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMPARE</span><span class=\"crayon-sy\">_</span>OP<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56a753509201-8\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">POP_JUMP_IF</span><span class=\"crayon-sy\">_</span>FALSE<span class=\"crayon-h\">       </span><span class=\"crayon-cn\">22</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56a753509201-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56a753509201-10\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56a753509201-11\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RETURN</span><span class=\"crayon-sy\">_</span>VALUE</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56a753509201-12\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56a753509201-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'no'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56a753509201-14\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RETURN</span><span class=\"crayon-sy\">_</span>VALUE</div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56a753509201-15\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56a753509201-16\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">29</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RETURN_VALUE</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0049 seconds] -->\r\n<p>第三行的条件表达式<code>if x &lt; 5</code>被编译成四条指令：<code>LOAD_FAST</code>, <code>LOAD_CONST</code>, <code>COMPARE_OP</code>和 <code>POP_JUMP_IF_FALSE</code>。<code>x &lt; 5</code>对应加载<code>x</code>，加载5，比较这两个值。指令<code>POP_JUMP_IF_FALSE</code>完成<code>if</code>语句。这条指令把栈顶的值弹出，如果值为真，什么都不发生。如果值为假，解释器会跳转到另一条指令。</p>\n<p>这条将被加载的指令称为跳转目标，它作为指令<code>POP_JUMP</code>的参数。这里，跳转目标是22，索引为22的指令是<code>LOAD_CONST</code>,对应源码的第6行。（<code>dis</code>用<code>&gt;&gt;</code>标记跳转目标。）如果<code>X &lt; 5</code>为假，解释器会忽略第四行（<code>return yes</code>）,直接跳转到第6行（<code>return \"no\"</code>）。因此解释器通过跳转指令选择性的执行指令。</p>\n<p>Python的循环也依赖于跳转。在下面的字节码中，<code>while x &lt; 5</code>这一行产生了和<code>if x &lt; 10</code>几乎一样的字节码。在这两种情况下，解释器都是先执行比较，然后执行<code>POP_JUMP_IF_FALSE</code>来控制下一条执行哪个指令。第四行的最后一条字节码<code>JUMP_ABSOLUT</code>(循环体结束的地方），让解释器返回到循环开始的第9条指令处。当 <code>x &lt; 10</code>变为假，<code>POP_JUMP_IF_FALSE</code>会让解释器跳到循环的终止处，第34条指令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b56e720501059\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; def loop():\r\n...      x = 1\r\n...      while x &lt; 5:\r\n...          x = x + 1\r\n...      return x\r\n...\r\n&gt;&gt;&gt; dis.dis(loop)\r\n  2           0 LOAD_CONST               1 (1)\r\n              3 STORE_FAST               0 (x)\r\n\r\n  3           6 SETUP_LOOP              26 (to 35)\r\n        &gt;&gt;    9 LOAD_FAST                0 (x)\r\n             12 LOAD_CONST               2 (5)\r\n             15 COMPARE_OP               0 (&lt;)\r\n             18 POP_JUMP_IF_FALSE       34\r\n\r\n  4          21 LOAD_FAST                0 (x)\r\n             24 LOAD_CONST               1 (1)\r\n             27 BINARY_ADD\r\n             28 STORE_FAST               0 (x)\r\n             31 JUMP_ABSOLUTE            9\r\n        &gt;&gt;   34 POP_BLOCK\r\n\r\n  5     &gt;&gt;   35 LOAD_FAST                0 (x)\r\n             38 RETURN_VALUE</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b56e720501059-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b56e720501059-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">      </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">          </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">      </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">loop</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-9\"><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">STORE</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SETUP</span><span class=\"crayon-sy\">_</span>LOOP<span class=\"crayon-h\">              </span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">35</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">                </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-13\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-14\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">COMPARE</span><span class=\"crayon-sy\">_</span>OP<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-15\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">POP_JUMP_IF</span><span class=\"crayon-sy\">_</span>FALSE<span class=\"crayon-h\">       </span><span class=\"crayon-cn\">34</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-16\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-17\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">          </span><span class=\"crayon-cn\">21</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">                </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-18\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>CONST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-19\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">27</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BINARY</span><span class=\"crayon-sy\">_</span>ADD</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-20\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">STORE</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">               </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-21\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">31</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">JUMP</span><span class=\"crayon-sy\">_</span>ABSOLUTE<span class=\"crayon-h\">            </span><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">POP</span><span class=\"crayon-sy\">_</span>BLOCK</div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b56e720501059-24\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\">     </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">35</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">                </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b56e720501059-25\"><span class=\"crayon-h\">             </span><span class=\"crayon-cn\">38</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RETURN_VALUE</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0071 seconds] -->\r\n<p></p>\n<h3>Explore Bytecode</h3>\n<p>我鼓励你用<code>dis.dis</code>来试试你自己写的函数。一些有趣的问题值得探索：</p>\n<ul>\n<li>对解释器而言for循环和while循环有什么不同？</li>\n<li>能不能写出两个不同函数，却能产生相同的字节码?</li>\n<li><code>elif</code>是怎么工作的？列表推导呢？</li>\n</ul>\n<h2><a id=\"frames\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#frames\"></a>Frames</h2>\n<p>到目前为止，我们已经知道了Python虚拟机是一个栈机器。它能顺序执行指令，在指令间跳转，压入或弹出栈值。但是这和我们心想的解释器还有一定距离。在前面的那个例子中，最后一条指令是<code>RETURN_VALUE</code>,它和<code>return</code>语句想对应。但是它返回到哪里去呢？</p>\n<p>为了回答这个问题，我们必须严增加一层复杂性：frame。一个frame是一些信息的集合和代码的执行上下文。frames在Python代码执行时动态的创建和销毁。每个frame对应函数的一次调用。— 所以每个frame只有一个code object与之关联，而一个code object可以很多frame。比如你有一个函数递归的调用自己10次，这时有11个frame。总的来说，Python程序的每个作用域有一个frame，比如，每个module，每个函数调用，每个类定义。</p>\n<p>Frame存在于<em>调用栈</em>中，一个和我们之前讨论的完全不同的栈。（你最熟悉的栈就是调用栈，就是你经常看到的异常回溯，每个以”File ‘program.py'”开始的回溯对应一个frame。）解释器在执行字节码时操作的栈，我们叫它<em>数据栈</em>。其实还有第三个栈，叫做<em>块栈</em>，用于特定的控制流块，比如循环和异常处理。调用栈中的每个frame都有它自己的数据栈和块栈。</p>\n<p>让我们用一个具体的例子来说明。假设Python解释器执行到标记为3的地方。解释器正在<code>foo</code>函数的调用中，它接着调用<code>bar</code>。下面是frame调用栈，块栈和数据栈的示意图。我们感兴趣的是解释器先从最底下的<code>foo()</code>开始，接着执行<code>foo</code>的函数体，然后到达<code>bar</code>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b573100811476\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; def bar(y):\r\n...     z = y + 3     # &lt;--- (3) ... and the interpreter is here.\r\n...     return z\r\n...\r\n&gt;&gt;&gt; def foo():\r\n...     a = 1\r\n...     b = 2\r\n...     return a + bar(b) # &lt;--- (2) ... which is returning a call to bar ...\r\n...\r\n&gt;&gt;&gt; foo()             # &lt;--- (1) We're in the middle of a call to foo ...\r\n3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b573100811476-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b573100811476-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b573100811476-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b573100811476-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b573100811476-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b573100811476-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b573100811476-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b573100811476-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b573100811476-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b573100811476-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b573100811476-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b573100811476-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b573100811476-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">     </span><span class=\"crayon-c\"># &lt;--- (3) ... and the interpreter is here.</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b573100811476-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">z</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b573100811476-4\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b573100811476-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b573100811476-6\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b573100811476-7\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b573100811476-8\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">     </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\"># &lt;--- (2) ... which is returning a call to bar ...</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b573100811476-9\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b573100811476-10\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">             </span><span class=\"crayon-c\"># &lt;--- (1) We're in the middle of a call to foo ...</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b573100811476-11\"><span class=\"crayon-cn\">3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fq9s08ry48j20qo0au75w.jpg\"></p>\n<p>现在，解释器在<code>bar</code>函数的调用中。调用栈中有3个fram：一个对应于module层，一个对应函数<code>foo</code>,别一个对应函数<code>bar</code>。(<a href=\"http://qingyunha.github.io/taotao/#figure-1.2\">Figure 1.2</a>)一旦<code>bar</code>返回，与它对应的frame就会从调用栈中弹出并丢弃。</p>\n<p>字节码指令<code>RETURN_VALUE</code>告诉解释器在frame间传递一个值。首先，它把位于调用栈栈顶的frame中的数据栈的栈顶值弹出。然后把整个frame弹出丢弃。最后把这个值压到下一个frame的数据栈中。</p>\n<p>当Ned Batchelder和我在写Byterun时，很长一段时间我们的实现中一直有个重大的错误。我们整个虚拟机中只有一个数据栈，而不是每个frame都有个一个。我们做了很多测试，同时在Byterun和真正的Python上，为了保证结果一致。我们几乎通过了所有测试，只有一样东西不能通过，那就是生成器。最后，通过仔细的阅读Cpython的源码，我们发现了错误所在。把数据栈移到每个frame就解决了这个问题。</p>\n<p>回头在看看这个bug，我惊讶的发现Python真的很少依赖于每个frame有一个数据栈这个特性。在Python中几乎所有的操作都会清空数据栈，所以所有的frame公用一个数据栈是没问题的。在上面的例子中，当<code>bar</code>执行完后，它的数据栈为空。即使<code>foo</code>公用这一个栈，它的值也不会受影响。然而，对应生成器，一个关键的特点是它能暂停一个frame的执行，返回到其他的frame，一段时间后它能返回到原来的frame，并以它离开时的同样的状态继续执行。</p>\n<h2><a id=\"byterun\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#byterun\"></a>Byterun</h2>\n<p>现在我们有足够的Python解释器的知识背景去考察Byterun。</p>\n<p>Byterun中有四种对象。</p>\n<ul>\n<li><code>VirtualMachine</code>类，它管理高层结构，frame调用栈，指令到操作的映射。这是一个比前面<code>Inteprter</code>对象更复杂的版本。</li>\n<li><code>Frame</code>类，每个<code>Frame</code>类都有一个code object，并且管理者其他一些必要的状态信息，全局和局部命名空间，指向调用它的frame的指针和最后执行的字节码指令。</li>\n<li><code>Function</code>类，它被用来代替真正的Python函数。回想一下，调用函数时会创建一个新的frame。我们自己实现<code>Function</code>，所以我们控制新frame的创建。</li>\n<li><code>Block</code>类，它只是包装了代码块的3个属性。（代码块的细节不是解释器的核心，我们不会花时间在它身上，把它列在这里，是因为Byterun需要它。）</li>\n</ul>\n<h3><a id=\"the-virtualmachine-class\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#the-virtualmachine-class\"></a>The <code>VirtualMachine</code> Class</h3>\n<p>程序运行时只有一个<code>VirtualMachine</code>被创建，因为我们只有一个解释器。<code>VirtualMachine</code>保存调用栈，异常状态，在frame中传递的返回值。它的入口点是<code>run_code</code>方法，它以编译后的code object为参数，以创建一个frame为开始，然后运行这个frame。这个frame可能再创建出新的frame；调用栈随着程序的运行增长缩短。当第一个frame返回时，执行结束。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b578620194593\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass VirtualMachineError(Exception):\r\n    pass\r\n\r\nclass VirtualMachine(object):\r\n    def __init__(self):\r\n        self.frames = []   # The call stack of frames.\r\n        self.frame = None  # The current frame.\r\n        self.return_value = None\r\n        self.last_exception = None\r\n\r\n    def run_code(self, code, global_names=None, local_names=None):\r\n        \"\"\" An entry point to execute code using the virtual machine.\"\"\"\r\n        frame = self.make_frame(code, global_names=global_names, \r\n                                local_names=local_names)\r\n        self.run_frame(frame)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b578620194593-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b578620194593-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b578620194593-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b578620194593-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b578620194593-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b578620194593-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b578620194593-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b578620194593-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b578620194593-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b578620194593-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b578620194593-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b578620194593-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b578620194593-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b578620194593-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b578620194593-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b578620194593-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachineError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">Exception</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b578620194593-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">pass</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b578620194593-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b578620194593-4\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachine</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b578620194593-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b578620194593-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frames</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\"># The call stack of frames.</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b578620194593-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># The current frame.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b578620194593-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">return_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b578620194593-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b578620194593-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b578620194593-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run_code</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">global_names</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b578620194593-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\" An entry point to execute code using the virtual machine.\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b578620194593-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">make_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">global_names</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">global_names</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b578620194593-14\"><span class=\"crayon-h\">                                </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">local_names</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b578620194593-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p></p>\n<h3>The <code>Frame</code> Class</h3>\n<p>接下来，我们来写<code>Frame</code>对象。frame是一个属性的集合，它没有任何方法。前面提到过，这些属性包括由编译器生成的code object；局部，全局和内置命名空间；前一个frame的引用；一个数据栈；一个块栈；最后执行的指令。（对于内置命名空间我们需要多做一点工作，Python对待这个命名空间不同；但这个细节对我们的虚拟机不重要。）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b57c109575357\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Frame(object):\r\n    def __init__(self, code_obj, global_names, local_names, prev_frame):\r\n        self.code_obj = code_obj\r\n        self.global_names = global_names\r\n        self.local_names = local_names\r\n        self.prev_frame = prev_frame\r\n        self.stack = []\r\n        if prev_frame:\r\n            self.builtin_names = prev_frame.builtin_names\r\n        else:\r\n            self.builtin_names = local_names['__builtins__']\r\n            if hasattr(self.builtin_names, '__dict__'):\r\n                self.builtin_names = self.builtin_names.__dict__\r\n\r\n        self.last_instruction = 0\r\n        self.block_stack = []</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b57c109575357-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b57c109575357-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b57c109575357-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b57c109575357-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b57c109575357-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b57c109575357-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b57c109575357-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b57c109575357-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b57c109575357-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b57c109575357-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b57c109575357-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b57c109575357-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b57c109575357-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b57c109575357-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b57c109575357-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b57c109575357-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b57c109575357-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b57c109575357-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">code_obj</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">global_names</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prev_frame</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b57c109575357-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">code_obj</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">code_obj</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b57c109575357-4\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">global_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">global_names</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b57c109575357-5\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">local_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">local_names</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b57c109575357-6\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prev_frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">prev_frame</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b57c109575357-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b57c109575357-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prev_frame</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b57c109575357-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">builtin_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">prev_frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">builtin_names</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b57c109575357-10\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b57c109575357-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">builtin_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'__builtins__'</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b57c109575357-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">hasattr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">builtin_names</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__dict__'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b57c109575357-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">builtin_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">builtin_names</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">__dict__</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b57c109575357-14\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b57c109575357-15\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b57c109575357-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">block_stack</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p>接着，我们在虚拟机中增加对frame的操作。这有3个帮助函数：一个创建新的frame的方法，和压栈和出栈的方法。第四个函数，<code>run_frame</code>,完成执行frame的主要工作，待会我们再讨论这个方法。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b580663013846\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass VirtualMachine(object):\r\n    [... snip ...]\r\n\r\n    # Frame manipulation\r\n    def make_frame(self, code, callargs={}, global_names=None, local_names=None):\r\n        if global_names is not None and local_names is not None:\r\n            local_names = global_names\r\n        elif self.frames:\r\n            global_names = self.frame.global_names\r\n            local_names = {}\r\n        else:\r\n            global_names = local_names = {\r\n                '__builtins__': __builtins__,\r\n                '__name__': '__main__',\r\n                '__doc__': None,\r\n                '__package__': None,\r\n            }\r\n        local_names.update(callargs)\r\n        frame = Frame(code, global_names, local_names, self.frame)\r\n        return frame\r\n\r\n    def push_frame(self, frame):\r\n        self.frames.append(frame)\r\n        self.frame = frame\r\n\r\n    def pop_frame(self):\r\n        self.frames.pop()\r\n        if self.frames:\r\n            self.frame = self.frames[-1]\r\n        else:\r\n            self.frame = None\r\n\r\n    def run_frame(self):\r\n        pass\r\n        # we'll come back to this shortly</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b580663013846-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b580663013846-35\">35</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachine</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">snip</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># Frame manipulation</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">make_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">callargs</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">global_names</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">global_names </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">local_names </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">global_names</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-8\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frames</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">global_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">global_names</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-10\"><span class=\"crayon-e\">            </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">global_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">'__builtins__'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__builtins__</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">'__name__'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__main__'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">'__doc__'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">'__package__'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">update</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">callargs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">global_names</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">local_names</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">frame</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-22\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">push_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frames</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">frame</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-26\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pop_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frames</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frames</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frames</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-32\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b580663013846-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">pass</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b580663013846-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># we'll come back to this shortly</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0067 seconds] -->\r\n<p></p>\n<h3>The <code>Function</code> Class</h3>\n<p><code>Function</code>的实现有点扭曲，但是大部分的细节对理解解释器不重要。重要的是当调用函数时 — <code>__call__</code>方法被调用 — 它创建一个新的<code>Frame</code>并运行它。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b584800693907\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Function(object):\r\n    \"\"\"\r\n    Create a realistic function object, defining the things the interpreter expects.\r\n    \"\"\"\r\n    __slots__ = [\r\n        'func_code', 'func_name', 'func_defaults', 'func_globals',\r\n        'func_locals', 'func_dict', 'func_closure',\r\n        '__name__', '__dict__', '__doc__',\r\n        '_vm', '_func',\r\n    ]\r\n\r\n    def __init__(self, name, code, globs, defaults, closure, vm):\r\n        \"\"\"You don't need to follow this closely to understand the interpreter.\"\"\"\r\n        self._vm = vm\r\n        self.func_code = code\r\n        self.func_name = self.__name__ = name or code.co_name\r\n        self.func_defaults = tuple(defaults)\r\n        self.func_globals = globs\r\n        self.func_locals = self._vm.frame.f_locals\r\n        self.__dict__ = {}\r\n        self.func_closure = closure\r\n        self.__doc__ = code.co_consts[0] if code.co_consts else None\r\n\r\n        # Sometimes, we need a real Python function.  This is for that.\r\n        kw = {\r\n            'argdefs': self.func_defaults,\r\n        }\r\n        if closure:\r\n            kw['closure'] = tuple(make_cell(0) for _ in closure)\r\n        self._func = types.FunctionType(code, globs, **kw)\r\n\r\n    def __call__(self, *args, **kwargs):\r\n        \"\"\"When calling a Function, make a new frame and run it.\"\"\"\r\n        callargs = inspect.getcallargs(self._func, *args, **kwargs)\r\n        # Use callargs to provide a mapping of arguments: values to pass into the new \r\n        # frame.\r\n        frame = self._vm.make_frame(\r\n            self.func_code, callargs, self.func_globals, {}\r\n        )\r\n        return self._vm.run_frame(frame)\r\n\r\ndef make_cell(value):\r\n    \"\"\"Create a real Python closure and grab a cell.\"\"\"\r\n    # Thanks to Alex Gaynor for help with this bit of twistiness.\r\n    fn = (lambda x: lambda: x)(value)\r\n    return fn.__closure__[0]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b584800693907-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b584800693907-46\">46</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-3\"><span class=\"crayon-s\">    Create a realistic function object, defining the things the interpreter expects.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-4\"><span class=\"crayon-s\">    \"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">__slots__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'func_code'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'func_name'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'func_defaults'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'func_globals'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'func_locals'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'func_dict'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'func_closure'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'__name__'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__dict__'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'__doc__'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'_vm'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'_func'</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">globs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">defaults</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">closure</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vm</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"You don't need to follow this closely to understand the interpreter.\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_vm</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vm</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-15\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">co_name</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-17\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_defaults</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">tuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">defaults</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_globals</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">globs</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-19\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_locals</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">f_locals</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-20\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__dict__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_closure</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">closure</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-22\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__doc__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co_consts</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">co_consts </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># Sometimes, we need a real Python function.  This is for that.</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">kw</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-s\">'argdefs'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_defaults</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">closure</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-29\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">kw</span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'closure'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">tuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">make_cell</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">_</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">closure</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">types</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">FunctionType</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">globs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kw</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__call__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"When calling a Function, make a new frame and run it.\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">callargs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">inspect</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getcallargs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_func</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># Use callargs to provide a mapping of arguments: values to pass into the new </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># frame.</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">make_frame</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-38\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">callargs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">func_globals</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">_vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">run_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-41\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-42\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">make_cell</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"Create a real Python closure and grab a cell.\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-44\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># Thanks to Alex Gaynor for help with this bit of twistiness.</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b584800693907-45\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">lambda</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b584800693907-46\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fn</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__closure__</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0094 seconds] -->\r\n<p>接着，回到<code>VirtualMachine</code>对象，我们对数据栈的操作也增加一些帮助方法。字节码操作的栈总是在当前frame的数据栈。这让我们能完成<code>POP_TOP</code>,<code>LOAD_FAST</code>,并且让其他操作栈的指令可读性更高。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b589546000886\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass VirtualMachine(object):\r\n    [... snip ...]\r\n\r\n    # Data stack manipulation\r\n    def top(self):\r\n        return self.frame.stack[-1]\r\n\r\n    def pop(self):\r\n        return self.frame.stack.pop()\r\n\r\n    def push(self, *vals):\r\n        self.frame.stack.extend(vals)\r\n\r\n    def popn(self, n):\r\n        \"\"\"Pop a number of values from the value stack.\r\n        A list of `n` values is returned, the deepest value first.\r\n        \"\"\"\r\n        if n:\r\n            ret = self.frame.stack[-n:]\r\n            self.frame.stack[-n:] = []\r\n            return ret\r\n        else:\r\n            return []</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b589546000886-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b589546000886-23\">23</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachine</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">snip</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># Data stack manipulation</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">top</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">vals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">extend</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">vals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"Pop a number of values from the value stack.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-16\"><span class=\"crayon-s\">        A list of `n` values is returned, the deepest value first.</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-17\"><span class=\"crayon-s\">        \"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">ret</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ret</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b589546000886-22\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b589546000886-23\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p>在我们运行frame之前，我们还需两个方法。</p>\n<p>第一个方法，<code>parse_byte_and_args</code>,以一个字节码为输入，先检查它是否有参数，如果有，就解析它的参数。这个方法同时也更新frame的<code>last_instruction</code>属性，它指向最后执行的指令。一条没有参数的指令只有一个字节长度，而有参数的字节有3个字节长。参数的意义依赖于指令是什么。比如，前面说过，指令<code>POP_JUMP_IF_FALSE</code>,它的参数指的是跳转目标。<code>BUILD_LIST</code>, 它的参数是列表的个数。<code>LOAD_CONST</code>,它的参数是常量的索引。</p>\n<p>一些指令用简单的数字作为参数。对于另一些，虚拟机需要一点努力去发现它意义。标准库中的<code>dis</code>module中有一个备忘单解释什么参数有什么意思，这让我们的代码更加简洁。比如，列表<code>dis.hasname</code>告诉我们<code>LOAD_NAME</code>, <code>IMPORT_NAME</code>,<code>LOAD_GLOBAL</code>,和另外的9个指令都有同样的意思：名字列表的索引。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b58d472144097\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass VirtualMachine(object):\r\n    [... snip ...]\r\n\r\n    def parse_byte_and_args(self):\r\n        f = self.frame\r\n        opoffset = f.last_instruction\r\n        byteCode = f.code_obj.co_code[opoffset]\r\n        f.last_instruction += 1\r\n        byte_name = dis.opname[byteCode]\r\n        if byteCode &gt;= dis.HAVE_ARGUMENT:\r\n            # index into the bytecode\r\n            arg = f.code_obj.co_code[f.last_instruction:f.last_instruction+2]  \r\n            f.last_instruction += 2   # advance the instruction pointer\r\n            arg_val = arg[0] + (arg[1] * 256)\r\n            if byteCode in dis.hasconst:   # Look up a constant\r\n                arg = f.code_obj.co_consts[arg_val]\r\n            elif byteCode in dis.hasname:  # Look up a name\r\n                arg = f.code_obj.co_names[arg_val]\r\n            elif byteCode in dis.haslocal: # Look up a local name\r\n                arg = f.code_obj.co_varnames[arg_val]\r\n            elif byteCode in dis.hasjrel:  # Calculate a relative jump\r\n                arg = f.last_instruction + arg_val\r\n            else:\r\n                arg = arg_val\r\n            argument = [arg]\r\n        else:\r\n            argument = []\r\n\r\n        return byte_name, argument</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b58d472144097-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b58d472144097-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachine</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">snip</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parse_byte_and_args</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">frame</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-6\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">opoffset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">last_instruction</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">byteCode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">code_obj</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co_code</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">opoffset</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">opname</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">byteCode</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byteCode</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HAVE_ARGUMENT</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\"># index into the bytecode</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">code_obj</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co_code</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_instruction</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_instruction</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\"># advance the instruction pointer</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">arg_val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byteCode </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hasconst</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-c\"># Look up a constant</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">code_obj</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co_consts</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arg_val</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byteCode </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hasname</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># Look up a name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-18\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">code_obj</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co_names</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arg_val</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byteCode </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">haslocal</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\"># Look up a local name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-20\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">code_obj</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co_varnames</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arg_val</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-21\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byteCode </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">hasjrel</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-c\"># Calculate a relative jump</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-22\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_instruction</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">arg_val</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-23\"><span class=\"crayon-e\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-24\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">arg_val</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-25\"><span class=\"crayon-e\">            </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">argument</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b58d472144097-28\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b58d472144097-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argument</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0072 seconds] -->\r\n<p>下一个方法是<code>dispatch</code>,它查看给定的指令并执行相应的操作。在CPython中，这个分派函数用一个巨大的switch语句完成，有超过1500行的代码。幸运的是，我们用的是Python，我们的代码会简洁的多。我们会为每一个字节码名字定义一个方法，然后用<code>getattr</code>来查找。就像我们前面的小解释器一样，如果一条指令叫做<code>FOO_BAR</code>，那么它对应的方法就是<code>byte_FOO_BAR</code>。现在，我们先把这些方法当做一个黑盒子。每个指令方法都会返回<code>None</code>或者一个字符串<code>why</code>,有些情况下虚拟机需要这个额外<code>why</code>信息。这些指令方法的返回值，仅作为解释器状态的内部指示，千万不要和执行frame的返回值相混淆。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b592566315481\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass VirtualMachine(object):\r\n    [... snip ...]\r\n\r\n    def dispatch(self, byte_name, argument):\r\n        \"\"\" Dispatch by bytename to the corresponding methods.\r\n        Exceptions are caught and set on the virtual machine.\"\"\"\r\n\r\n        # When later unwinding the block stack,\r\n        # we need to keep track of why we are doing it.\r\n        why = None\r\n        try:\r\n            bytecode_fn = getattr(self, 'byte_%s' % byte_name, None)\r\n            if bytecode_fn is None:\r\n                if byte_name.startswith('UNARY_'):\r\n                    self.unaryOperator(byte_name[6:])\r\n                elif byte_name.startswith('BINARY_'):\r\n                    self.binaryOperator(byte_name[7:])\r\n                else:\r\n                    raise VirtualMachineError(\r\n                        \"unsupported bytecode type: %s\" % byte_name\r\n                    )\r\n            else:\r\n                why = bytecode_fn(*argument)\r\n        except:\r\n            # deal with exceptions encountered while executing the op.\r\n            self.last_exception = sys.exc_info()[:2] + (None,)\r\n            why = 'exception'\r\n\r\n        return why\r\n\r\n    def run_frame(self, frame):\r\n        \"\"\"Run a frame until it returns (somehow).\r\n        Exceptions are raised, the return value is returned.\r\n        \"\"\"\r\n        self.push_frame(frame)\r\n        while True:\r\n            byte_name, arguments = self.parse_byte_and_args()\r\n\r\n            why = self.dispatch(byte_name, arguments)\r\n\r\n            # Deal with any block management we need to do\r\n            while why and frame.block_stack:\r\n                why = self.manage_block_stack(why)\r\n\r\n            if why:\r\n                break\r\n\r\n        self.pop_frame()\r\n\r\n        if why == 'exception':\r\n            exc, val, tb = self.last_exception\r\n            e = exc(val)\r\n            e.__traceback__ = tb\r\n            raise e\r\n\r\n        return self.return_value</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b592566315481-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b592566315481-56\">56</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachine</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">snip</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dispatch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\" Dispatch by bytename to the corresponding methods.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-6\"><span class=\"crayon-s\">        Exceptions are caught and set on the virtual machine.\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># When later unwinding the block stack,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># we need to keep track of why we are doing it.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">bytecode_fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">getattr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'byte_%s'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytecode_fn </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">startswith</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'UNARY_'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-15\"><span class=\"crayon-h\">                    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unaryOperator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">startswith</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'BINARY_'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-17\"><span class=\"crayon-h\">                    </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">binaryOperator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">7</span><span class=\"crayon-o\">:</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-18\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-19\"><span class=\"crayon-h\">                    </span><span class=\"crayon-st\">raise</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachineError</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-20\"><span class=\"crayon-h\">                        </span><span class=\"crayon-s\">\"unsupported bytecode type: %s\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">byte</span><span class=\"crayon-sy\">_</span>name</div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-21\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-23\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bytecode_fn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">argument</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">except</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\"># deal with exceptions encountered while executing the op.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">sys</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">exc_info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'exception'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-28\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">why</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-30\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-31\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">run_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"Run a frame until it returns (somehow).</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-33\"><span class=\"crayon-s\">        Exceptions are raised, the return value is returned.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-34\"><span class=\"crayon-s\">        \"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-37\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parse_byte_and_args</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-38\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-39\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">dispatch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">byte_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arguments</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-40\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-41\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\"># Deal with any block management we need to do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">why </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">block_stack</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-43\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">manage_block_stack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">why</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-44\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">why</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-46\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">break</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-47\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop_frame</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-49\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-50\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'exception'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-51\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">exc</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">_</span>exception</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-52\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-53\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__traceback__</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tb</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-54\"><span class=\"crayon-e\">            </span><span class=\"crayon-st\">raise</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">e</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b592566315481-55\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b592566315481-56\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">return_value</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0088 seconds] -->\r\n<p></p>\n<h3>The <code>Block</code> Class</h3>\n<p>在我们完成每个字节码方法前，我们简单的讨论一下块。一个块被用于某种控制流，特别是异常处理和循环。它负责保证当操作完成后数据栈处于正确的状态。比如，在一个循环中，一个特殊的迭代器会存在栈中，当循环完成时它从栈中弹出。解释器需要检查循环仍在继续还是已经停止。</p>\n<p>为了跟踪这些额外的信息，解释器设置了一个标志来指示它的状态。我们用一个变量<code>why</code>实现这个标志，它可以<code>None</code>或者是下面几个字符串这一，<code>\"continue\"</code>, <code>\"break\"</code>,<code>\"excption\"</code>,<code>return</code>。他们指示对块栈和数据栈进行什么操作。回到我们迭代器的例子，如果块栈的栈顶是一个<code>loop</code>块，<code>why</code>是<code>continue</code>,迭代器就因该保存在数据栈上，不是如果<code>why</code>是<code>break</code>,迭代器就会被弹出。</p>\n<p>块操作的细节比较精密，我们不会花时间在这上面，但是有兴趣的读者值得仔细的看看。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b598445361219\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nBlock = collections.namedtuple(\"Block\", \"type, handler, stack_height\")\r\n\r\nclass VirtualMachine(object):\r\n    [... snip ...]\r\n\r\n    # Block stack manipulation\r\n    def push_block(self, b_type, handler=None):\r\n        level = len(self.frame.stack)\r\n        self.frame.block_stack.append(Block(b_type, handler, stack_height))\r\n\r\n    def pop_block(self):\r\n        return self.frame.block_stack.pop()\r\n\r\n    def unwind_block(self, block):\r\n        \"\"\"Unwind the values on the data stack corresponding to a given block.\"\"\"\r\n        if block.type == 'except-handler':\r\n            # The exception itself is on the stack as type, value, and traceback.\r\n            offset = 3  \r\n        else:\r\n            offset = 0\r\n\r\n        while len(self.frame.stack) &gt; block.level + offset:\r\n            self.pop()\r\n\r\n        if block.type == 'except-handler':\r\n            traceback, value, exctype = self.popn(3)\r\n            self.last_exception = exctype, value, traceback\r\n\r\n    def manage_block_stack(self, why):\r\n        \"\"\" \"\"\"\r\n        frame = self.frame\r\n        block = frame.block_stack[-1]\r\n        if block.type == 'loop' and why == 'continue':\r\n            self.jump(self.return_value)\r\n            why = None\r\n            return why\r\n\r\n        self.pop_block()\r\n        self.unwind_block(block)\r\n\r\n        if block.type == 'loop' and why == 'break':\r\n            why = None\r\n            self.jump(block.handler)\r\n            return why\r\n\r\n        if (block.type in ['setup-except', 'finally'] and why == 'exception'):\r\n            self.push_block('except-handler')\r\n            exctype, value, tb = self.last_exception\r\n            self.push(tb, value, exctype)\r\n            self.push(tb, value, exctype) # yes, twice\r\n            why = None\r\n            self.jump(block.handler)\r\n            return why\r\n\r\n        elif block.type == 'finally':\r\n            if why in ('return', 'continue'):\r\n                self.push(self.return_value)\r\n\r\n            self.push(why)\r\n\r\n            why = None\r\n            self.jump(block.handler)\r\n            return why\r\n        return why</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b598445361219-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b598445361219-64\">64</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-1\"><span class=\"crayon-v\">Block</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">collections</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">namedtuple</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Block\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"type, handler, stack_height\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-2\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-3\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachine</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">snip</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># Block stack manipulation</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">push_block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b_type</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">handler</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">level</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">block_stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b_type</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stack_height</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-10\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pop_block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">block_stack</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">unwind_block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\"Unwind the values on the data stack corresponding to a given block.\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'except-handler'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\"># The exception itself is on the stack as type, value, and traceback.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">offset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">offset</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">len</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">level</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">offset</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-23\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-24\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'except-handler'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-26\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">traceback</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">exctype</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">last_exception</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">exctype</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">traceback</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-28\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">manage_block_stack</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">why</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"\"\" \"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">frame</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-32\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">block</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">block_stack</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'loop'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'continue'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">return_value</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-35\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-36\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">why</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-37\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-38\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop_block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-39\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">unwind_block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-40\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'loop'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'break'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-42\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-43\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-44\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">why</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-45\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-46\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'setup-except'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'finally'</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'exception'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push_block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'except-handler'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-48\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">exctype</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">last_exception</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-49\"><span class=\"crayon-e\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tb</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">exctype</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-50\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">tb</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">exctype</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\"># yes, twice</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-51\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-52\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-53\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">why</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-54\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-55\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'finally'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-56\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">why </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'return'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'continue'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-57\"><span class=\"crayon-h\">                </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">return_value</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-58\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-59\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">why</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-60\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-61\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">why</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-62\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">block</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">handler</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b598445361219-63\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">why</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b598445361219-64\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">why</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0123 seconds] -->\r\n<p></p>\n<h2>The Instructions</h2>\n<p>剩下了的就是完成那些指令方法了：<code>byte_LOAD_FAST</code>,<code>byte_BINARY_MODULO</code>等等。而这些指令的实现并不是很有趣，这里我们只展示了一小部分，完整的实现在<a href=\"https://github.com/nedbat/byterun\">这儿</a>（足够执行我们前面所述的所有代码了。）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b59c345276428\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass VirtualMachine(object):\r\n    [... snip ...]\r\n\r\n    ## Stack manipulation\r\n\r\n    def byte_LOAD_CONST(self, const):\r\n        self.push(const)\r\n\r\n    def byte_POP_TOP(self):\r\n        self.pop()\r\n\r\n    ## Names\r\n    def byte_LOAD_NAME(self, name):\r\n        frame = self.frame\r\n        if name in frame.f_locals:\r\n            val = frame.f_locals[name]\r\n        elif name in frame.f_globals:\r\n            val = frame.f_globals[name]\r\n        elif name in frame.f_builtins:\r\n            val = frame.f_builtins[name]\r\n        else:\r\n            raise NameError(\"name '%s' is not defined\" % name)\r\n        self.push(val)\r\n\r\n    def byte_STORE_NAME(self, name):\r\n        self.frame.f_locals[name] = self.pop()\r\n\r\n    def byte_LOAD_FAST(self, name):\r\n        if name in self.frame.f_locals:\r\n            val = self.frame.f_locals[name]\r\n        else:\r\n            raise UnboundLocalError(\r\n                \"local variable '%s' referenced before assignment\" % name\r\n            )\r\n        self.push(val)\r\n\r\n    def byte_STORE_FAST(self, name):\r\n        self.frame.f_locals[name] = self.pop()\r\n\r\n    def byte_LOAD_GLOBAL(self, name):\r\n        f = self.frame\r\n        if name in f.f_globals:\r\n            val = f.f_globals[name]\r\n        elif name in f.f_builtins:\r\n            val = f.f_builtins[name]\r\n        else:\r\n            raise NameError(\"global name '%s' is not defined\" % name)\r\n        self.push(val)\r\n\r\n    ## Operators\r\n\r\n    BINARY_OPERATORS = {\r\n        'POWER':    pow,\r\n        'MULTIPLY': operator.mul,\r\n        'FLOOR_DIVIDE': operator.floordiv,\r\n        'TRUE_DIVIDE':  operator.truediv,\r\n        'MODULO':   operator.mod,\r\n        'ADD':      operator.add,\r\n        'SUBTRACT': operator.sub,\r\n        'SUBSCR':   operator.getitem,\r\n        'LSHIFT':   operator.lshift,\r\n        'RSHIFT':   operator.rshift,\r\n        'AND':      operator.and_,\r\n        'XOR':      operator.xor,\r\n        'OR':       operator.or_,\r\n    }\r\n\r\n    def binaryOperator(self, op):\r\n        x, y = self.popn(2)\r\n        self.push(self.BINARY_OPERATORS[op](x, y))\r\n\r\n    COMPARE_OPERATORS = [\r\n        operator.lt,\r\n        operator.le,\r\n        operator.eq,\r\n        operator.ne,\r\n        operator.gt,\r\n        operator.ge,\r\n        lambda x, y: x in y,\r\n        lambda x, y: x not in y,\r\n        lambda x, y: x is y,\r\n        lambda x, y: x is not y,\r\n        lambda x, y: issubclass(x, Exception) and issubclass(x, y),\r\n    ]\r\n\r\n    def byte_COMPARE_OP(self, opnum):\r\n        x, y = self.popn(2)\r\n        self.push(self.COMPARE_OPERATORS[opnum](x, y))\r\n\r\n    ## Attributes and indexing\r\n\r\n    def byte_LOAD_ATTR(self, attr):\r\n        obj = self.pop()\r\n        val = getattr(obj, attr)\r\n        self.push(val)\r\n\r\n    def byte_STORE_ATTR(self, name):\r\n        val, obj = self.popn(2)\r\n        setattr(obj, name, val)\r\n\r\n    ## Building\r\n\r\n    def byte_BUILD_LIST(self, count):\r\n        elts = self.popn(count)\r\n        self.push(elts)\r\n\r\n    def byte_BUILD_MAP(self, size):\r\n        self.push({})\r\n\r\n    def byte_STORE_MAP(self):\r\n        the_map, val, key = self.popn(3)\r\n        the_map[key] = val\r\n        self.push(the_map)\r\n\r\n    def byte_LIST_APPEND(self, count):\r\n        val = self.pop()\r\n        the_list = self.frame.stack[-count] # peek\r\n        the_list.append(val)\r\n\r\n    ## Jumps\r\n\r\n    def byte_JUMP_FORWARD(self, jump):\r\n        self.jump(jump)\r\n\r\n    def byte_JUMP_ABSOLUTE(self, jump):\r\n        self.jump(jump)\r\n\r\n    def byte_POP_JUMP_IF_TRUE(self, jump):\r\n        val = self.pop()\r\n        if val:\r\n            self.jump(jump)\r\n\r\n    def byte_POP_JUMP_IF_FALSE(self, jump):\r\n        val = self.pop()\r\n        if not val:\r\n            self.jump(jump)\r\n\r\n    ## Blocks\r\n\r\n    def byte_SETUP_LOOP(self, dest):\r\n        self.push_block('loop', dest)\r\n\r\n    def byte_GET_ITER(self):\r\n        self.push(iter(self.pop()))\r\n\r\n    def byte_FOR_ITER(self, jump):\r\n        iterobj = self.top()\r\n        try:\r\n            v = next(iterobj)\r\n            self.push(v)\r\n        except StopIteration:\r\n            self.pop()\r\n            self.jump(jump)\r\n\r\n    def byte_BREAK_LOOP(self):\r\n        return 'break'\r\n\r\n    def byte_POP_BLOCK(self):\r\n        self.pop_block()\r\n\r\n    ## Functions\r\n\r\n    def byte_MAKE_FUNCTION(self, argc):\r\n        name = self.pop()\r\n        code = self.pop()\r\n        defaults = self.popn(argc)\r\n        globs = self.frame.f_globals\r\n        fn = Function(name, code, globs, defaults, None, self)\r\n        self.push(fn)\r\n\r\n    def byte_CALL_FUNCTION(self, arg):\r\n        lenKw, lenPos = divmod(arg, 256) # KWargs not supported here\r\n        posargs = self.popn(lenPos)\r\n\r\n        func = self.pop()\r\n        frame = self.frame\r\n        retval = func(*posargs)\r\n        self.push(retval)\r\n\r\n    def byte_RETURN_VALUE(self):\r\n        self.return_value = self.pop()\r\n        return \"return\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-139\">139</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-140\">140</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-141\">141</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-142\">142</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-143\">143</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-144\">144</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-145\">145</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-146\">146</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-147\">147</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-148\">148</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-149\">149</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-150\">150</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-151\">151</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-152\">152</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-153\">153</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-154\">154</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-155\">155</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-156\">156</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-157\">157</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-158\">158</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-159\">159</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-160\">160</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-161\">161</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-162\">162</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-163\">163</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-164\">164</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-165\">165</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-166\">166</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-167\">167</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-168\">168</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-169\">169</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-170\">170</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-171\">171</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-172\">172</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-173\">173</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-174\">174</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-175\">175</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-176\">176</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-177\">177</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-178\">178</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-179\">179</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-180\">180</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b59c345276428-181\">181</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b59c345276428-182\">182</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VirtualMachine</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">snip</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">## Stack manipulation</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_LOAD_CONST</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">const</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">const</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-8\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_POP_TOP</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">## Names</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_LOAD_NAME</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">frame</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-15\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_locals</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_locals</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_globals</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_globals</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_builtins</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_builtins</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-22\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">raise</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">NameError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"name '%s' is not defined\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-24\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_STORE_NAME</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_locals</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_LOAD_FAST</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_locals</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-30\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_locals</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">raise</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">UnboundLocalError</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-33\"><span class=\"crayon-h\">                </span><span class=\"crayon-s\">\"local variable '%s' referenced before assignment\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-36\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_STORE_FAST</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_locals</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-39\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_LOAD_GLOBAL</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">frame</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-42\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_globals</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-43\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_globals</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-44\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">elif</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">name </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_builtins</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">f_builtins</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-46\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">raise</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">NameError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"global name '%s' is not defined\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-49\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-50\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">## Operators</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-51\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">BINARY_OPERATORS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-53\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'POWER'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">    </span><span class=\"crayon-k \">pow</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-54\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'MULTIPLY'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mul</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-55\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'FLOOR_DIVIDE'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">floordiv</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-56\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'TRUE_DIVIDE'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">truediv</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'MODULO'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">mod</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-58\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'ADD'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">      </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">add</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-59\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'SUBTRACT'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sub</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'SUBSCR'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">getitem</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-61\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'LSHIFT'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lshift</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-62\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'RSHIFT'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">rshift</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-63\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'AND'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">      </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">and_</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-64\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'XOR'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">      </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">xor</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-65\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">'OR'</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">or_</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-66\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-67\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-68\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">binaryOperator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-69\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-70\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">BINARY_OPERATORS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">op</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-71\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-72\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">COMPARE_OPERATORS</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-73\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">lt</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-74\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">le</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-75\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">eq</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-76\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ne</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-77\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">gt</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-78\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">operator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ge</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-79\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-80\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-81\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-82\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-83\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">lambda</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">issubclass</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">Exception</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">issubclass</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-84\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-85\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-86\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_COMPARE_OP</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opnum</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-87\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-88\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">COMPARE_OPERATORS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">opnum</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-89\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-90\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">## Attributes and indexing</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-91\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-92\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_LOAD_ATTR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">attr</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-93\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">obj</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-94\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">getattr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">obj</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">attr</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-95\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-96\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-97\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_STORE_ATTR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-98\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">obj</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-99\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">setattr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">obj</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-100\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-101\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">## Building</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-102\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-103\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_BUILD_LIST</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-104\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">elts</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-105\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">elts</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-106\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-107\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_BUILD_MAP</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-108\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-109\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-110\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_STORE_MAP</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-111\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">the_map</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-112\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">the_map</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">val</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-113\"><span class=\"crayon-e\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">the_map</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-114\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-115\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_LIST_APPEND</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-116\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-117\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">the_list</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">stack</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\"># peek</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-118\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">the_list</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-119\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-120\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">## Jumps</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-121\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-122\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_JUMP_FORWARD</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-123\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-124\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-125\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_JUMP_ABSOLUTE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-126\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-127\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-128\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_POP_JUMP_IF_TRUE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-129\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-130\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-131\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-132\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-133\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_POP_JUMP_IF_FALSE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-134\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">val</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-135\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">val</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-136\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-137\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-138\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">## Blocks</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-139\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-140\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_SETUP_LOOP</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dest</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-141\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push_block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'loop'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dest</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-142\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-143\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_GET_ITER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-144\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">iter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-145\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-146\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_FOR_ITER</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-147\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">iterobj</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">top</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-148\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-149\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">next</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iterobj</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-150\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-151\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">except</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">StopIteration</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-152\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-153\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">jump</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jump</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-154\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-155\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_BREAK_LOOP</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-156\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'break'</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-157\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-158\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_POP_BLOCK</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-159\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop_block</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-160\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-161\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">## Functions</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-162\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-163\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_MAKE_FUNCTION</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">argc</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-164\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-165\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">code</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-166\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">defaults</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">argc</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-167\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">globs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">frame</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">f_globals</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-168\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">fn</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">code</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">globs</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">defaults</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">None</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-169\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fn</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-170\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-171\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_CALL_FUNCTION</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-172\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lenKw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lenPos</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">divmod</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\"># KWargs not supported here</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-173\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">posargs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">popn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lenPos</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-174\"> </div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-175\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">func</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-176\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">frame</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">frame</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-177\"><span class=\"crayon-e\">        </span><span class=\"crayon-v\">retval</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">posargs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-178\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">push</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">retval</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-179\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-180\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">byte_RETURN_VALUE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b59c345276428-181\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">return_value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">pop</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b59c345276428-182\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"return\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0326 seconds] -->\r\n<p></p>\n<h2>Dynamic Typing: What the Compiler Doesn’t Know</h2>\n<p>你可能听过Python是一种动态语言 — 是它是动态类型的。在我们建造解释器的过程中，已经流露出这个描述。</p>\n<p>动态的一个意思是很多工作在运行时完成。前面我们看到Python的编译器没有很多关于代码真正做什么的信息。举个例子，考虑下面这个简单的函数<code>mod</code>。它区两个参数，返回它们的模运算值。从它的字节码中，我们看到变量<code>a</code>和<code>b</code>首先被加载，然后字节码<code>BINAY_MODULO</code>完成这个模运算。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b5a4392896715\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; def mod(a, b):\r\n...    return a % b\r\n&gt;&gt;&gt; dis.dis(mod)\r\n  2           0 LOAD_FAST                0 (a)\r\n              3 LOAD_FAST                1 (b)\r\n              6 BINARY_MODULO\r\n              7 RETURN_VALUE\r\n&gt;&gt;&gt; mod(19, 5)\r\n4</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5a4392896715-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b5a4392896715-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5a4392896715-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b5a4392896715-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5a4392896715-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b5a4392896715-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5a4392896715-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b5a4392896715-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5a4392896715-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5a4392896715-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mod</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b5a4392896715-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5a4392896715-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">dis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">mod</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b5a4392896715-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">                </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5a4392896715-5\"><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LOAD</span><span class=\"crayon-sy\">_</span>FAST<span class=\"crayon-h\">                </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b5a4392896715-6\"><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BINARY</span><span class=\"crayon-sy\">_</span>MODULO</div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5a4392896715-7\"><span class=\"crayon-h\">              </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RETURN_VALUE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b5a4392896715-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mod</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5a4392896715-9\"><span class=\"crayon-cn\">4</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>计算19 % 5得4，— 一点也不奇怪。如果我们用不同类的参数呢？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b5a7116105237\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; mod(\"by%sde\", \"teco\")\r\n'bytecode'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5a7116105237-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b5a7116105237-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5a7116105237-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mod</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"by%sde\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"teco\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b5a7116105237-2\"><span class=\"crayon-s\">'bytecode'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>刚才发生了什么？你可能见过这样的语法，格式化字符串。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b5aa691610808\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; print(\"by%sde\" % \"teco\")\r\nbytecode</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5aa691610808-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b5aa691610808-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5aa691610808-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"by%sde\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"teco\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b5aa691610808-2\"><span class=\"crayon-v\">bytecode</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>用符号<code>%</code>去格式化字符串会调用字节码<code>BUNARY_MODULO</code>.它取栈顶的两个值求模，不管这两个值是字符串，数字或是你自己定义的类的实例。字节码在函数编译时生成（或者说，函数定义时）相同的字节码会用于不同类的参数。</p>\n<p>Python的编译器关于字节码的功能知道的很少。而取决于解释器来决定<code>BINAYR_MODULO</code>应用于什么类型的对象并完成真确的操作。这就是为什么Python被描述为<em>动态类型</em>：直到你运行前你不必知道这个函数参数的类型。相反，在一个静态类型语言中，程序员需要告诉编译器参数的类型是什么（或者编译器自己推断出参数的类型。）</p>\n<p>编译器的无知是优化Python的一个挑战 — 只看字节码，而不真正运行它，你就不知道每条字节码在干什么！你可以定义一个类，实现<code>__mod__</code>方法，当你对这个类的实例使用<code>%</code>时，Python就会自动调用这个方法。所以，<code>BINARY_MODULO</code>其实可以运行任何代码。</p>\n<p>看看下面的代码，第一个<code>a % b</code>看起来没有用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5b0e0d331b5ae846385828\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef mod(a,b):\r\n    a % b\r\n    return a %b</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5ae846385828-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5b0e0d331b5ae846385828-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5b0e0d331b5ae846385828-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5ae846385828-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mod</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5b0e0d331b5ae846385828-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span></div><div class=\"crayon-line\" id=\"crayon-5b0e0d331b5ae846385828-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">b</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>不幸的是，对这段代码进行静态分析 — 不运行它 — 不能确定第一个<code>a % b</code>没有做任何事。用 <code>%</code>调用<code>__mod__</code>可能会写一个文件，或是和程序的其他部分交互，或者其他任何可以在Python中完成的事。很难优化一个你不知道它会做什么的函数。在Russell Power和Alex Rubinsteyn的优秀论文中写道，“我们可用多快的速度解释Python？”，他们说，“在普遍缺乏类型信息下，每条指令必须被看作一个<code>INVOKE_ARBITRARY_METHOD</code>。”</p>\n<h2><a id=\"conclusion\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#conclusion\"></a>Conclusion</h2>\n<p>Byterun是一个比CPython容易理解的简洁的Python解释器。Byterun复制了CPython的主要结构：一个基于栈的指令集称为字节码，它们顺序执行或在指令间跳转，向栈中压入和从中弹出数据。解释器随着函数和生成器的调用和返回，动态的创建，销毁frame，并在frame间跳转。Byterun也有着和真正解释器一样的限制：因为Python使用动态类型，解释器必须在运行时决定指令的正确行为。</p>\n<p>我鼓励你去反汇编你的程序，然后用Byterun来运行。你很快会发现这个缩短版的Byterun所没有实现的指令。完整的实现在<a href=\"https://github.com/nedbat/byterun\">这里</a>或者仔细阅读真正的CPython解释器<code>ceval.c</code>,你也可以实现自己的解释器！</p>\n<h2><a id=\"acknowledgements\" class=\"anchor\" href=\"http://qingyunha.github.io/taotao/#acknowledgements\"></a>Acknowledgements</h2>\n<p>Thanks to Ned Batchelder for originating this project and guiding my contributions, Michael Arntzenius for his help debugging the code and editing the prose, Leta Montopoli for her edits, and the entire Recurse Center community for their support and interest. Any errors are my own.</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89074\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89074votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89074\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/af4571ab68e7f3066d3aadf08de9928f8d6c901b.jpg"}
{"url_object_id": "c6cf9dca74918cb90f6351c7f155c6a5", "title": "手把手教你写网络爬虫（6）：分布式爬虫", "url": "http://python.jobbole.com/89137/", "create_date": "2018/05/14", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/05/7d334a17c5a68693bdf337458bd8fe1e.jpg"], "praise_nums": "1", "comment_nums": "  评论", "fav_nums": "  收藏", "tags": "实践项目", "content": "<div class=\"entry\">\r\n\r\n        \r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/tuohai666/p/8939637.html\">拓海</a>   </div><div id=\"cnblogs_post_body\">\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/fda0befc7df897e15c31f9e9ee9a6cf4.jpg\" alt=\"\"></p>\n<p>下面是一个超级计算机的排行榜，如果我们能拥有其中任意一个，那么我们就不需要搞什么分布式系统。可是我们买不起，即使买得起，也交不起电费，所以我们只好费脑子搞分布式。</p>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td valign=\"top\" width=\"47\">Rank</td>\n<td valign=\"top\" width=\"122\">System</td>\n<td valign=\"top\" width=\"115\">Cores</td>\n<td valign=\"top\" width=\"93\">Rmax</td>\n<td valign=\"top\" width=\"93\">Rpeak</td>\n<td valign=\"top\" width=\"84\">Power (kW)</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>1</strong></td>\n<td valign=\"top\" width=\"122\"><strong><a href=\"https://www.top500.org/system/177999\">Tianhe-2</a>  </strong>China</td>\n<td valign=\"top\" width=\"115\">3,120,000</td>\n<td valign=\"top\" width=\"93\">33,862.7</td>\n<td valign=\"top\" width=\"93\">54,902.4</td>\n<td valign=\"top\" width=\"84\">17,808</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>2</strong></td>\n<td valign=\"top\" width=\"122\"><strong><a href=\"https://www.top500.org/system/177975\">Titan</a>  </strong>US</td>\n<td valign=\"top\" width=\"115\">560,640</td>\n<td valign=\"top\" width=\"93\">17,590.0</td>\n<td valign=\"top\" width=\"93\">27,112.5</td>\n<td valign=\"top\" width=\"84\">8,209</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>3</strong></td>\n<td valign=\"top\" width=\"122\"><strong><a href=\"https://www.top500.org/system/177556\">Sequoia</a>  </strong>US</td>\n<td valign=\"top\" width=\"115\">1,572,864</td>\n<td valign=\"top\" width=\"93\">17,173.2</td>\n<td valign=\"top\" width=\"93\">20,132.7</td>\n<td valign=\"top\" width=\"84\">7,890</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>4</strong></td>\n<td valign=\"top\" width=\"122\"><a href=\"https://www.top500.org/system/177232\">K </a>  Japan</td>\n<td valign=\"top\" width=\"115\">705,024</td>\n<td valign=\"top\" width=\"93\">10,510.0</td>\n<td valign=\"top\" width=\"93\">11,280.4</td>\n<td valign=\"top\" width=\"84\">12,660</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"47\"><strong>5</strong></td>\n<td valign=\"top\" width=\"122\"><strong><a href=\"https://www.top500.org/system/177718\">Mira</a>  </strong>US</td>\n<td valign=\"top\" width=\"115\">786,432</td>\n<td valign=\"top\" width=\"93\">8,586.6</td>\n<td valign=\"top\" width=\"93\">10,066.3</td>\n<td valign=\"top\" width=\"84\">3,945</td>\n</tr>\n</tbody>\n</table>\n<p>分布式的本质就如上期提到的一个概念：<em>分布式系统是若干独立计算机的集合，这些计算机对于用户来说就像是单个相关系统。</em>这就是在说，把廉价的计算机堆到一起，通过程序控制，使其整体用起来像个高性能计算机，目的就是节约成本。</p>\n<p>对于分布式爬虫系统来说，假设1台机器能10天爬完一个任务，如果部署10台机器，那么1天就会完成这个任务。这样就用可以接受的成本，让系统的效率提高了十倍。之前介绍的单机架构是达不到这种效果的，是时候介绍新的架构了！</p>\n<h1>架构概述</h1>\n<p>与第二期介绍的通用爬虫架构不同，下面是一个聚焦爬虫的架构图，与前者相比，它不仅要保存网页，还要提取出网页中的指定内容。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/05/d7574e8081ce57c5df2dc7b59e0ff21b.jpg\" alt=\"\"></p>\n<p><strong>Crawler_core  </strong>从任务队列获取爬虫任务，请求网页并将其存储到Mongodb，同时解析出网页中的URLs并缓存到Redis。最后通知Common-clean-platform抽取网页的指定字段。</p>\n<p><strong>Common-clean-platform  </strong>收到Crawler_core的通知后，从Mongodb中取出网页，根据配置进行数据抽取，形成结构化的数据，保存到Mongodb。</p>\n<p><strong>Scheduler_manager</strong>  负责任务调度（如启停），状态控制（如爬取数量），redis资源清理等。</p>\n<p><strong>Resource_manager</strong>  封装Mysql、Mongodb、Redis接口。Mysql存储任务基本信息、配置文件、任务实时状态等。Mongodb存储网页、结构化数据。Redis缓存队列、集合等数据结构。</p>\n<p><strong>Proxy</strong>  代理服务器。建立网络爬虫的第一原则是：所有信息都可以伪造。你可以用非本人的邮箱发送邮件，或者通过命令行自动化鼠标的行为。但是有一件事情是不能作假的，那就是你的IP地址。如果你在爬取的过程中不想被人发现，或者不想IP被封杀，那么就需要使用代理。</p>\n<p>笔者以前看过一个电影叫《Who Am I – No System Is Safe》，剧中的黑客老大“Who Am I”就用代理来隐藏自己，躲避FBI和其他黑客组织的追踪。</p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081303373-1240931039.jpg\" alt=\"\"></p>\n<p>不过最终他还是被抓了，看来即使用了炫酷的技术，也不是绝对安全的。</p>\n<p>如果你也想体验一下匿名访问网络，可以试试Tor代理服务器。洋葱路由（The Onion Router）网络，常用缩写为Tor，是一种IP 地址匿名手段。由网络志愿者服务器构建的洋葱路由器网络，通过不同服务器构成多个层（就像洋葱）把客户端包在最里面。数据进入网络之前会被加密，因此任何服务器都不能偷取通信数据。另外，虽然每一个服务器的入站和出站通信都可以被查到，但是要想查出通信的真正起点和终点，必须知道整个通信链路上所有服务器的入站和出站通信细节，而这基本是不可能实现的。</p>\n<p>Tor 是人权工作者和政治避难人员与记者通信的常用手段，得到了美国政府的大力支持。当然，它经常也被用于非法活动，所以也是政府盯防的目标（虽然目前盯防得并不是很成功）。</p>\n<h1>流程控制 – 任务</h1>\n<p>Scheduler_manager定时读取Mysql中的任务信息，根据任务的周期等配置进行调度，下面是一个最基本的任务启停流程。</p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081353710-110143442.jpg\" alt=\"\"></p>\n<ol>\n<li>当一个任务可以开始时，Scheduler_manager会将其基本信息(包括task_id，种子url，启动时间等)插入Reids的任务队列中。如果任务结束，就从队列中删除。</li>\n<li>每个Crawler_core实例定时读取Redis任务队列中的任务，插入到本地的内存任务队列中。</li>\n<li>相同的任务可以存在于不同的Crawler_core实例中，一个Crawler_core实例中也可以有相同的任务。</li>\n<li>Crawler_core的抓取线程从内存队列中获得可执行的任务，依次抓取和解析。</li>\n</ol>\n<h1>流程控制 – 数据</h1>\n<p>现在每个Crawler_core实例都有了待处理的任务，接下来就要对每个任务的url进行处理了。继续使用Redis作为公共缓存来存放URLs，多个Crawler_core实例并行存取todo集合。</p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081436514-731777584.jpg\" alt=\"\"></p>\n<ol>\n<li><strong>Todo</strong><strong>集合</strong>  Crawler_core从集合中取出url进行处理，并将解析得到的url添加到todo集合中。</li>\n<li><strong>Doing</strong><strong>集合</strong>  Crawler_core从todo中取出url，都同时保存到doing中，url处理完成时被从doing中删除。主要用于恢复数据。</li>\n<li><strong>Parser todo</strong><strong>队列</strong>  Crawler_core将已经保存到mongodb的页面的url发送到parser todo队列，Parser读取数据后进行解析。</li>\n<li><strong>Filter todo</strong><strong>队列</strong>  Parser将已经保存到mongodb的解析结果的url发送到filter todo队列，Filter读取数据后进行清洗。</li>\n</ol>\n<h1>流程控制 – 状态</h1>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081454157-591158989.jpg\" alt=\"\"></p>\n<p><strong>蓝色箭头</strong>  业务模块实时更新任务状态到Redis，StateObserver读取到Redis状态后，更新到mysql。</p>\n<p><strong>红色箭头</strong>  ClearObserver定时读取Mysql状态，若任务完成或中止，则清除任务所有的Redis key。</p>\n<p>Redis中的任务信息如下表所示：</p>\n<table style=\"height: 744px\" width=\"940\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td colspan=\"3\" valign=\"top\"><strong>taskId:flag:crawler:info</strong></td>\n</tr>\n<tr>\n<td valign=\"top\">F<strong>iled</strong></td>\n<td valign=\"top\"><strong>value</strong></td>\n<td valign=\"top\"><strong>说明</strong></td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>totalCnt</strong></td>\n<td valign=\"top\">10000</td>\n<td valign=\"top\">抓取的url总数：抓取完成，不管成功失败，都加1</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>failCnt</strong></td>\n<td valign=\"top\">0</td>\n<td valign=\"top\">抓取的url失败数：抓取失败，加1</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>switch</strong></td>\n<td valign=\"top\">1</td>\n<td valign=\"top\">任务状态：0：停止，1：启动，2：暂停，3：暂停启动</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>priority</strong></td>\n<td valign=\"top\">1</td>\n<td valign=\"top\">任务优先级</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>retryCnt</strong></td>\n<td valign=\"top\">0</td>\n<td valign=\"top\">重试次数</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>status</strong></td>\n<td valign=\"top\">0</td>\n<td valign=\"top\">任务执行状态：1：进行中，2：完成</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>Ref</strong></td>\n<td valign=\"top\">0</td>\n<td valign=\"top\">url引用数：每消费一个url，减1；生成一个url，加1。等于0则任务完成</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>maxThreadCnt</strong></td>\n<td valign=\"top\">100</td>\n<td valign=\"top\">任务的最大线程数</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>remainThreadCnt</strong></td>\n<td valign=\"top\">10</td>\n<td valign=\"top\">剩余可用线程数</td>\n</tr>\n<tr>\n<td valign=\"top\"><strong>lastFetchTime</strong></td>\n<td valign=\"top\">1496404451532</td>\n<td valign=\"top\">上一次抓取时间</td>\n</tr>\n</tbody>\n</table>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td colspan=\"3\" valign=\"top\">\n<p style=\"text-align: center\"><strong>taskId:flag:parser:info</strong></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\">F<strong>iled</strong></td>\n<td valign=\"top\" width=\"104\"><strong>value</strong></td>\n<td valign=\"top\" width=\"337\"><strong>说明</strong></td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>totalCnt</strong></td>\n<td valign=\"top\" width=\"104\">10000</td>\n<td valign=\"top\" width=\"337\">解析总数：解析完成，不管成功失败，都加1</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>failCnt</strong></td>\n<td valign=\"top\" width=\"104\">0</td>\n<td valign=\"top\" width=\"337\">解析失败数：解析失败，加1</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>crawlerStatus</strong></td>\n<td valign=\"top\" width=\"104\">0</td>\n<td valign=\"top\" width=\"337\">爬取状态：0：进行中，2：完成</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>ref</strong></td>\n<td valign=\"top\" width=\"104\">10</td>\n<td valign=\"top\" width=\"337\">url引用数：crawler每保存一个网页，加1；parser每解析完成一个网页，减1。等于0不说明任务完成。若crawlerStatus等于2，ref等于0，则任务完成。</td>\n</tr>\n</tbody>\n</table>\n<table cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td colspan=\"3\" valign=\"top\">\n<p style=\"text-align: center\"><strong>taskId:flag:filter:info</strong></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\">F<strong>iled</strong></td>\n<td valign=\"top\" width=\"104\"><strong>value</strong></td>\n<td valign=\"top\" width=\"337\"><strong>说明</strong></td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>totalCnt</strong></td>\n<td valign=\"top\" width=\"104\">10000</td>\n<td valign=\"top\" width=\"337\">清洗总数：清洗完成，不管成功失败，都加1</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>failCnt</strong></td>\n<td valign=\"top\" width=\"104\">0</td>\n<td valign=\"top\" width=\"337\">清洗失败数：清洗失败，加1</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>crawlerStatus</strong></td>\n<td valign=\"top\" width=\"104\">0</td>\n<td valign=\"top\" width=\"337\">解析状态：0：进行中，2：完成</td>\n</tr>\n<tr>\n<td valign=\"top\" width=\"113\"><strong>ref</strong></td>\n<td valign=\"top\" width=\"104\">10</td>\n<td valign=\"top\" width=\"337\">url引用数：parser每保存一条数据，加1；filter每清洗完成一条数据，减1。等于0不说明任务完成。若parserStatus等于2，ref等于0，则任务完成。</td>\n</tr>\n</tbody>\n</table>\n<h1>流程控制 – failover</h1>\n<p>如果一个Crawler_core的机器挂掉了，就会开始数据恢复程序，把这台机器所有未完成的任务恢复到公共缓存中。</p>\n<p><img src=\"https://images2018.cnblogs.com/blog/1368640/201804/1368640-20180425081515365-856056424.jpg\" alt=\"\"></p>\n<ol>\n<li>监控到192.168.0.1心跳停止。</li>\n<li>Master遍历正在运行的任务: task_jdjr:1489050240345等。</li>\n<li>得到doing和todo集合：\n<ol>\n<li>task_jdjr:1489050240345:crawler:doing: 192.168.0.1</li>\n<li>task_jdjr:1489050240345:crawler:todo</li>\n</ol>\n</li>\n<li>将doing中的数据全部移动到todo中。</li>\n</ol>\n<h1>下一步</h1>\n<p>今天对架构和流程进行了一个概要的介绍，细节问题以后会慢慢说。下期我们就先聊聊URL去重那些事儿。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"89137\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"89137votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"13\" data-item-id=\"89137\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/b995aa43ed619f7b48062bd5aa3343742bd7b826.jpg"}
